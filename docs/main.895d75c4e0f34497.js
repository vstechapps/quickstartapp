"use strict";(self.webpackChunkdesigner=self.webpackChunkdesigner||[]).push([[179],{605:()=>{function Fe(n){return"function"==typeof n}function yu(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const gd=yu(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function vu(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class $n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(Fe(r))try{r()}catch(o){e=o instanceof gd?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{KD(o)}catch(s){e=e??[],s instanceof gd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new gd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)KD(e);else{if(e instanceof $n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&vu(t,e)}remove(e){const{_finalizers:t}=this;t&&vu(t,e),e instanceof $n&&e._removeParent(this)}}$n.EMPTY=(()=>{const n=new $n;return n.closed=!0,n})();const zD=$n.EMPTY;function WD(n){return n instanceof $n||n&&"closed"in n&&Fe(n.remove)&&Fe(n.add)&&Fe(n.unsubscribe)}function KD(n){Fe(n)?n():n.unsubscribe()}const fo={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},md={setTimeout(n,e,...t){const{delegate:r}=md;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=md;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function QD(n){md.setTimeout(()=>{const{onUnhandledError:e}=fo;if(!e)throw n;e(n)})}function YD(){}const EU=_g("C",void 0,void 0);function _g(n,e,t){return{kind:n,value:e,error:t}}let po=null;function _d(n){if(fo.useDeprecatedSynchronousErrorHandling){const e=!po;if(e&&(po={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=po;if(po=null,t)throw r}}else n()}class yg extends $n{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,WD(e)&&e.add(this)):this.destination=SU}static create(e,t,r){return new Iu(e,t,r)}next(e){this.isStopped?Ig(function TU(n){return _g("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ig(function wU(n){return _g("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ig(EU,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const DU=Function.prototype.bind;function vg(n,e){return DU.call(n,e)}class AU{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){yd(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){yd(r)}else yd(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){yd(t)}}}class Iu extends yg{constructor(e,t,r){let i;if(super(),Fe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&fo.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&vg(e.next,o),error:e.error&&vg(e.error,o),complete:e.complete&&vg(e.complete,o)}):i=e}this.destination=new AU(i)}}function yd(n){fo.useDeprecatedSynchronousErrorHandling?function CU(n){fo.useDeprecatedSynchronousErrorHandling&&po&&(po.errorThrown=!0,po.error=n)}(n):QD(n)}function Ig(n,e){const{onStoppedNotification:t}=fo;t&&md.setTimeout(()=>t(n,e))}const SU={closed:!0,next:YD,error:function bU(n){throw n},complete:YD},Eg="function"==typeof Symbol&&Symbol.observable||"@@observable";function go(n){return n}function JD(n){return 0===n.length?go:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let ft=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function xU(n){return n&&n instanceof yg||function PU(n){return n&&Fe(n.next)&&Fe(n.error)&&Fe(n.complete)}(n)&&WD(n)}(t)?t:new Iu(t,r,i);return _d(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=XD(r))((i,o)=>{const s=new Iu({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Eg](){return this}pipe(...t){return JD(t)(this)}toPromise(t){return new(t=XD(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function XD(n){var e;return null!==(e=n??fo.Promise)&&void 0!==e?e:Promise}const MU=yu(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Wr=(()=>{class n extends ft{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ZD(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new MU}next(t){_d(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){_d(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){_d(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?zD:(this.currentObservers=null,o.push(t),new $n(()=>{this.currentObservers=null,vu(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new ft;return t.source=this,t}}return n.create=(e,t)=>new ZD(e,t),n})();class ZD extends Wr{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:zD}}function eA(n){return Fe(n?.lift)}function St(n){return e=>{if(eA(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Et(n,e,t,r,i){return new NU(n,e,t,r,i)}class NU extends yg{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ge(n,e){return St((t,r)=>{let i=0;t.subscribe(Et(r,o=>{r.next(n.call(e,o,i++))}))})}function Tg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]])}return t}function mo(n){return this instanceof mo?(this.v=n,this):new mo(n)}function VU(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(h){r[h]&&(i[h]=function(f){return new Promise(function(p,m){o.push([h,f,p,m])>1||a(h,f)})})}function a(h,f){try{!function u(h){h.value instanceof mo?Promise.resolve(h.value.v).then(c,l):d(o[0][2],h)}(r[h](f))}catch(p){d(o[0][3],p)}}function c(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),o.shift(),o.length&&a(o[0][0],o[0][1])}}function FU(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function rA(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){!function i(o,s,a,u){Promise.resolve(u).then(function(c){o({value:c,done:a})},s)}(a,u,(s=n[o](s)).done,s.value)})}}}const iA=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function oA(n){return Fe(n?.then)}function sA(n){return Fe(n[Eg])}function aA(n){return Symbol.asyncIterator&&Fe(n?.[Symbol.asyncIterator])}function uA(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const cA=function UU(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function lA(n){return Fe(n?.[cA])}function dA(n){return VU(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield mo(t.read());if(i)return yield mo(void 0);yield yield mo(r)}}finally{t.releaseLock()}})}function hA(n){return Fe(n?.getReader)}function nr(n){if(n instanceof ft)return n;if(null!=n){if(sA(n))return function BU(n){return new ft(e=>{const t=n[Eg]();if(Fe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(iA(n))return function jU(n){return new ft(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(oA(n))return function $U(n){return new ft(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,QD)})}(n);if(aA(n))return fA(n);if(lA(n))return function GU(n){return new ft(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(hA(n))return function HU(n){return fA(dA(n))}(n)}throw uA(n)}function fA(n){return new ft(e=>{(function qU(n,e){var t,r,i,o;return function kU(n,e,t,r){return new(t||(t=Promise))(function(o,s){function a(l){try{c(r.next(l))}catch(d){s(d)}}function u(l){try{c(r.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):function i(o){return o instanceof t?o:new t(function(s){s(o)})}(l.value).then(a,u)}c((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=FU(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Kr(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ot(n,e,t=1/0){return Fe(e)?Ot((r,i)=>ge((o,s)=>e(r,o,i,s))(nr(n(r,i))),t):("number"==typeof e&&(t=e),St((r,i)=>function zU(n,e,t,r,i,o,s,a){const u=[];let c=0,l=0,d=!1;const h=()=>{d&&!u.length&&!c&&e.complete()},f=m=>c<r?p(m):u.push(m),p=m=>{o&&e.next(m),c++;let _=!1;nr(t(m,l++)).subscribe(Et(e,I=>{i?.(I),o?f(I):e.next(I)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;u.length&&c<r;){const I=u.shift();s?Kr(e,s,()=>p(I)):p(I)}h()}catch(I){e.error(I)}}))};return n.subscribe(Et(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,n,t)))}function ys(n=1/0){return Ot(go,n)}const Qr=new ft(n=>n.complete());function Cg(n){return n[n.length-1]}function pA(n){return Fe(Cg(n))?n.pop():void 0}function Eu(n){return function KU(n){return n&&Fe(n.schedule)}(Cg(n))?n.pop():void 0}function gA(n,e=0){return St((t,r)=>{t.subscribe(Et(r,i=>Kr(r,n,()=>r.next(i),e),()=>Kr(r,n,()=>r.complete(),e),i=>Kr(r,n,()=>r.error(i),e)))})}function mA(n,e=0){return St((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function _A(n,e){if(!n)throw new Error("Iterable cannot be null");return new ft(t=>{Kr(t,e,()=>{const r=n[Symbol.asyncIterator]();Kr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function pt(n,e){return e?function tB(n,e){if(null!=n){if(sA(n))return function YU(n,e){return nr(n).pipe(mA(e),gA(e))}(n,e);if(iA(n))return function XU(n,e){return new ft(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(oA(n))return function JU(n,e){return nr(n).pipe(mA(e),gA(e))}(n,e);if(aA(n))return _A(n,e);if(lA(n))return function ZU(n,e){return new ft(t=>{let r;return Kr(t,e,()=>{r=n[cA](),Kr(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void t.error(s)}o?t.complete():t.next(i)},0,!0)}),()=>Fe(r?.return)&&r.return()})}(n,e);if(hA(n))return function eB(n,e){return _A(dA(n),e)}(n,e)}throw uA(n)}(n,e):nr(n)}function Dg(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Iu({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function ke(n){for(let e in n)if(n[e]===ke)return e;throw Error("Could not find renamed property on target object.")}function Ag(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Oe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Oe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function bg(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const iB=ke({__forward_ref__:ke});function Le(n){return n.__forward_ref__=Le,n.toString=function(){return Oe(this())},n}function Q(n){return Sg(n)?n():n}function Sg(n){return"function"==typeof n&&n.hasOwnProperty(iB)&&n.__forward_ref__===Le}function Rg(n){return n&&!!n.\u0275providers}class S extends Error{constructor(e,t){super(function vd(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function re(n){return"string"==typeof n?n:null==n?"":String(n)}function Id(n,e){throw new S(-201,!1)}function Gn(n,e){null==n&&function Ae(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function rr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ed(n){return vA(n,wd)||vA(n,EA)}function vA(n,e){return n.hasOwnProperty(e)?n[e]:null}function IA(n){return n&&(n.hasOwnProperty(Pg)||n.hasOwnProperty(fB))?n[Pg]:null}const wd=ke({\u0275prov:ke}),Pg=ke({\u0275inj:ke}),EA=ke({ngInjectableDef:ke}),fB=ke({ngInjectorDef:ke});var Y=(()=>((Y=Y||{})[Y.Default=0]="Default",Y[Y.Host=1]="Host",Y[Y.Self=2]="Self",Y[Y.SkipSelf=4]="SkipSelf",Y[Y.Optional=8]="Optional",Y))();let xg;function Hn(n){const e=xg;return xg=n,e}function wA(n,e,t){const r=Ed(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Y.Optional?null:void 0!==e?e:void Id(Oe(n))}const Ue=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),wu={},Mg="__NG_DI_FLAG__",Td="ngTempTokenPath",mB=/\n/gm,TA="__source";let Tu;function vs(n){const e=Tu;return Tu=n,e}function yB(n,e=Y.Default){if(void 0===Tu)throw new S(-203,!1);return null===Tu?wA(n,void 0,e):Tu.get(n,e&Y.Optional?null:void 0,e)}function H(n,e=Y.Default){return(function pB(){return xg}()||yB)(Q(n),e)}function Ie(n,e=Y.Default){return H(n,Cd(e))}function Cd(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ng(n){const e=[];for(let t=0;t<n.length;t++){const r=Q(n[t]);if(Array.isArray(r)){if(0===r.length)throw new S(900,!1);let i,o=Y.Default;for(let s=0;s<r.length;s++){const a=r[s],u=vB(a);"number"==typeof u?-1===u?i=a.token:o|=u:i=a}e.push(H(i,o))}else e.push(H(r))}return e}function Cu(n,e){return n[Mg]=e,n.prototype[Mg]=e,n}function vB(n){return n[Mg]}function xi(n){return{toString:n}.toString()}var ir=(()=>((ir=ir||{})[ir.OnPush=0]="OnPush",ir[ir.Default=1]="Default",ir))(),Ir=(()=>{return(n=Ir||(Ir={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ir;var n})();const Yr={},Te=[],Dd=ke({\u0275cmp:ke}),kg=ke({\u0275dir:ke}),Og=ke({\u0275pipe:ke}),DA=ke({\u0275mod:ke}),Jr=ke({\u0275fac:ke}),Du=ke({__NG_ELEMENT_ID__:ke});let wB=0;function mn(n){return xi(()=>{const t=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===ir.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Te,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Ir.Emulated,id:"c"+wB++,styles:n.styles||Te,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},o=n.dependencies,s=n.features;return i.inputs=SA(n.inputs,r),i.outputs=SA(n.outputs),s&&s.forEach(a=>a(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(AA).filter(bA):null,i.pipeDefs=o?()=>("function"==typeof o?o():o).map(on).filter(bA):null,i})}function AA(n){return be(n)||qt(n)}function bA(n){return null!==n}function Er(n){return xi(()=>({type:n.type,bootstrap:n.bootstrap||Te,declarations:n.declarations||Te,imports:n.imports||Te,exports:n.exports||Te,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function SA(n,e){if(null==n)return Yr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),t[i]=r,e&&(e[i]=o)}return t}const Z=mn;function _n(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function be(n){return n[Dd]||null}function qt(n){return n[kg]||null}function on(n){return n[Og]||null}function Rn(n,e){const t=n[DA]||null;if(!t&&!0===e)throw new Error(`Type ${Oe(n)} does not have '\u0275mod' property.`);return t}function Pn(n){return Array.isArray(n)&&"object"==typeof n[1]}function sr(n){return Array.isArray(n)&&!0===n[1]}function Lg(n){return 0!=(4&n.flags)}function Ru(n){return n.componentOffset>-1}function Pd(n){return 1==(1&n.flags)}function ar(n){return null!==n.template}function DB(n){return 0!=(256&n[2])}function yo(n,e){return n.hasOwnProperty(Jr)?n[Jr]:null}class SB{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function xn(){return kA}function kA(n){return n.type.prototype.ngOnChanges&&(n.setInput=PB),RB}function RB(){const n=VA(this),e=n?.current;if(e){const t=n.previous;if(t===Yr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function PB(n,e,t,r){const i=this.declaredInputs[t],o=VA(n)||function xB(n,e){return n[OA]=e}(n,{previous:Yr,current:null}),s=o.current||(o.current={}),a=o.previous,u=a[i];s[i]=new SB(u&&u.currentValue,e,a===Yr),n[r]=e}xn.ngInherit=!0;const OA="__ngSimpleChanges__";function VA(n){return n[OA]||null}function Vt(n){for(;Array.isArray(n);)n=n[0];return n}function xd(n,e){return Vt(e[n])}function Mn(n,e){return Vt(e[n.index])}function UA(n,e){return n.data[e]}function Nn(n,e){const t=e[n];return Pn(t)?t:t[0]}function Md(n){return 64==(64&n[2])}function Mi(n,e){return null==e?null:n[e]}function BA(n){n[18]=0}function Bg(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const ie={lFrame:YA(null),bindingsEnabled:!0};function $A(){return ie.bindingsEnabled}function C(){return ie.lFrame.lView}function Ee(){return ie.lFrame.tView}function Se(n){return ie.lFrame.contextLView=n,n[8]}function Re(n){return ie.lFrame.contextLView=null,n}function Ft(){let n=GA();for(;null!==n&&64===n.type;)n=n.parent;return n}function GA(){return ie.lFrame.currentTNode}function Tr(n,e){const t=ie.lFrame;t.currentTNode=n,t.isParent=e}function jg(){return ie.lFrame.isParent}function an(){const n=ie.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function As(){return ie.lFrame.bindingIndex++}function HB(n,e){const t=ie.lFrame;t.bindingIndex=t.bindingRootIndex=n,Gg(e)}function Gg(n){ie.lFrame.currentDirectiveIndex=n}function qg(n){ie.lFrame.currentQueryIndex=n}function zB(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function KA(n,e,t){if(t&Y.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&Y.Host||(i=zB(o),null===i||(o=o[15],10&i.type))););if(null===i)return!1;e=i,n=o}const r=ie.lFrame=QA();return r.currentTNode=e,r.lView=n,!0}function zg(n){const e=QA(),t=n[1];ie.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function QA(){const n=ie.lFrame,e=null===n?null:n.child;return null===e?YA(n):e}function YA(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function JA(){const n=ie.lFrame;return ie.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const XA=JA;function Wg(){const n=JA();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function un(){return ie.lFrame.selectedIndex}function vo(n){ie.lFrame.selectedIndex=n}function Nd(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=o;s&&(n.contentHooks||(n.contentHooks=[])).push(-t,s),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),u&&(n.viewHooks||(n.viewHooks=[])).push(-t,u),c&&((n.viewHooks||(n.viewHooks=[])).push(t,c),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,c)),null!=l&&(n.destroyHooks||(n.destroyHooks=[])).push(t,l)}}function kd(n,e,t){ZA(n,e,3,t)}function Od(n,e,t,r){(3&n[2])===t&&ZA(n,e,t,r)}function Kg(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function ZA(n,e,t,r){const o=r??-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&n[18]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(n[18]+=65536),(a<o||-1==o)&&(tj(n,t,e,u),n[18]=(4294901760&n[18])+u+2),u++}function tj(n,e,t,r){const i=t[r]<0,o=t[r+1],a=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class xu{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function Yg(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{const o=i,s=t[++r];tb(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function eb(n){return 3===n||4===n||6===n}function tb(n){return 64===n.charCodeAt(0)}function Mu(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||nb(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function nb(n,e,t,r,i){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}function rb(n){return-1!==n}function Vd(n){return 32767&n}function Fd(n,e){let t=function oj(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let Jg=!0;function Ld(n){const e=Jg;return Jg=n,e}let sj=0;const Cr={};function Ud(n,e){const t=sb(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,Xg(r.data,n),Xg(e,null),Xg(r.blueprint,null));const i=Zg(n,e),o=n.injectorIndex;if(rb(i)){const s=Vd(i),a=Fd(i,e),u=a[1].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|u[s+c]}return e[o+8]=i,o}function Xg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function sb(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Zg(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=fb(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function em(n,e,t){!function aj(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Du)&&(r=t[Du]),null==r&&(r=t[Du]=sj++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function ab(n,e,t){if(t&Y.Optional||void 0!==n)return n;Id()}function ub(n,e,t,r){if(t&Y.Optional&&void 0===r&&(r=null),0==(t&(Y.Self|Y.Host))){const i=n[9],o=Hn(void 0);try{return i?i.get(e,r,t&Y.Optional):wA(e,r,t&Y.Optional)}finally{Hn(o)}}return ab(r,0,t)}function cb(n,e,t,r=Y.Default,i){if(null!==n){if(1024&e[2]){const s=function hj(n,e,t,r,i){let o=n,s=e;for(;null!==o&&null!==s&&1024&s[2]&&!(256&s[2]);){const a=lb(o,s,t,r|Y.Self,Cr);if(a!==Cr)return a;let u=o.parent;if(!u){const c=s[21];if(c){const l=c.get(t,Cr,r);if(l!==Cr)return l}u=fb(s),s=s[15]}o=u}return i}(n,e,t,r,Cr);if(s!==Cr)return s}const o=lb(n,e,t,r,Cr);if(o!==Cr)return o}return ub(e,t,r,i)}function lb(n,e,t,r,i){const o=function lj(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Du)?n[Du]:void 0;return"number"==typeof e?e>=0?255&e:dj:e}(t);if("function"==typeof o){if(!KA(e,n,r))return r&Y.Host?ab(i,0,r):ub(e,t,r,i);try{const s=o(r);if(null!=s||r&Y.Optional)return s;Id()}finally{XA()}}else if("number"==typeof o){let s=null,a=sb(n,e),u=-1,c=r&Y.Host?e[16][6]:null;for((-1===a||r&Y.SkipSelf)&&(u=-1===a?Zg(n,e):e[a+8],-1!==u&&hb(r,!1)?(s=e[1],a=Vd(u),e=Fd(u,e)):a=-1);-1!==a;){const l=e[1];if(db(o,a,l.data)){const d=cj(a,e,t,s,r,c);if(d!==Cr)return d}u=e[a+8],-1!==u&&hb(r,e[1].data[a+8]===c)&&db(o,a,e)?(s=l,a=Vd(u),e=Fd(u,e)):a=-1}}return i}function cj(n,e,t,r,i,o){const s=e[1],a=s.data[n+8],l=function Bd(n,e,t,r,i){const o=n.providerIndexes,s=e.data,a=1048575&o,u=n.directiveStart,l=o>>20,h=i?a+l:n.directiveEnd;for(let f=r?a:a+l;f<h;f++){const p=s[f];if(f<u&&t===p||f>=u&&p.type===t)return f}if(i){const f=s[u];if(f&&ar(f)&&f.type===t)return u}return null}(a,s,t,null==r?Ru(a)&&Jg:r!=s&&0!=(3&a.type),i&Y.Host&&o===a);return null!==l?Io(e,s,l,a):Cr}function Io(n,e,t,r){let i=n[t];const o=e.data;if(function nj(n){return n instanceof xu}(i)){const s=i;s.resolving&&function oB(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new S(-200,`Circular dependency in DI detected for ${n}${t}`)}(function De(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():re(n)}(o[t]));const a=Ld(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?Hn(s.injectImpl):null;KA(n,r,Y.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function ej(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=kA(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),o&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o))}(t,o[t],e)}finally{null!==u&&Hn(u),Ld(a),s.resolving=!1,XA()}}return i}function db(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function hb(n,e){return!(n&Y.Self||n&Y.Host&&e)}class Ss{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return cb(this._tNode,this._lView,e,Cd(r),t)}}function dj(){return new Ss(Ft(),C())}function Lt(n){return xi(()=>{const e=n.prototype.constructor,t=e[Jr]||tm(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[Jr]||tm(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function tm(n){return Sg(n)?()=>{const e=tm(Q(n));return e&&e()}:yo(n)}function fb(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}const Ps="__parameters__";function Ms(n,e,t){return xi(()=>{const r=function nm(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(u,c,l){const d=u.hasOwnProperty(Ps)?u[Ps]:Object.defineProperty(u,Ps,{value:[]})[Ps];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class ${constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Eo(n,e){n.forEach(t=>Array.isArray(t)?Eo(t,e):e(t))}function gb(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function $d(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function kn(n,e,t){let r=Ns(n,e);return r>=0?n[1|r]=t:(r=~r,function mj(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function im(n,e){const t=Ns(n,e);if(t>=0)return n[1|t]}function Ns(n,e){return function mb(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const Vu=Cu(Ms("Optional"),8),Fu=Cu(Ms("SkipSelf"),4);var yn=(()=>((yn=yn||{})[yn.Important=1]="Important",yn[yn.DashCase=2]="DashCase",yn))();const lm=new Map;let Lj=0;const hm="__ngContext__";function Kt(n,e){Pn(e)?(n[hm]=e[20],function Bj(n){lm.set(n[20],n)}(e)):n[hm]=e}function pm(n,e){return undefined(n,e)}function ju(n){const e=n[3];return sr(e)?e[3]:e}function gm(n){return Vb(n[13])}function mm(n){return Vb(n[4])}function Vb(n){for(;null!==n&&!sr(n);)n=n[4];return n}function Os(n,e,t,r,i){if(null!=r){let o,s=!1;sr(r)?o=r:Pn(r)&&(s=!0,r=r[0]);const a=Vt(r);0===n&&null!==t?null==i?$b(e,t,a):wo(e,t,a,i||null,!0):1===n&&null!==t?wo(e,t,a,i||null,!0):2===n?function Tm(n,e,t){const r=zd(n,e);r&&function s$(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function c$(n,e,t,r,i){const o=t[7];o!==Vt(t)&&Os(e,n,r,o,i);for(let a=10;a<t.length;a++){const u=t[a];$u(u[1],u,n,e,r,o)}}(e,n,o,t,i)}}function ym(n,e,t){return n.createElement(e,t)}function Lb(n,e){const t=n[9],r=t.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,Bg(i,-1)),t.splice(r,1)}function vm(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&Lb(i,r),e>0&&(n[t-1][4]=r[4]);const o=$d(n,10+e);!function Xj(n,e){$u(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Ub(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&$u(n,e,t,3,null,null),function t$(n){let e=n[13];if(!e)return Im(n[1],n);for(;e;){let t=null;if(Pn(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Pn(e)&&Im(e[1],e),e=e[3];null===e&&(e=n),Pn(e)&&Im(e[1],e),t=e&&e[4]}e=t}}(e)}}function Im(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function o$(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof xu)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],u=o[s+1];try{u.call(a)}finally{}}else try{o.call(i)}finally{}}}}(n,e),function i$(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?r[i=s]():r[i=-s].unsubscribe(),o+=2}else{const s=r[i=t[o+1]];t[o].call(s)}if(null!==r){for(let o=i+1;o<r.length;o++)(0,r[o])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&sr(e[3])){t!==e[3]&&Lb(t,e);const r=e[19];null!==r&&r.detachView(n)}!function jj(n){lm.delete(n[20])}(e)}}function Bb(n,e,t){return function jb(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=n.data[r.directiveStart+i];if(o===Ir.None||o===Ir.Emulated)return null}return Mn(r,t)}}(n,e.parent,t)}function wo(n,e,t,r,i){n.insertBefore(e,t,r,i)}function $b(n,e,t){n.appendChild(e,t)}function Gb(n,e,t,r,i){null!==r?wo(n,e,t,r,i):$b(n,e,t)}function zd(n,e){return n.parentNode(e)}let Am,zb=function qb(n,e,t){return 40&n.type?Mn(n,t):null};function Wd(n,e,t,r){const i=Bb(n,r,e),o=e[11],a=function Hb(n,e,t){return zb(n,e,t)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let u=0;u<t.length;u++)Gb(o,i,t[u],a,!1);else Gb(o,i,t,a,!1)}function Kd(n,e){if(null!==e){const t=e.type;if(3&t)return Mn(e,n);if(4&t)return wm(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Kd(n,r);{const i=n[e.index];return sr(i)?wm(-1,i):Vt(i)}}if(32&t)return pm(e,n)()||Vt(n[e.index]);{const r=Kb(n,e);return null!==r?Array.isArray(r)?r[0]:Kd(ju(n[16]),r):Kd(n,e.next)}}return null}function Kb(n,e){return null!==e?n[16][6].projection[e.projection]:null}function wm(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return Kd(r,i)}return e[7]}function Cm(n,e,t,r,i,o,s){for(;null!=t;){const a=r[t.index],u=t.type;if(s&&0===e&&(a&&Kt(Vt(a),r),t.flags|=2),32!=(32&t.flags))if(8&u)Cm(n,e,t.child,r,i,o,!1),Os(e,n,i,a,o);else if(32&u){const c=pm(t,r);let l;for(;l=c();)Os(e,n,i,l,o);Os(e,n,i,a,o)}else 16&u?Qb(n,e,r,t,i,o):Os(e,n,i,a,o);t=s?t.projectionNext:t.next}}function $u(n,e,t,r,i,o){Cm(t,r,n.firstChild,e,i,o,!1)}function Qb(n,e,t,r,i,o){const s=t[16],u=s[6].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)Os(e,n,i,u[c],o);else Cm(n,e,u,s[3],i,o,!0)}function Yb(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Jb(n,e,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&Yg(n,e,r),null!==i&&Yb(n,e,i),null!==o&&function d$(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}class n0{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const Xd=new $("ENVIRONMENT_INITIALIZER"),f0=new $("INJECTOR",-1),p0=new $("INJECTOR_DEF_TYPES");class g0{get(e,t=wu){if(t===wu){const r=new Error(`NullInjectorError: No provider for ${Oe(e)}!`);throw r.name="NullInjectorError",r}return t}}function L$(...n){return{\u0275providers:m0(0,n),\u0275fromNgModule:!0}}function m0(n,...e){const t=[],r=new Set;let i;return Eo(e,o=>{const s=o;Mm(s,t,[],r)&&(i||(i=[]),i.push(s))}),void 0!==i&&_0(i,t),t}function _0(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];Nm(i,o=>{e.push(o)})}}function Mm(n,e,t,r){if(!(n=Q(n)))return!1;let i=null,o=IA(n);const s=!o&&be(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const u=n.ngModule;if(o=IA(u),!o)return!1;i=u}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of u)Mm(c,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let c;r.add(i);try{Eo(o.imports,l=>{Mm(l,e,t,r)&&(c||(c=[]),c.push(l))})}finally{}void 0!==c&&_0(c,e)}if(!a){const c=yo(i)||(()=>new i);e.push({provide:i,useFactory:c,deps:Te},{provide:p0,useValue:i,multi:!0},{provide:Xd,useValue:()=>H(i),multi:!0})}const u=o.providers;null==u||a||Nm(u,l=>{e.push(l)})}}return i!==n&&void 0!==n.providers}function Nm(n,e){for(let t of n)Rg(t)&&(t=t.\u0275providers),Array.isArray(t)?Nm(t,e):e(t)}const U$=ke({provide:String,useValue:ke});function km(n){return null!==n&&"object"==typeof n&&U$ in n}function Co(n){return"function"==typeof n}const Om=new $("Set Injector scope."),Zd={},j$={};let Vm;function eh(){return void 0===Vm&&(Vm=new g0),Vm}class ni{}class I0 extends ni{constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Lm(e,s=>this.processProvider(s)),this.records.set(f0,Vs(void 0,this)),i.has("environment")&&this.records.set(ni,Vs(void 0,this));const o=this.records.get(Om);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(p0.multi,Te,Y.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=vs(this),r=Hn(void 0);try{return e()}finally{vs(t),Hn(r)}}get(e,t=wu,r=Y.Default){this.assertNotDestroyed(),r=Cd(r);const i=vs(this),o=Hn(void 0);try{if(!(r&Y.SkipSelf)){let a=this.records.get(e);if(void 0===a){const u=function z$(n){return"function"==typeof n||"object"==typeof n&&n instanceof $}(e)&&Ed(e);a=u&&this.injectableDefInScope(u)?Vs(Fm(e),Zd):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Y.Self?eh():this.parent).get(e,t=r&Y.Optional&&t===wu?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[Td]=s[Td]||[]).unshift(Oe(e)),i)throw s;return function IB(n,e,t,r){const i=n[Td];throw e[TA]&&i.unshift(e[TA]),n.message=function EB(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Oe(e);if(Array.isArray(e))i=e.map(Oe).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Oe(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(mB,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Td]=null,n}(s,e,"R3InjectorError",this.source)}throw s}finally{Hn(o),vs(i)}}resolveInjectorInitializers(){const e=vs(this),t=Hn(void 0);try{const r=this.get(Xd.multi,Te,Y.Self);for(const i of r)i()}finally{vs(e),Hn(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Oe(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new S(205,!1)}processProvider(e){let t=Co(e=Q(e))?e:Q(e&&e.provide);const r=function G$(n){return km(n)?Vs(void 0,n.useValue):Vs(E0(n),Zd)}(e);if(Co(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Vs(void 0,Zd,!0),i.factory=()=>Ng(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Zd&&(t.value=j$,t.value=t.factory()),"object"==typeof t.value&&t.value&&function q$(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Q(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Fm(n){const e=Ed(n),t=null!==e?e.factory:yo(n);if(null!==t)return t;if(n instanceof $)throw new S(204,!1);if(n instanceof Function)return function $$(n){const e=n.length;if(e>0)throw function Ou(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new S(204,!1);const t=function dB(n){const e=n&&(n[wd]||n[EA]);if(e){const t=function hB(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new S(204,!1)}function E0(n,e,t){let r;if(Co(n)){const i=Q(n);return yo(i)||Fm(i)}if(km(n))r=()=>Q(n.useValue);else if(function v0(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...Ng(n.deps||[]));else if(function y0(n){return!(!n||!n.useExisting)}(n))r=()=>H(Q(n.useExisting));else{const i=Q(n&&(n.useClass||n.provide));if(!function H$(n){return!!n.deps}(n))return yo(i)||Fm(i);r=()=>new i(...Ng(n.deps))}return r}function Vs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Lm(n,e){for(const t of n)Array.isArray(t)?Lm(t,e):t&&Rg(t)?Lm(t.\u0275providers,e):e(t)}class W${}class w0{}class Q${resolveComponentFactory(e){throw function K$(n){const e=Error(`No component factory found for ${Oe(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let zu=(()=>{class n{}return n.NULL=new Q$,n})();function Y$(){return Fs(Ft(),C())}function Fs(n,e){return new On(Mn(n,e))}let On=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=Y$,n})();class C0{}let ri=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function X$(){const n=C(),t=Nn(Ft().index,n);return(Pn(t)?t:n)[11]}(),n})(),Z$=(()=>{class n{}return n.\u0275prov=q({token:n,providedIn:"root",factory:()=>null}),n})();class Wu{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const eG=new Wu("15.0.4"),Um={};function jm(n){return n.ngOriginalError}class Ls{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&jm(e);for(;t&&jm(t);)t=jm(t);return t||null}}function ii(n){return n instanceof Function?n():n}function A0(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}const b0="ng-template";function dG(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==A0(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function S0(n){return 4===n.type&&n.value!==b0}function hG(n,e,t){return e===(4!==n.type||t?n.value:b0)}function fG(n,e,t){let r=4;const i=n.attrs||[],o=function mG(n){for(let e=0;e<n.length;e++)if(eb(n[e]))return e;return n.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!hG(n,u,t)||""===u&&1===e.length){if(ur(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==n.attrs){if(!dG(n.attrs,c,t)){if(ur(r))return!1;s=!0}continue}const d=pG(8&r?"class":u,i,S0(n),t);if(-1===d){if(ur(r))return!1;s=!0;continue}if(""!==c){let h;h=d>o?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==A0(f,c,0)||2&r&&c!==h){if(ur(r))return!1;s=!0}}}}else{if(!s&&!ur(r)&&!ur(u))return!1;if(s&&ur(u))continue;s=!1,r=u|1&r}}return ur(r)||s}function ur(n){return 0==(1&n)}function pG(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const s=e[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function _G(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function R0(n,e,t=!1){for(let r=0;r<e.length;r++)if(fG(n,e[r],t))return!0;return!1}function P0(n,e){return n?":not("+e.trim()+")":e}function vG(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!ur(s)&&(e+=P0(o,i),i=""),r=s,o=o||!ur(r);t++}return""!==i&&(e+=P0(o,i)),e}const oe={};function G(n){x0(Ee(),C(),un()+n,!1)}function x0(n,e,t,r){if(!r)if(3==(3&e[2])){const o=n.preOrderCheckHooks;null!==o&&kd(e,o,t)}else{const o=n.preOrderHooks;null!==o&&Od(e,o,0,t)}vo(t)}function O0(n,e=null,t=null,r){const i=V0(n,e,t,r);return i.resolveInjectorInitializers(),i}function V0(n,e=null,t=null,r,i=new Set){const o=[t||Te,L$(n)];return r=r||("object"==typeof n?void 0:Oe(n)),new I0(o,e||eh(),r||null,i)}let cr=(()=>{class n{static create(t,r){if(Array.isArray(t))return O0({name:""},r,t,"");{const i=t.name??"";return O0({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=wu,n.NULL=new g0,n.\u0275prov=q({token:n,providedIn:"any",factory:()=>H(f0)}),n.__NG_ELEMENT_ID__=-1,n})();function T(n,e=Y.Default){const t=C();return null===t?H(n,e):cb(Ft(),t,Q(n),e)}function H0(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],o=t[r+1];if(-1!==o){const s=n.data[o];qg(i),s.contentQueries(2,e[o],o)}}}function nh(n,e,t,r,i,o,s,a,u,c,l){const d=e.blueprint.slice();return d[0]=i,d[2]=76|r,(null!==l||n&&1024&n[2])&&(d[2]|=1024),BA(d),d[3]=d[15]=n,d[8]=t,d[10]=s||n&&n[10],d[11]=a||n&&n[11],d[12]=u||n&&n[12]||null,d[9]=c||n&&n[9]||null,d[6]=o,d[20]=function Uj(){return Lj++}(),d[21]=l,d[16]=2==e.type?n[16]:d,d}function js(n,e,t,r,i){let o=n.data[e];if(null===o)o=function zm(n,e,t,r,i){const o=GA(),s=jg(),u=n.data[e]=function qG(n,e,t,r,i,o){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=u),null!==o&&(s?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u)),u}(n,e,t,r,i),function GB(){return ie.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function Pu(){const n=ie.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Tr(o,!0),o}function Ku(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Wm(n,e,t){zg(e);try{const r=n.viewQuery;null!==r&&r_(1,r,t);const i=n.template;null!==i&&q0(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&H0(n,e),n.staticViewQueries&&r_(2,n.viewQuery,t);const o=n.components;null!==o&&function $G(n,e){for(let t=0;t<e.length;t++)l4(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,Wg()}}function rh(n,e,t,r){const i=e[2];if(128!=(128&i)){zg(e);try{BA(e),function qA(n){return ie.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&q0(n,e,t,2,r);const s=3==(3&i);if(s){const c=n.preOrderCheckHooks;null!==c&&kd(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Od(e,c,0,null),Kg(e,0)}if(function u4(n){for(let e=gm(n);null!==e;e=mm(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],o=i[3];0==(512&i[2])&&Bg(o,1),i[2]|=512}}}(e),function a4(n){for(let e=gm(n);null!==e;e=mm(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];Md(r)&&rh(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&H0(n,e),s){const c=n.contentCheckHooks;null!==c&&kd(e,c)}else{const c=n.contentHooks;null!==c&&Od(e,c,1),Kg(e,1)}!function BG(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)vo(~i);else{const o=i,s=t[++r],a=t[++r];HB(s,o),a(2,e[o])}}}finally{vo(-1)}}(n,e);const a=n.components;null!==a&&function jG(n,e){for(let t=0;t<e.length;t++)c4(n,e[t])}(e,a);const u=n.viewQuery;if(null!==u&&r_(2,u,r),s){const c=n.viewCheckHooks;null!==c&&kd(e,c)}else{const c=n.viewHooks;null!==c&&Od(e,c,2),Kg(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Bg(e[3],-1))}finally{Wg()}}}function q0(n,e,t,r,i){const o=un(),s=2&r;try{vo(-1),s&&e.length>22&&x0(n,e,22,!1),t(r,i)}finally{vo(o)}}function Km(n,e,t){if(Lg(e)){const i=e.directiveEnd;for(let o=e.directiveStart;o<i;o++){const s=n.data[o];s.contentQueries&&s.contentQueries(1,t[o],o)}}}function Qm(n,e,t){!$A()||(function JG(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;Ru(t)&&function i4(n,e,t){const r=Mn(e,n),i=z0(t),o=n[10],s=ih(n,nh(n,i,null,t.onPush?32:16,r,e,o,o.createRenderer(r,t),null,null,null));n[e.index]=s}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Ud(t,e),Kt(r,e);const s=t.initialInputs;for(let a=i;a<o;a++){const u=n.data[a],c=Io(e,n,a,t);Kt(c,e),null!==s&&o4(0,a-i,c,u,0,s),ar(u)&&(Nn(t.index,e)[8]=Io(e,n,a,t))}}(n,e,t,Mn(t,e)),64==(64&t.flags)&&X0(n,e,t))}function Ym(n,e,t=Mn){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(e,n):n[s];n[i++]=a}}}function z0(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Jm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Jm(n,e,t,r,i,o,s,a,u,c){const l=22+r,d=l+i,h=function GG(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:oe);return t}(l,d),f="function"==typeof c?c():c;return h[1]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function K0(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const o=n[i];null===r?Q0(t,e,i,o):r.hasOwnProperty(i)&&Q0(t,e,r[i],o)}return t}function Q0(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Y0(n,e){const t=Nn(e,n);16&t[2]||(t[2]|=32)}function Xm(n,e,t,r){let i=!1;if($A()){const o=null===r?null:{"":-1},s=function ZG(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(R0(e,s.selectors,!1))if(r||(r=[]),ar(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),Zm(n,e,a.length)}else r.unshift(s),Zm(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(n,t);let a,u;null===s?a=u=null:[a,u]=s,null!==a&&(i=!0,J0(n,e,t,a,o,u)),o&&function e4(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new S(-301,!1);r.push(e[i],o)}}}(t,r,o)}return t.mergedAttrs=Mu(t.mergedAttrs,t.attrs),i}function J0(n,e,t,r,i,o){for(let c=0;c<r.length;c++)em(Ud(t,e),n,r[c].type);!function n4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const l=r[c];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,u=Ku(n,e,r.length,null);for(let c=0;c<r.length;c++){const l=r[c];t.mergedAttrs=Mu(t.mergedAttrs,l.hostAttrs),r4(n,t,e,u,l),t4(u,l,i),null!==l.contentQueries&&(t.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(t.flags|=64);const d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),a=!0),u++}!function zG(n,e,t){const i=e.directiveEnd,o=n.data,s=e.attrs,a=[];let u=null,c=null;for(let l=e.directiveStart;l<i;l++){const d=o[l],h=t?t.get(d):null,p=h?h.outputs:null;u=K0(d.inputs,l,u,h?h.inputs:null),c=K0(d.outputs,l,c,p);const m=null===u||null===s||S0(e)?null:s4(u,l,s);a.push(m)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}(n,t,o)}function X0(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function qB(){return ie.lFrame.currentDirectiveIndex}();try{vo(o);for(let a=r;a<i;a++){const u=n.data[a],c=e[a];Gg(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&XG(u,c)}}finally{vo(-1),Gg(s)}}function XG(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Zm(n,e,t){e.componentOffset=t,(n.components||(n.components=[])).push(e.index)}function t4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;ar(e)&&(t[""]=n)}}function r4(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=yo(i.type)),s=new xu(o,ar(i),T);n.blueprint[r]=s,t[r]=s,function QG(n,e,t,r,i){const o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function YG(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,o)}}(n,e,r,Ku(n,t,i.hostVars,oe),i)}function o4(n,e,t,r,i,o){const s=o[e];if(null!==s){const a=r.setInput;for(let u=0;u<s.length;){const c=s[u++],l=s[u++],d=s[u++];null!==a?r.setInput(t,d,c,l):t[l]=d}}}function s4(n,e,t){let r=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===r&&(r=[]);const s=n[o];for(let a=0;a<s.length;a+=2)if(s[a]===e){r.push(o,s[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function Z0(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null]}function c4(n,e){const t=Nn(e,n);if(Md(t)){const r=t[1];48&t[2]?rh(r,t,r.template,t[8]):t[5]>0&&t_(t)}}function t_(n){for(let r=gm(n);null!==r;r=mm(r))for(let i=10;i<r.length;i++){const o=r[i];if(Md(o))if(512&o[2]){const s=o[1];rh(s,o,s.template,o[8])}else o[5]>0&&t_(o)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=Nn(t[r],n);Md(i)&&i[5]>0&&t_(i)}}function l4(n,e){const t=Nn(e,n),r=t[1];(function d4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),Wm(r,t,t[8])}function ih(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function n_(n){for(;n;){n[2]|=32;const e=ju(n);if(DB(n)&&!e)return n;n=e}return null}function oh(n,e,t,r=!0){const i=e[10];i.begin&&i.begin();try{rh(n,e,n.template,t)}catch(s){throw r&&rS(e,s),s}finally{i.end&&i.end()}}function r_(n,e,t){qg(0),e(n,t)}function eS(n){return n[7]||(n[7]=[])}function tS(n){return n.cleanup||(n.cleanup=[])}function rS(n,e){const t=n[9],r=t?t.get(Ls,null):null;r&&r.handleError(e)}function i_(n,e,t,r,i){for(let o=0;o<t.length;){const s=t[o++],a=t[o++],u=e[s],c=n.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function sh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=bg(i,a):2==o&&(r=bg(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ah(n,e,t,r,i=!1){for(;null!==t;){const o=e[t.index];if(null!==o&&r.push(Vt(o)),sr(o))for(let a=10;a<o.length;a++){const u=o[a],c=u[1].firstChild;null!==c&&ah(u[1],u,c,r)}const s=t.type;if(8&s)ah(n,e,t.child,r);else if(32&s){const a=pm(t,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=Kb(e,t);if(Array.isArray(a))r.push(...a);else{const u=ju(e[16]);ah(u[1],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}class Qu{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return ah(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(sr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(vm(e,r),$d(t,r))}this._attachedToViewContainer=!1}Ub(this._lView[1],this._lView)}onDestroy(e){!function W0(n,e,t,r){const i=eS(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&tS(n).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){n_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){oh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new S(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function e$(n,e){$u(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new S(902,!1);this._appRef=e}}class h4 extends Qu{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;oh(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class iS extends zu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=be(e);return new Yu(t,this.ngModule)}}function oS(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class p4{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Cd(r);const i=this.injector.get(e,Um,r);return i!==Um||t===Um?i:this.parentInjector.get(e,t,r)}}class Yu extends w0{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function IG(n){return n.map(vG).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return oS(this.componentDef.inputs)}get outputs(){return oS(this.componentDef.outputs)}create(e,t,r,i){let o=(i=i||this.ngModule)instanceof ni?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new p4(e,o):e,a=s.get(C0,null);if(null===a)throw new S(407,!1);const u=s.get(Z$,null),c=a.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",d=r?function HG(n,e,t){return n.selectRootElement(e,t===Ir.ShadowDom)}(c,r,this.componentDef.encapsulation):ym(c,l,function f4(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(l)),h=this.componentDef.onPush?288:272,f=Jm(0,null,null,1,0,null,null,null,null,null),p=nh(null,f,null,h,null,null,a,c,u,s,null);let m,_;zg(p);try{const I=this.componentDef;let w,y=null;I.findHostDirectiveDefs?(w=[],y=new Map,I.findHostDirectiveDefs(I,w,y),w.push(I)):w=[I];const b=function m4(n,e){const t=n[1];return n[22]=e,js(t,22,2,"#host",null)}(p,d),B=function _4(n,e,t,r,i,o,s,a){const u=i[1];!function y4(n,e,t,r){for(const i of n)e.mergedAttrs=Mu(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(sh(e,e.mergedAttrs,!0),null!==t&&Jb(r,t,e))}(r,n,e,s);const c=o.createRenderer(e,t),l=nh(i,z0(t),null,t.onPush?32:16,i[n.index],n,o,c,a||null,null,null);return u.firstCreatePass&&Zm(u,n,r.length-1),ih(i,l),i[n.index]=l}(b,d,I,w,p,a,c);_=UA(f,22),d&&function I4(n,e,t,r){if(r)Yg(n,t,["ng-version",eG.full]);else{const{attrs:i,classes:o}=function EG(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!ur(i))break;i=o}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&Yg(n,t,i),o&&o.length>0&&Yb(n,t,o.join(" "))}}(c,I,d,r),void 0!==t&&function E4(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const o=t[i];r.push(null!=o?Array.from(o):null)}}(_,this.ngContentSelectors,t),m=function v4(n,e,t,r,i,o){const s=Ft(),a=i[1],u=Mn(s,i);J0(a,i,s,t,null,r);for(let l=0;l<t.length;l++)Kt(Io(i,a,s.directiveStart+l,s),i);X0(a,i,s),u&&Kt(u,i);const c=Io(i,a,s.directiveStart+s.componentOffset,s);if(n[8]=i[8]=c,null!==o)for(const l of o)l(c,e);return Km(a,s,n),c}(B,I,w,y,p,[w4]),Wm(f,p,null)}finally{Wg()}return new g4(this.componentType,m,Fs(_,p),p,_)}}class g4 extends W${constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new h4(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const o=this._rootLView;i_(o[1],o,i,e,t),Y0(o,this._tNode.index)}}get injector(){return new Ss(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function w4(){const n=Ft();Nd(C()[1],n)}function Pe(n){let e=function sS(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(ar(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new S(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const s=n;s.inputs=o_(n.inputs),s.declaredInputs=o_(n.declaredInputs),s.outputs=o_(n.outputs);const a=i.hostBindings;a&&A4(n,a);const u=i.viewQuery,c=i.contentQueries;if(u&&C4(n,u),c&&D4(n,c),Ag(n.inputs,i.inputs),Ag(n.declaredInputs,i.declaredInputs),Ag(n.outputs,i.outputs),ar(i)&&i.data.animation){const l=n.data;l.animation=(l.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===Pe&&(t=!1)}}e=Object.getPrototypeOf(e)}!function T4(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Mu(i.hostAttrs,t=Mu(t,i.hostAttrs))}}(r)}function o_(n){return n===Yr?{}:n===Te?[]:n}function C4(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function D4(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function A4(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}let uh=null;function Do(){if(!uh){const n=Ue.Symbol;if(n&&n.iterator)uh=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const r=e[t];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(uh=r)}}}return uh}function Ju(n){return!!s_(n)&&(Array.isArray(n)||!(n instanceof Map)&&Do()in n)}function s_(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ar(n,e,t){return n[e]=t}function Qt(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function he(n,e,t,r,i,o,s,a){const u=C(),c=Ee(),l=n+22,d=c.firstCreatePass?function V4(n,e,t,r,i,o,s,a,u){const c=e.consts,l=js(e,n,4,s||null,Mi(c,a));Xm(e,t,l,Mi(c,u)),Nd(e,l);const d=l.tViews=Jm(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,t,r,i,o,s):c.data[l];Tr(d,!1);const h=u[11].createComment("");Wd(c,u,h,d),Kt(h,u),ih(u,u[l]=Z0(h,u,h,d)),Pd(d)&&Qm(c,u,d),null!=s&&Ym(u,d,a)}function J(n,e,t){const r=C();return Qt(r,As(),e)&&function Vn(n,e,t,r,i,o,s,a){const u=Mn(e,t);let l,c=e.inputs;!a&&null!=c&&(l=c[r])?(i_(n,t,l,r,i),Ru(e)&&Y0(t,e.index)):3&e.type&&(r=function WG(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(u,r,i))}(Ee(),function Je(){const n=ie.lFrame;return UA(n.tView,n.selectedIndex)}(),r,n,e,r[11],t,!1),J}function a_(n,e,t,r,i){const s=i?"class":"style";i_(n,t,e.inputs[s],s,r)}function V(n,e,t,r){const i=C(),o=Ee(),s=22+n,a=i[11],u=i[s]=ym(a,e,function ZB(){return ie.lFrame.currentNamespace}()),c=o.firstCreatePass?function U4(n,e,t,r,i,o,s){const a=e.consts,c=js(e,n,2,i,Mi(a,o));return Xm(e,t,c,Mi(a,s)),null!==c.attrs&&sh(c,c.attrs,!1),null!==c.mergedAttrs&&sh(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,i,0,e,t,r):o.data[s];return Tr(c,!0),Jb(a,u,c),32!=(32&c.flags)&&Wd(o,i,u,c),0===function FB(){return ie.lFrame.elementDepthCount}()&&Kt(u,i),function LB(){ie.lFrame.elementDepthCount++}(),Pd(c)&&(Qm(o,i,c),Km(o,c,i)),null!==r&&Ym(i,c),V}function L(){let n=Ft();jg()?function $g(){ie.lFrame.isParent=!1}():(n=n.parent,Tr(n,!1));const e=n;!function UB(){ie.lFrame.elementDepthCount--}();const t=Ee();return t.firstCreatePass&&(Nd(t,n),Lg(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function rj(n){return 0!=(8&n.flags)}(e)&&a_(t,e,C(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function ij(n){return 0!=(16&n.flags)}(e)&&a_(t,e,C(),e.stylesWithoutHost,!1),L}function si(n,e,t,r){return V(n,e,t,r),L(),si}function Ve(){return C()}function Zu(n){return!!n&&"function"==typeof n.then}function IS(n){return!!n&&"function"==typeof n.subscribe}const l_=IS;function te(n,e,t,r){const i=C(),o=Ee(),s=Ft();return function wS(n,e,t,r,i,o,s){const a=Pd(r),c=n.firstCreatePass&&tS(n),l=e[8],d=eS(e);let h=!0;if(3&r.type||s){const m=Mn(r,e),_=s?s(m):m,I=d.length,w=s?b=>s(Vt(b[r.index])):r.index;let y=null;if(!s&&a&&(y=function j4(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=e[7],u=i[o+2];return a.length>u?a[u]:null}"string"==typeof s&&(o+=2)}return null}(n,e,i,r.index)),null!==y)(y.__ngLastListenerFn__||y).__ngNextListenerFn__=o,y.__ngLastListenerFn__=o,h=!1;else{o=CS(r,e,l,o,!1);const b=t.listen(_,i,o);d.push(o,b),c&&c.push(i,w,I,I+1)}}else o=CS(r,e,l,o,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const m=p.length;if(m)for(let _=0;_<m;_+=2){const B=e[p[_]][p[_+1]].subscribe(o),j=d.length;d.push(o,B),c&&c.push(i,r.index,j,-(j+1))}}}(o,i,i[11],s,n,e,r),te}function TS(n,e,t,r){try{return!1!==t(r)}catch(i){return rS(n,i),!1}}function CS(n,e,t,r,i){return function o(s){if(s===Function)return r;n_(n.componentOffset>-1?Nn(n.index,e):e);let u=TS(e,0,r,s),c=o.__ngNextListenerFn__;for(;c;)u=TS(e,0,c,s)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&(s.preventDefault(),s.returnValue=!1),u}}function z(n=1){return function WB(n){return(ie.lFrame.contextLView=function KB(n,e){for(;n>0;)e=e[15],n--;return e}(n,ie.lFrame.contextLView))[8]}(n)}function lh(n,e){return n<<17|e<<2}function ki(n){return n>>17&32767}function h_(n){return 2|n}function bo(n){return(131068&n)>>2}function f_(n,e){return-131069&n|e<<2}function p_(n){return 1|n}function kS(n,e,t,r,i){const o=n[t+1],s=null===e;let a=r?ki(o):bo(o),u=!1;for(;0!==a&&(!1===u||s);){const l=n[a+1];Y4(n[a],e)&&(u=!0,n[a+1]=r?p_(l):h_(l)),a=r?ki(l):bo(l)}u&&(n[t+1]=r?h_(o):p_(o))}function Y4(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Ns(n,e)>=0}function dh(n,e){return function lr(n,e,t,r){const i=C(),o=Ee(),s=function ei(n){const e=ie.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);o.firstUpdatePass&&function GS(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[un()],s=function $S(n,e){return e>=n.expandoStartIndex}(n,t);(function WS(n,e){return 0!=(n.flags&(e?8:16))})(o,r)&&null===e&&!s&&(e=!1),e=function oH(n,e,t,r){const i=function Hg(n){const e=ie.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=ec(t=g_(null,n,e,t,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==i)if(t=g_(i,n,e,t,r),null===o){let u=function sH(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==bo(r))return n[ki(r)]}(n,e,r);void 0!==u&&Array.isArray(u)&&(u=g_(null,n,e,u[1],r),u=ec(u,e.attrs,r),function aH(n,e,t,r){n[ki(t?e.classBindings:e.styleBindings)]=r}(n,e,r,u))}else o=function uH(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=ec(r,n[o].hostAttrs,t);return ec(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function K4(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ki(s),u=bo(s);n[r]=t;let l,c=!1;if(Array.isArray(t)){const d=t;l=d[1],(null===l||Ns(d,l)>0)&&(c=!0)}else l=t;if(i)if(0!==u){const h=ki(n[a+1]);n[r+1]=lh(h,a),0!==h&&(n[h+1]=f_(n[h+1],r)),n[a+1]=function z4(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=lh(a,0),0!==a&&(n[a+1]=f_(n[a+1],r)),a=r;else n[r+1]=lh(u,0),0===a?a=r:n[u+1]=f_(n[u+1],r),u=r;c&&(n[r+1]=h_(n[r+1])),kS(n,l,r,!0),kS(n,l,r,!1),function Q4(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Ns(o,e)>=0&&(t[r+1]=p_(t[r+1]))}(e,l,n,r,o),s=lh(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,t,s,r)}}(o,n,s,r),e!==oe&&Qt(i,s,e)&&function qS(n,e,t,r,i,o,s,a){if(!(3&e.type))return;const u=n.data,c=u[a+1],l=function W4(n){return 1==(1&n)}(c)?zS(u,e,t,i,bo(c),s):void 0;hh(l)||(hh(o)||function q4(n){return 2==(2&n)}(c)&&(o=zS(u,null,t,i,a,s)),function l$(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:yn.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=yn.Important),n.setStyle(t,r,i,o))}}(r,s,xd(un(),t),i,o))}(o,o.data[un()],i,i[11],n,i[s+1]=function dH(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Oe(function Ni(n){return n instanceof n0?n.changingThisBreaksApplicationSecurity:n}(n)))),n}(e,t),r,s)}(n,e,null,!0),dh}function g_(n,e,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],r=ec(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function ec(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),kn(n,s,!!t||e[++o]))}return void 0===n?null:n}function zS(n,e,t,r,i,o){const s=null===e;let a;for(;i>0;){const u=n[i],c=Array.isArray(u),l=c?u[1]:u,d=null===l;let h=t[i+1];h===oe&&(h=d?Te:void 0);let f=d?im(h,r):l===r?h:void 0;if(c&&!hh(f)&&(f=im(u,r)),hh(f)&&(a=f,s))return a;const p=n[i+1];i=s?ki(p):bo(p)}if(null!==e){let u=o?e.residualClasses:e.residualStyles;null!=u&&(a=im(u,r))}return a}function hh(n){return void 0!==n}function me(n,e=""){const t=C(),r=Ee(),i=n+22,o=r.firstCreatePass?js(r,i,1,e,null):r.data[i],s=t[i]=function _m(n,e){return n.createText(e)}(t[11],e);Wd(r,t,s,o),Tr(o,!1)}function In(n){return m_("",n,""),In}function m_(n,e,t){const r=C(),i=function Gs(n,e,t,r){return Qt(n,As(),t)?e+re(t)+r:oe}(r,n,e,t);return i!==oe&&function oi(n,e,t){const r=xd(e,n);!function Fb(n,e,t){n.setValue(e,t)}(n[11],r,t)}(r,un(),i),m_}const Zs="en-US";let gR=Zs;function v_(n,e,t,r,i){if(n=Q(n),Array.isArray(n))for(let o=0;o<n.length;o++)v_(n[o],e,t,r,i);else{const o=Ee(),s=C();let a=Co(n)?n:Q(n.provide),u=E0(n);const c=Ft(),l=1048575&c.providerIndexes,d=c.directiveStart,h=c.providerIndexes>>20;if(Co(n)||!n.multi){const f=new xu(u,i,T),p=E_(a,e,i?l:l+h,d);-1===p?(em(Ud(c,s),o,a),I_(o,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(f),s.push(f)):(t[p]=f,s[p]=f)}else{const f=E_(a,e,l+h,d),p=E_(a,e,l,l+h),m=f>=0&&t[f],_=p>=0&&t[p];if(i&&!_||!i&&!m){em(Ud(c,s),o,a);const I=function R3(n,e,t,r,i){const o=new xu(n,t,T);return o.multi=[],o.index=e,o.componentProviders=0,BR(o,i,r&&!t),o}(i?S3:b3,t.length,i,r,u);!i&&_&&(t[p].providerFactory=I),I_(o,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(I),s.push(I)}else I_(o,n,f>-1?f:p,BR(t[i?p:f],u,!i&&r));!i&&r&&_&&t[p].componentProviders++}}}function I_(n,e,t,r){const i=Co(e),o=function B$(n){return!!n.useClass}(e);if(i||o){const u=(o?Q(e.useClass):e).prototype.ngOnDestroy;if(u){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const l=c.indexOf(t);-1===l?c.push(t,[r,u]):c[l+1].push(r,u)}else c.push(t,u)}}}function BR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function E_(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function b3(n,e,t,r){return w_(this.multi,[])}function S3(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Io(t,t[1],this.providerFactory.index,r);o=a.slice(0,s),w_(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],w_(i,o);return o}function w_(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Ke(n,e=[]){return t=>{t.providersResolver=(r,i)=>function A3(n,e,t){const r=Ee();if(r.firstCreatePass){const i=ar(n);v_(t,r.data,r.blueprint,i,!0),v_(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class ea{}class jR{}class $R extends ea{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new iS(this);const r=Rn(e);this._bootstrapComponents=ii(r.bootstrap),this._r3Injector=V0(e,t,[{provide:ea,useValue:this},{provide:zu,useValue:this.componentFactoryResolver}],Oe(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class T_ extends jR{constructor(e){super(),this.moduleType=e}create(e){return new $R(this.moduleType,e)}}class x3 extends ea{constructor(e,t,r){super(),this.componentFactoryResolver=new iS(this),this.instance=null;const i=new I0([...e,{provide:ea,useValue:this},{provide:zu,useValue:this.componentFactoryResolver}],t||eh(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function _h(n,e,t=null){return new x3(n,e,t).injector}let M3=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=m0(0,t.type),i=r.length>0?_h([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(H(ni))}),n})();function GR(n){n.getStandaloneInjector=e=>e.get(M3).getOrCreateStandaloneInjector(n)}function XR(n,e,t,r,i,o){const s=e+t;return Qt(n,s,i)?Ar(n,s+1,o?r.call(o,i):r(i)):function sc(n,e){const t=n[e];return t===oe?void 0:t}(n,s+1)}function D_(n){return e=>{setTimeout(n,void 0,e)}}const Ce=class eq extends Wr{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=D_(o),i&&(i=D_(i)),s&&(s=D_(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof $n&&e.add(a),a}};let ai=(()=>{class n{}return n.__NG_ELEMENT_ID__=iq,n})();const nq=ai,rq=class extends nq{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}createEmbeddedView(e,t){const r=this._declarationTContainer.tViews,i=nh(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,t||null);i[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(i[19]=s.createEmbeddedView(r)),Wm(r,i,e),new Qu(i)}};function iq(){return function yh(n,e){return 4&n.type?new rq(e,n,Fs(n,e)):null}(Ft(),C())}let hr=(()=>{class n{}return n.__NG_ELEMENT_ID__=oq,n})();function oq(){return function aP(n,e){let t;const r=e[n.index];if(sr(r))t=r;else{let i;if(8&n.type)i=Vt(r);else{const o=e[11];i=o.createComment("");const s=Mn(n,e);wo(o,zd(o,s),i,function a$(n,e){return n.nextSibling(e)}(o,s),!1)}e[n.index]=t=Z0(r,e,i,n),ih(e,t)}return new oP(t,n,e)}(Ft(),C())}const sq=hr,oP=class extends sq{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Fs(this._hostTNode,this._hostLView)}get injector(){return new Ss(this._hostTNode,this._hostLView)}get parentInjector(){const e=Zg(this._hostTNode,this._hostLView);if(rb(e)){const t=Fd(e,this._hostLView),r=Vd(e);return new Ss(t[1].data[r+8],t)}return new Ss(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=sP(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=e.createEmbeddedView(t||{},o);return this.insert(s,i),s}createComponent(e,t,r,i,o){const s=e&&!function ku(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const d=t||{};a=d.index,r=d.injector,i=d.projectableNodes,o=d.environmentInjector||d.ngModuleRef}const u=s?e:new Yu(be(e)),c=r||this.parentInjector;if(!o&&null==u.ngModule){const h=(s?c:this.parentInjector).get(ni,null);h&&(o=h)}const l=u.create(c,i,void 0,o);return this.insert(l.hostView,a),l}insert(e,t){const r=e._lView,i=r[1];if(function VB(n){return sr(n[3])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const d=r[3],h=new oP(d,d[6],d[3]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(t),s=this._lContainer;!function n$(n,e,t,r){const i=10+r,o=t.length;r>0&&(t[i-1][4]=e),r<o-10?(e[4]=t[i],gb(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const s=e[17];null!==s&&t!==s&&function r$(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(i,r,s,o);const a=wm(o,s),u=r[11],c=zd(u,s[7]);return null!==c&&function Zj(n,e,t,r,i,o){r[0]=i,r[6]=e,$u(n,r,t,1,i,o)}(i,s[6],u,r,c,a),e.attachToViewContainerRef(),gb(b_(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=sP(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=vm(this._lContainer,t);r&&($d(b_(this._lContainer),t),Ub(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=vm(this._lContainer,t);return r&&null!=$d(b_(this._lContainer),t)?new Qu(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function sP(n){return n[8]}function b_(n){return n[8]||(n[8]=[])}function Ih(...n){}const Eh=new $("Application Initializer");let wh=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Ih,this.reject=Ih,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const o=this.appInits[i]();if(Zu(o))t.push(o);else if(l_(o)){const s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(H(Eh,8))},n.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cc=new $("AppId",{providedIn:"root",factory:function kP(){return`${F_()}${F_()}${F_()}`}});function F_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const OP=new $("Platform Initializer"),VP=new $("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),FP=new $("appBootstrapListener");let kq=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const ui=new $("LocaleId",{providedIn:"root",factory:()=>Ie(ui,Y.Optional|Y.SkipSelf)||function Oq(){return typeof $localize<"u"&&$localize.locale||Zs}()});class Fq{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let LP=(()=>{class n{compileModuleSync(t){return new T_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=ii(Rn(t).declarations).reduce((s,a)=>{const u=be(a);return u&&s.push(new Yu(u)),s},[]);return new Fq(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Bq=(()=>Promise.resolve(0))();function L_(n){typeof Zone>"u"?Bq.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class mt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ce(!1),this.onMicrotaskEmpty=new Ce(!1),this.onStable=new Ce(!1),this.onError=new Ce(!1),typeof Zone>"u")throw new S(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function jq(){let n=Ue.requestAnimationFrame,e=Ue.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function Hq(n){const e=()=>{!function Gq(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ue,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,B_(n),n.isCheckStableRunning=!0,U_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),B_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{try{return jP(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),$P(n)}},onInvoke:(t,r,i,o,s,a,u)=>{try{return jP(n),t.invoke(i,o,s,a,u)}finally{n.shouldCoalesceRunChangeDetection&&e(),$P(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,B_(n),U_(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mt.isInAngularZone())throw new S(909,!1)}static assertNotInAngularZone(){if(mt.isInAngularZone())throw new S(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,$q,Ih,Ih);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const $q={};function U_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function B_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function jP(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function $P(n){n._nesting--,U_(n)}class qq{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ce,this.onMicrotaskEmpty=new Ce,this.onStable=new Ce,this.onError=new Ce}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const GP=new $(""),Th=new $("");let G_,j_=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,G_||(function zq(n){G_=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{mt.assertNotInAngularZone(),L_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())L_(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(H(mt),H($_),H(Th))},n.\u0275prov=q({token:n,factory:n.\u0275fac}),n})(),$_=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return G_?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Oi=null;const HP=new $("AllowMultipleToken"),H_=new $("PlatformDestroyListeners");class qP{constructor(e,t){this.name=e,this.token=t}}function WP(n,e,t=[]){const r=`Platform: ${e}`,i=new $(r);return(o=[])=>{let s=q_();if(!s||s.injector.get(HP,!1)){const a=[...t,...o,{provide:i,useValue:!0}];n?n(a):function Qq(n){if(Oi&&!Oi.get(HP,!1))throw new S(400,!1);Oi=n;const e=n.get(QP);(function zP(n){const e=n.get(OP,null);e&&e.forEach(t=>t())})(n)}(function KP(n=[],e){return cr.create({name:e,providers:[{provide:Om,useValue:"platform"},{provide:H_,useValue:new Set([()=>Oi=null])},...n]})}(a,r))}return function Jq(n){const e=q_();if(!e)throw new S(401,!1);return e}()}}function q_(){return Oi?.get(QP)??null}let QP=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function JP(n,e){let t;return t="noop"===n?new qq:("zone.js"===n?void 0:n)||new mt(e),t}(r?.ngZone,function YP(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),o=[{provide:mt,useValue:i}];return i.run(()=>{const s=cr.create({providers:o,parent:this.injector,name:t.moduleType.name}),a=t.create(s),u=a.injector.get(Ls,null);if(!u)throw new S(402,!1);return i.runOutsideAngular(()=>{const c=i.onError.subscribe({next:l=>{u.handleError(l)}});a.onDestroy(()=>{Dh(this._modules,a),c.unsubscribe()})}),function XP(n,e,t){try{const r=t();return Zu(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(u,i,()=>{const c=a.injector.get(wh);return c.runInitializers(),c.donePromise.then(()=>(function mR(n){Gn(n,"Expected localeId to be defined"),"string"==typeof n&&(gR=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(ui,Zs)||Zs),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,r=[]){const i=ZP({},r);return function Wq(n,e,t){const r=new T_(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(Ch);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new S(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new S(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(H_,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(H(cr))},n.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function ZP(n,e){return Array.isArray(e)?e.reduce(ZP,n):{...n,...e}}let Ch=(()=>{class n{constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new ft(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),s=new ft(a=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{mt.assertNotInAngularZone(),L_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{mt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{u.unsubscribe(),c.unsubscribe()}});this.isStable=function nB(...n){const e=Eu(n),t=function QU(n,e){return"number"==typeof Cg(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?nr(r[0]):ys(t)(pt(r,e)):Qr}(o,s.pipe(function rB(n={}){const{connector:e=(()=>new Wr),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,c=0,l=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=u=void 0,l=d=!1},p=()=>{const m=s;f(),m?.unsubscribe()};return St((m,_)=>{c++,!d&&!l&&h();const I=u=u??e();_.add(()=>{c--,0===c&&!d&&!l&&(a=Dg(p,i))}),I.subscribe(_),!s&&c>0&&(s=new Iu({next:w=>I.next(w),error:w=>{d=!0,h(),a=Dg(f,t,w),I.error(w)},complete:()=>{l=!0,h(),a=Dg(f,r),I.complete()}}),nr(m).subscribe(s))})(o)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof w0;if(!this._injector.get(wh).done)throw!i&&function Is(n){const e=be(n)||qt(n)||on(n);return null!==e&&e.standalone}(t),new S(405,false);let s;s=i?t:this._injector.get(zu).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function Kq(n){return n.isBoundToModule}(s)?void 0:this._injector.get(ea),c=s.create(cr.NULL,[],r||s.selector,a),l=c.location.nativeElement,d=c.injector.get(GP,null);return d?.registerApplication(l),c.onDestroy(()=>{this.detachView(c.hostView),Dh(this.components,c),d?.unregisterApplication(l)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new S(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;Dh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(FP,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Dh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new S(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(H(mt),H(ni),H(Ls))},n.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Dh(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let Ah=(()=>{class n{}return n.__NG_ELEMENT_ID__=Zq,n})();function Zq(n){return function ez(n,e,t){if(Ru(n)&&!t){const r=Nn(n.index,e);return new Qu(r,r)}return 47&n.type?new Qu(e[16],e):null}(Ft(),C(),16==(16&n))}class ix{constructor(){}supports(e){return Ju(e)}create(e){return new sz(e)}}const oz=(n,e)=>e;class sz{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||oz}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const s=!r||t&&t.currentIndex<sx(r,i,o)?t:r,a=sx(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{o||(o=[]);const c=a-i,l=u-i;if(c!=l){for(let h=0;h<c;h++){const f=h<o.length?o[h]:o[h]=0,p=f+h;l<=p&&p<c&&(o[h]=f+1)}o[s.previousIndex]=l-c}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ju(e))throw new S(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),r=!0),t=t._next}else i=0,function N4(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Do()]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new az(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new ox),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ox),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class az{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class uz{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class ox{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new uz,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function sx(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}class ax{constructor(){}supports(e){return e instanceof Map||s_(e)}create(){return new cz}}class cz{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||s_(e)))throw new S(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const o=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,o)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const i=this._records.get(e);this._maybeAddToChanges(i,t);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new lz(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}}class lz{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ux(){return new Rh([new ix])}let Rh=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||ux()),deps:[[n,new Fu,new Vu]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new S(901,!1)}}return n.\u0275prov=q({token:n,providedIn:"root",factory:ux}),n})();function cx(){return new lc([new ax])}let lc=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||cx()),deps:[[n,new Fu,new Vu]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new S(901,!1)}}return n.\u0275prov=q({token:n,providedIn:"root",factory:cx}),n})();const fz=WP(null,"core",[]);let pz=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(H(Ch))},n.\u0275mod=Er({type:n}),n.\u0275inj=rr({}),n})(),Y_=null;function Pr(){return Y_}class _z{}const En=new $("DocumentToken");let J_=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=q({token:n,factory:function(){return function yz(){return H(lx)}()},providedIn:"platform"}),n})();const vz=new $("Location Initialized");let lx=(()=>{class n extends J_{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pr().getBaseHref(this._doc)}onPopState(t){const r=Pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){dx()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){dx()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(H(En))},n.\u0275prov=q({token:n,factory:function(){return function Iz(){return new lx(H(En))}()},providedIn:"platform"}),n})();function dx(){return!!window.history.pushState}function X_(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function hx(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function li(n){return n&&"?"!==n[0]?"?"+n:n}let Po=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=q({token:n,factory:function(){return Ie(px)},providedIn:"root"}),n})();const fx=new $("appBaseHref");let px=(()=>{class n extends Po{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Ie(En).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return X_(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+li(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+li(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+li(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(H(J_),H(fx,8))},n.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ez=(()=>{class n extends Po{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=X_(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+li(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+li(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(H(J_),H(fx,8))},n.\u0275prov=q({token:n,factory:n.\u0275fac}),n})(),Z_=(()=>{class n{constructor(t){this._subject=new Ce,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Cz(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(hx(gx(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+li(r))}normalize(t){return n.stripTrailingSlash(function Tz(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._basePath,gx(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+li(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+li(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=li,n.joinWithSlash=X_,n.stripTrailingSlash=hx,n.\u0275fac=function(t){return new(t||n)(H(Po))},n.\u0275prov=q({token:n,factory:function(){return function wz(){return new Z_(H(Po))}()},providedIn:"root"}),n})();function gx(n){return n.replace(/\/index.html$/,"")}let Cx=(()=>{class n{constructor(t,r,i,o){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Ju(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Oe(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(T(Rh),T(lc),T(On),T(ri))},n.\u0275dir=Z({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class c9{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Uh=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new c9(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),bx(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{bx(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(T(hr),T(ai),T(Rh))},n.\u0275dir=Z({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function bx(n,e){n.context.$implicit=e.item}let xo=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new d9,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Sx("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Sx("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(T(hr),T(ai))},n.\u0275dir=Z({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class d9{constructor(){this.$implicit=null,this.ngIf=null}}function Sx(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Oe(e)}'.`)}class _9{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class y9{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const v9=new y9,I9=new _9;let Px=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Zu(t))return v9;if(IS(t))return I9;throw function gr(n,e){return new S(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(T(Ah,16))},n.\u0275pipe=_n({name:"async",type:n,pure:!1,standalone:!0}),n})(),U9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Er({type:n}),n.\u0275inj=rr({}),n})();let G9=(()=>{class n{}return n.\u0275prov=q({token:n,providedIn:"root",factory:()=>new H9(H(En),window)}),n})();class H9{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function q9(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Nx(this.window.history)||Nx(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Nx(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class v6 extends _z{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class gy extends v6{static makeCurrent(){!function mz(n){Y_||(Y_=n)}(new gy)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function I6(){return pc=pc||document.querySelector("base"),pc?pc.getAttribute("href"):null}();return null==t?null:function E6(n){jh=jh||document.createElement("a"),jh.setAttribute("href",n);const e=jh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){pc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function a9(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let jh,pc=null;const Ux=new $("TRANSITION_ID"),T6=[{provide:Eh,useFactory:function w6(n,e,t){return()=>{t.get(wh).donePromise.then(()=>{const r=Pr(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[Ux,En,cr],multi:!0}];let D6=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=q({token:n,factory:n.\u0275fac}),n})();const $h=new $("EventManagerPlugins");let Gh=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const s=i[o];if(s.supports(t))return this._eventNameToPlugin.set(t,s),s}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(H($h),H(mt))},n.\u0275prov=q({token:n,factory:n.\u0275fac}),n})();class Bx{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Pr().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let jx=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=q({token:n,factory:n.\u0275fac}),n})(),gc=(()=>{class n extends jx{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,i.push(r.appendChild(s))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach($x),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach($x))}}return n.\u0275fac=function(t){return new(t||n)(H(En))},n.\u0275prov=q({token:n,factory:n.\u0275fac}),n})();function $x(n){Pr().remove(n)}const my={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_y=/%COMP%/g;function yy(n,e){return e.flat(100).map(t=>t.replace(_y,n))}function qx(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let vy=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Iy(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case Ir.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new x6(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case Ir.ShadowDom:return new M6(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=yy(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(H(Gh),H(gc),H(cc))},n.\u0275prov=q({token:n,factory:n.\u0275fac}),n})();class Iy{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(my[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Wx(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Wx(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=my[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=my[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(yn.DashCase|yn.Important)?e.style.setProperty(t,r,i&yn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&yn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,qx(r)):this.eventManager.addEventListener(e,t,qx(r))}}function Wx(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class x6 extends Iy{constructor(e,t,r,i){super(e),this.component=r;const o=yy(i+"-"+r.id,r.styles);t.addStyles(o),this.contentAttr=function S6(n){return"_ngcontent-%COMP%".replace(_y,n)}(i+"-"+r.id),this.hostAttr=function R6(n){return"_nghost-%COMP%".replace(_y,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class M6 extends Iy{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=yy(i.id,i.styles);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let N6=(()=>{class n extends Bx{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(H(En))},n.\u0275prov=q({token:n,factory:n.\u0275fac}),n})();const Kx=["alt","control","meta","shift"],k6={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},O6={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let V6=(()=>{class n extends Bx{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pr().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Kx.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),s+=c+".")}),s+=o,0!=r.length||0===o.length)return null;const u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=k6[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Kx.forEach(s=>{s!==i&&(0,O6[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(H(En))},n.\u0275prov=q({token:n,factory:n.\u0275fac}),n})();const Yx=[{provide:VP,useValue:"browser"},{provide:OP,useValue:function F6(){gy.makeCurrent()},multi:!0},{provide:En,useFactory:function U6(){return function g$(n){Am=n}(document),document},deps:[]}],B6=WP(fz,"browser",Yx),Jx=new $(""),Xx=[{provide:Th,useClass:class C6{addToWindow(e){Ue.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},Ue.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ue.getAllAngularRootElements=()=>e.getAllRootElements(),Ue.frameworkStabilizers||(Ue.frameworkStabilizers=[]),Ue.frameworkStabilizers.push(r=>{const i=Ue.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(u){s=s||u,o--,0==o&&r(s)};i.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Pr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:GP,useClass:j_,deps:[mt,$_,Th]},{provide:j_,useClass:j_,deps:[mt,$_,Th]}],Zx=[{provide:Om,useValue:"root"},{provide:Ls,useFactory:function L6(){return new Ls},deps:[]},{provide:$h,useClass:N6,multi:!0,deps:[En,mt,VP]},{provide:$h,useClass:V6,multi:!0,deps:[En]},{provide:vy,useClass:vy,deps:[Gh,gc,cc]},{provide:C0,useExisting:vy},{provide:jx,useExisting:gc},{provide:gc,useClass:gc,deps:[En]},{provide:Gh,useClass:Gh,deps:[$h,mt]},{provide:class z9{},useClass:D6,deps:[]},[]];let j6=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:cc,useValue:t.appId},{provide:Ux,useExisting:cc},T6]}}}return n.\u0275fac=function(t){return new(t||n)(H(Jx,12))},n.\u0275mod=Er({type:n}),n.\u0275inj=rr({providers:[...Zx,...Xx],imports:[U9,pz]}),n})(),eM=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(H(En))},n.\u0275prov=q({token:n,factory:function(t){let r=null;return r=t?new t:function G6(){return new eM(H(En))}(),r},providedIn:"root"}),n})();function K(...n){return pt(n,Eu(n))}typeof window<"u"&&window;class Yn extends Wr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Hh=yu(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:J6}=Array,{getPrototypeOf:X6,prototype:Z6,keys:e5}=Object;function rM(n){if(1===n.length){const e=n[0];if(J6(e))return{args:e,keys:null};if(function t5(n){return n&&"object"==typeof n&&X6(n)===Z6}(e)){const t=e5(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:n5}=Array;function iM(n){return ge(e=>function r5(n,e){return n5(e)?n(...e):n(e)}(n,e))}function oM(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function sM(...n){const e=Eu(n),t=pA(n),{args:r,keys:i}=rM(n);if(0===r.length)return pt([],e);const o=new ft(function i5(n,e,t=go){return r=>{aM(e,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let u=0;u<i;u++)aM(e,()=>{const c=pt(n[u],e);let l=!1;c.subscribe(Et(r,d=>{o[u]=d,l||(l=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>oM(i,s):go));return t?o.pipe(iM(t)):o}function aM(n,e,t){n?Kr(t,n,e):e()}function Ty(...n){return function o5(){return ys(1)}()(pt(n,Eu(n)))}function uM(n){return new ft(e=>{nr(n()).subscribe(e)})}function mc(n,e){const t=Fe(n)?n:()=>n,r=i=>i.error(t());return new ft(e?i=>e.schedule(r,0,i):r)}function Cy(){return St((n,e)=>{let t=null;n._refCount++;const r=Et(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class cM extends ft{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,eA(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $n;const t=this.getSubject();e.add(this.source.subscribe(Et(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$n.EMPTY)}return e}refCount(){return Cy()(this)}}function xr(n,e){return St((t,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();t.subscribe(Et(r,u=>{i?.unsubscribe();let c=0;const l=o++;nr(n(u,l)).subscribe(i=Et(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function _c(n){return n<=0?()=>Qr:St((e,t)=>{let r=0;e.subscribe(Et(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Fi(n,e){return St((t,r)=>{let i=0;t.subscribe(Et(r,o=>n.call(e,o,i++)&&r.next(o)))})}function qh(n){return St((e,t)=>{let r=!1;e.subscribe(Et(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function lM(n=a5){return St((e,t)=>{let r=!1;e.subscribe(Et(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function a5(){return new Hh}function Li(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Fi((i,o)=>n(i,o,r)):go,_c(1),t?qh(e):lM(()=>new Hh))}function Mo(n,e){return Fe(e)?Ot(n,e,1):Ot(n,1)}function Yt(n,e,t){const r=Fe(n)||e||t?{next:n,error:e,complete:t}:n;return r?St((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Et(o,u=>{var c;null===(c=r.next)||void 0===c||c.call(r,u),o.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),o.complete()},u=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,u),o.error(u)},()=>{var u,c;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):go}function Ui(n){return St((e,t)=>{let o,r=null,i=!1;r=e.subscribe(Et(t,void 0,void 0,s=>{o=nr(n(s,Ui(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function u5(n,e,t,r,i){return(o,s)=>{let a=t,u=e,c=0;o.subscribe(Et(s,l=>{const d=c++;u=a?n(u,l,d):(a=!0,l),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function dM(n,e){return St(u5(n,e,arguments.length>=2,!0))}function Dy(n){return n<=0?()=>Qr:St((e,t)=>{let r=[];e.subscribe(Et(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function hM(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Fi((i,o)=>n(i,o,r)):go,Dy(1),t?qh(e):lM(()=>new Hh))}function Ay(n){return St((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const le="primary",yc=Symbol("RouteTitle");class d5{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ia(n){return new d5(n)}function h5(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Mr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!fM(n[i],e[i]))return!1;return!0}function fM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function pM(n){return Array.prototype.concat.apply([],n)}function gM(n){return n.length>0?n[n.length-1]:null}function Ut(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Bi(n){return l_(n)?n:Zu(n)?pt(Promise.resolve(n)):K(n)}const zh=!1,p5={exact:function yM(n,e,t){if(!ko(n.segments,e.segments)||!Wh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!yM(n.children[r],e.children[r],t))return!1;return!0},subset:vM},mM={exact:function g5(n,e){return Mr(n,e)},subset:function m5(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>fM(n[t],e[t]))},ignored:()=>!0};function _M(n,e,t){return p5[t.paths](n.root,e.root,t.matrixParams)&&mM[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function vM(n,e,t){return IM(n,e,e.segments,t)}function IM(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ko(i,t)||e.hasChildren()||!Wh(i,t,r))}if(n.segments.length===t.length){if(!ko(n.segments,t)||!Wh(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!vM(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(ko(n.segments,i)&&Wh(n.segments,i,r)&&n.children[le])&&IM(n.children[le],e,o,r)}}function Wh(n,e,t){return e.every((r,i)=>mM[t](n[i].parameters,r.parameters))}class No{constructor(e=new de([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ia(this.queryParams)),this._queryParamMap}toString(){return v5.serialize(this)}}class de{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ut(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kh(this)}}class vc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ia(this.parameters)),this._parameterMap}toString(){return TM(this)}}function ko(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Ic=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=q({token:n,factory:function(){return new by},providedIn:"root"}),n})();class by{parse(e){const t=new S5(e);return new No(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ec(e.root,!0)}`,r=function w5(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Qh(t)}=${Qh(i)}`).join("&"):`${Qh(t)}=${Qh(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function I5(n){return encodeURI(n)}(e.fragment)}`:""}`}}const v5=new by;function Kh(n){return n.segments.map(e=>TM(e)).join("/")}function Ec(n,e){if(!n.hasChildren())return Kh(n);if(e){const t=n.children[le]?Ec(n.children[le],!1):"",r=[];return Ut(n.children,(i,o)=>{o!==le&&r.push(`${o}:${Ec(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function y5(n,e){let t=[];return Ut(n.children,(r,i)=>{i===le&&(t=t.concat(e(r,i)))}),Ut(n.children,(r,i)=>{i!==le&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===le?[Ec(n.children[le],!1)]:[`${i}:${Ec(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[le]?`${Kh(n)}/${t[0]}`:`${Kh(n)}/(${t.join("//")})`}}function EM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qh(n){return EM(n).replace(/%3B/gi,";")}function Sy(n){return EM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yh(n){return decodeURIComponent(n)}function wM(n){return Yh(n.replace(/\+/g,"%20"))}function TM(n){return`${Sy(n.path)}${function E5(n){return Object.keys(n).map(e=>`;${Sy(e)}=${Sy(n[e])}`).join("")}(n.parameters)}`}const T5=/^[^\/()?;=#]+/;function Jh(n){const e=n.match(T5);return e?e[0]:""}const C5=/^[^=?&#]+/,A5=/^[^&#]+/;class S5{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new de([],{}):new de([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[le]=new de(e,t)),r}parseSegment(){const e=Jh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new S(4009,zh);return this.capture(e),new vc(Yh(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Jh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Jh(this.remaining);i&&(r=i,this.capture(r))}e[Yh(t)]=Yh(r)}parseQueryParam(e){const t=function D5(n){const e=n.match(C5);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function b5(n){const e=n.match(A5);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=wM(t),o=wM(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Jh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new S(4010,zh);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=le);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[le]:new de([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new S(4011,zh)}}function Ry(n){return n.segments.length>0?new de([],{[le]:n}):n}function Xh(n){const e={};for(const r of Object.keys(n.children)){const o=Xh(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function R5(n){if(1===n.numberOfChildren&&n.children[le]){const e=n.children[le];return new de(n.segments.concat(e.segments),e.children)}return n}(new de(n.segments,e))}function Oo(n){return n instanceof No}function M5(n,e,t,r,i){if(0===t.length)return oa(e.root,e.root,e.root,r,i);const o=function AM(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new DM(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Ut(o.outlets,(u,c)=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new DM(t,e,r)}(t);return o.toRoot()?oa(e.root,e.root,new de([],{}),r,i):function s(u){const c=function k5(n,e,t,r){if(n.isAbsolute)return new sa(e.root,!0,0);if(-1===r)return new sa(t,t===e.root,0);return function bM(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new S(4005,!1);i=r.segments.length}return new sa(r,!1,i-o)}(t,r+(wc(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,u),l=c.processChildren?Cc(c.segmentGroup,c.index,o.commands):xy(c.segmentGroup,c.index,o.commands);return oa(e.root,c.segmentGroup,l,r,i)}(n.snapshot?._lastPathIndex)}function wc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Tc(n){return"object"==typeof n&&null!=n&&n.outlets}function oa(n,e,t,r,i){let s,o={};r&&Ut(r,(u,c)=>{o[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`}),s=n===e?t:CM(n,e,t);const a=Ry(Xh(s));return new No(a,o,i)}function CM(n,e,t){const r={};return Ut(n.children,(i,o)=>{r[o]=i===e?t:CM(i,e,t)}),new de(n.segments,r)}class DM{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&wc(r[0]))throw new S(4003,!1);const i=r.find(Tc);if(i&&i!==gM(r))throw new S(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sa{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function xy(n,e,t){if(n||(n=new de([],{})),0===n.segments.length&&n.hasChildren())return Cc(n,e,t);const r=function V5(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const s=n.segments[i],a=t[r];if(Tc(a))break;const u=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!RM(u,c,s))return o;r+=2}else{if(!RM(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new de(n.segments.slice(0,r.pathIndex),{});return o.children[le]=new de(n.segments.slice(r.pathIndex),n.children),Cc(o,0,i)}return r.match&&0===i.length?new de(n.segments,{}):r.match&&!n.hasChildren()?My(n,e,t):r.match?Cc(n,0,i):My(n,e,t)}function Cc(n,e,t){if(0===t.length)return new de(n.segments,{});{const r=function O5(n){return Tc(n[0])?n[0].outlets:{[le]:n}}(t),i={};return Ut(r,(o,s)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=xy(n.children[s],e,o))}),Ut(n.children,(o,s)=>{void 0===r[s]&&(i[s]=o)}),new de(n.segments,i)}}function My(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(Tc(o)){const u=F5(o.outlets);return new de(r,u)}if(0===i&&wc(t[0])){r.push(new vc(n.segments[e].path,SM(t[0]))),i++;continue}const s=Tc(o)?o.outlets[le]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&wc(a)?(r.push(new vc(s,SM(a))),i+=2):(r.push(new vc(s,{})),i++)}return new de(r,{})}function F5(n){const e={};return Ut(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=My(new de([],{}),0,t))}),e}function SM(n){const e={};return Ut(n,(t,r)=>e[r]=`${t}`),e}function RM(n,e,t){return n==t.path&&Mr(e,t.parameters)}class hi{constructor(e,t){this.id=e,this.url=t}}class Ny extends hi{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Vo extends hi{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Zh extends hi{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class PM extends hi{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class L5 extends hi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class U5 extends hi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class B5 extends hi{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class j5 extends hi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $5 extends hi{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class G5{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class H5{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class q5{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class z5{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class W5{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class K5{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xM{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Y5=(()=>{class n{createUrlTree(t,r,i,o,s,a){return M5(t||r.root,i,o,s,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=q({token:n,factory:n.\u0275fac}),n})(),J5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=q({token:n,factory:function(e){return Y5.\u0275fac(e)},providedIn:"root"}),n})();class MM{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ky(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ky(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Oy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Oy(e,this._root).map(t=>t.value)}}function ky(n,e){if(n===e.value)return e;for(const t of e.children){const r=ky(n,t);if(r)return r}return null}function Oy(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Oy(n,t);if(r.length)return r.unshift(e),r}return[]}class fi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function aa(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class NM extends MM{constructor(e,t){super(e),this.snapshot=t,Vy(this,e)}toString(){return this.snapshot.toString()}}function kM(n,e){const t=function X5(n,e){const s=new ef([],{},{},"",{},le,e,null,n.root,-1,{});return new VM("",new fi(s,[]))}(n,e),r=new Yn([new vc("",{})]),i=new Yn({}),o=new Yn({}),s=new Yn({}),a=new Yn(""),u=new ua(r,i,s,a,o,le,e,t.root);return u.snapshot=t.root,new NM(new fi(u,[]),t)}class ua{constructor(e,t,r,i,o,s,a,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.title=this.data?.pipe(ge(c=>c[yc]))??K(void 0),this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ge(e=>ia(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ge(e=>ia(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function OM(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function Z5(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ef{constructor(e,t,r,i,o,s,a,u,c,l,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=d}get title(){return this.data?.[yc]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ia(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ia(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class VM extends MM{constructor(e,t){super(t),this.url=e,Vy(this,t)}toString(){return FM(this._root)}}function Vy(n,e){e.value._routerState=n,e.children.forEach(t=>Vy(n,t))}function FM(n){const e=n.children.length>0?` { ${n.children.map(FM).join(", ")} } `:"";return`${n.value}${e}`}function Fy(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Mr(e.params,t.params)||n.params.next(t.params),function f5(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Mr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ly(n,e){const t=Mr(n.params,e.params)&&function _5(n,e){return ko(n,e)&&n.every((t,r)=>Mr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ly(n.parent,e.parent))}function Dc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function t8(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Dc(n,r,i);return Dc(n,r)})}(n,e,t);return new fi(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Dc(n,a)),s}}const r=function n8(n){return new ua(new Yn(n.url),new Yn(n.params),new Yn(n.queryParams),new Yn(n.fragment),new Yn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>Dc(n,o));return new fi(r,i)}}const Uy="ngNavigationCancelingError";function LM(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Oo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=UM(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function UM(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Uy]=!0,r.cancellationCode=e,t&&(r.url=t),r}function BM(n){return jM(n)&&Oo(n.url)}function jM(n){return n&&n[Uy]}class r8{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ac,this.attachRef=null}}let Ac=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new r8,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tf=!1;let By=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=le,this.activateEvents=new Ce,this.deactivateEvents=new Ce,this.attachEvents=new Ce,this.detachEvents=new Ce,this.parentContexts=Ie(Ac),this.location=Ie(hr),this.changeDetector=Ie(Ah),this.environmentInjector=Ie(ni)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new S(4012,tf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new S(4012,tf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new S(4012,tf);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new S(4013,tf);this._activatedRoute=t;const i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new i8(t,a,i.injector);if(r&&function o8(n){return!!n.resolveComponentFactory}(r)){const c=r.resolveComponentFactory(s);this.activated=i.createComponent(c,i.length,u)}else this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Z({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[xn]}),n})();class i8{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ua?this.route:e===Ac?this.childContexts:this.parent.get(e,t)}}let jy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=mn({type:n,selectors:[["ng-component"]],standalone:!0,features:[GR],decls:1,vars:0,template:function(t,r){1&t&&si(0,"router-outlet")},dependencies:[By],encapsulation:2}),n})();function $M(n,e){return n.providers&&!n._injector&&(n._injector=_h(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Gy(n){const e=n.children&&n.children.map(Gy),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==le&&(t.component=jy),t}function Jn(n){return n.outlet||le}function GM(n,e){const t=n.filter(r=>Jn(r)===e);return t.push(...n.filter(r=>Jn(r)!==e)),t}function bc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class l8{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Fy(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=aa(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Ut(i,(o,s)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=aa(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=aa(e);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=aa(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new K5(o.value.snapshot))}),e.children.length&&this.forwardEvent(new z5(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(Fy(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Fy(a.route.value),this.activateChildRoutes(e,null,s.children)}else{const a=bc(i.snapshot),u=a?.get(zu)??null;s.attachRef=null,s.route=i,s.resolver=u,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}class HM{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class nf{constructor(e,t){this.component=e,this.route=t}}function d8(n,e,t){const r=n._root;return Sc(r,e?e._root:null,t,[r.value])}function ca(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function lB(n){return null!==Ed(n)}(n)?e.get(n):n:r}function Sc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=aa(e);return n.children.forEach(s=>{(function f8(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function p8(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ko(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ko(n.url,e.url)||!Mr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ly(n,e)||!Mr(n.queryParams,e.queryParams);default:return!Ly(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new HM(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Sc(n,e,o.component?a?a.children:null:t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new nf(a.outlet.component,s))}else s&&Rc(e,a,i),i.canActivateChecks.push(new HM(r)),Sc(n,null,o.component?a?a.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Ut(o,(s,a)=>Rc(s,t.getContext(a),i)),i}function Rc(n,e,t){const r=aa(n),i=n.value;Ut(r,(o,s)=>{Rc(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new nf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Pc(n){return"function"==typeof n}function Hy(n){return n instanceof Hh||"EmptyError"===n?.name}const rf=Symbol("INITIAL_VALUE");function la(){return xr(n=>sM(n.map(e=>e.pipe(_c(1),function s5(...n){const e=Eu(n);return St((t,r)=>{(e?Ty(n,t,e):Ty(n,t)).subscribe(r)})}(rf)))).pipe(ge(e=>{for(const t of e)if(!0!==t){if(t===rf)return rf;if(!1===t||t instanceof No)return t}return!0}),Fi(e=>e!==rf),_c(1)))}function qM(n){return function RU(...n){return JD(n)}(Yt(e=>{if(Oo(e))throw LM(0,e)}),ge(e=>!0===e))}const qy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zM(n,e,t,r,i){const o=zy(n,e,t);return o.matched?function x8(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?K(i.map(s=>{const a=ca(s,n);return Bi(function I8(n){return n&&Pc(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(la(),qM()):K(!0)}(r=$M(e,r),e,t).pipe(ge(s=>!0===s?o:{...qy})):K(o)}function zy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...qy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||h5)(t,n,e);if(!i)return{...qy};const o={};Ut(i.posParams,(a,u)=>{o[u]=a.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function sf(n,e,t,r){if(t.length>0&&function k8(n,e,t){return t.some(r=>af(n,e,r)&&Jn(r)!==le)}(n,t,r)){const o=new de(e,function N8(n,e,t,r){const i={};i[le]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&Jn(o)!==le){const s=new de([],{});s._sourceSegment=n,s._segmentIndexShift=e.length,i[Jn(o)]=s}return i}(n,e,r,new de(t,n.children)));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function O8(n,e,t){return t.some(r=>af(n,e,r))}(n,t,r)){const o=new de(n.segments,function M8(n,e,t,r,i){const o={};for(const s of r)if(af(n,t,s)&&!i[Jn(s)]){const a=new de([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,o[Jn(s)]=a}return{...i,...o}}(n,e,t,r,n.children));return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const i=new de(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function af(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function WM(n,e,t,r){return!!(Jn(n)===r||r!==le&&af(e,t,n))&&("**"===n.path||zy(e,n,t).matched)}function KM(n,e,t){return 0===e.length&&!n.children[t]}const uf=!1;class cf{constructor(e){this.segmentGroup=e||null}}class QM{constructor(e){this.urlTree=e}}function xc(n){return mc(new cf(n))}function YM(n){return mc(new QM(n))}class U8{constructor(e,t,r,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=sf(this.urlTree.root,[],[],this.config).segmentGroup,t=new de(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,le).pipe(ge(o=>this.createUrlTree(Xh(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ui(o=>{if(o instanceof QM)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof cf?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,le).pipe(ge(i=>this.createUrlTree(Xh(i),e.queryParams,e.fragment))).pipe(Ui(i=>{throw i instanceof cf?this.noMatchError(i):i}))}noMatchError(e){return new S(4002,uf)}createUrlTree(e,t,r){const i=Ry(e);return new No(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(ge(o=>new de([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return pt(i).pipe(Mo(o=>{const s=r.children[o],a=GM(t,o);return this.expandSegmentGroup(e,a,s,o).pipe(ge(u=>({segment:u,outlet:o})))}),dM((o,s)=>(o[s.outlet]=s.segment,o),{}),hM())}expandSegment(e,t,r,i,o,s){return pt(r).pipe(Mo(a=>this.expandSegmentAgainstRoute(e,t,r,a,i,o,s).pipe(Ui(c=>{if(c instanceof cf)return K(null);throw c}))),Li(a=>!!a),Ui((a,u)=>{if(Hy(a))return KM(t,i,o)?K(new de([],{})):xc(t);throw a}))}expandSegmentAgainstRoute(e,t,r,i,o,s,a){return WM(i,t,o,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s):xc(t):xc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?YM(o):this.lineralizeSegments(r,o).pipe(Ot(s=>{const a=new de(s,{});return this.expandSegment(e,a,t,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s){const{matched:a,consumedSegments:u,remainingSegments:c,positionalParamSegments:l}=zy(t,i,o);if(!a)return xc(t);const d=this.applyRedirectCommands(u,i.redirectTo,l);return i.redirectTo.startsWith("/")?YM(d):this.lineralizeSegments(i,d).pipe(Ot(h=>this.expandSegment(e,t,r,h.concat(c),s,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){return"**"===r.path?(e=$M(r,e),r.loadChildren?(r._loadedRoutes?K({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(ge(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new de(i,{})))):K(new de(i,{}))):zM(t,r,i,e).pipe(xr(({matched:s,consumedSegments:a,remainingSegments:u})=>s?this.getChildConfig(e=r._injector??e,r,i).pipe(Ot(l=>{const d=l.injector??e,h=l.routes,{segmentGroup:f,slicedSegments:p}=sf(t,a,u,h),m=new de(f.segments,f.children);if(0===p.length&&m.hasChildren())return this.expandChildren(d,h,m).pipe(ge(y=>new de(a,y)));if(0===h.length&&0===p.length)return K(new de(a,{}));const _=Jn(r)===o;return this.expandSegment(d,m,h,p,_?le:o,!0).pipe(ge(w=>new de(a.concat(w.segments),w.children)))})):xc(t)))}getChildConfig(e,t,r){return t.children?K({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?K({routes:t._loadedRoutes,injector:t._loadedInjector}):function P8(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?K(!0):K(i.map(s=>{const a=ca(s,n);return Bi(function m8(n){return n&&Pc(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(la(),qM())}(e,t,r).pipe(Ot(i=>i?this.configLoader.loadChildren(e,t).pipe(Yt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function F8(n){return mc(UM(uf,3))}())):K({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return K(r);if(i.numberOfChildren>1||!i.children[le])return mc(new S(4e3,uf));i=i.children[le]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new No(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ut(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[o]=t[a]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let s={};return Ut(t.children,(a,u)=>{s[u]=this.createSegmentGroup(e,a,r,i)}),new de(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new S(4001,uf);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class j8{}class H8{constructor(e,t,r,i,o,s,a){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a}recognize(){const e=sf(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,le).pipe(ge(t=>{if(null===t)return null;const r=new ef([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},le,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new fi(r,t),o=new VM(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,r=OM(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return pt(Object.keys(r.children)).pipe(Mo(i=>{const o=r.children[i],s=GM(t,i);return this.processSegmentGroup(e,s,o,i)}),dM((i,o)=>i&&o?(i.push(...o),i):null),function c5(n,e=!1){return St((t,r)=>{let i=0;t.subscribe(Et(r,o=>{const s=n(o,i++);(s||e)&&r.next(o),!s&&r.complete()}))})}(i=>null!==i),qh(null),hM(),ge(i=>{if(null===i)return null;const o=XM(i);return function q8(n){n.sort((e,t)=>e.value.outlet===le?-1:t.value.outlet===le?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,r,i,o){return pt(t).pipe(Mo(s=>this.processSegmentAgainstRoute(s._injector??e,s,r,i,o)),Li(s=>!!s),Ui(s=>{if(Hy(s))return KM(r,i,o)?K([]):K(null);throw s}))}processSegmentAgainstRoute(e,t,r,i,o){if(t.redirectTo||!WM(t,r,i,o))return K(null);let s;if("**"===t.path){const a=i.length>0?gM(i).parameters:{},u=e1(r)+i.length;s=K({snapshot:new ef(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,t1(t),Jn(t),t.component??t._loadedComponent??null,t,ZM(r),u,n1(t)),consumedSegments:[],remainingSegments:[]})}else s=zM(r,t,i,e).pipe(ge(({matched:a,consumedSegments:u,remainingSegments:c,parameters:l})=>{if(!a)return null;const d=e1(r)+u.length;return{snapshot:new ef(u,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,t1(t),Jn(t),t.component??t._loadedComponent??null,t,ZM(r),d,n1(t)),consumedSegments:u,remainingSegments:c}}));return s.pipe(xr(a=>{if(null===a)return K(null);const{snapshot:u,consumedSegments:c,remainingSegments:l}=a;e=t._injector??e;const d=t._loadedInjector??e,h=function z8(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:p}=sf(r,c,l,h.filter(_=>void 0===_.redirectTo));if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(ge(_=>null===_?null:[new fi(u,_)]));if(0===h.length&&0===p.length)return K([new fi(u,[])]);const m=Jn(t)===o;return this.processSegment(d,h,f,p,m?le:o).pipe(ge(_=>null===_?null:[new fi(u,_)]))}))}}function W8(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function XM(n){const e=[],t=new Set;for(const r of n){if(!W8(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=XM(r.children);e.push(new fi(r.value,i))}return e.filter(r=>!t.has(r))}function ZM(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function e1(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function t1(n){return n.data||{}}function n1(n){return n.resolve||{}}function r1(n){return"string"==typeof n.title||null===n.title}function Wy(n){return xr(e=>{const t=n(e);return t?pt(t).pipe(ge(()=>e)):K(e)})}const da=new $("ROUTES");let Ky=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return K(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Bi(t.loadComponent()).pipe(ge(o1),Yt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Ay(()=>{this.componentLoaders.delete(t)})),i=new cM(r,()=>new Wr).pipe(Cy());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return K({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(ge(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let u,c,l=!1;Array.isArray(a)?c=a:(u=a.create(t).injector,c=pM(u.get(da,[],Y.Self|Y.Optional)));return{routes:c.map(Gy),injector:u}}),Ay(()=>{this.childrenLoaders.delete(r)})),s=new cM(o,()=>new Wr).pipe(Cy());return this.childrenLoaders.set(r,s),s}loadModuleFactoryOrRoutes(t){return Bi(t()).pipe(ge(o1),Ot(i=>i instanceof jR||Array.isArray(i)?K(i):pt(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(H(cr),H(LP))},n.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function o1(n){return function nW(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Qy=(()=>{class n{constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Wr,this.configLoader=Ie(Ky),this.environmentInjector=Ie(ni),this.urlSerializer=Ie(Ic),this.rootContexts=Ie(Ac),this.navigationId=0,this.configLoader.onLoadEndListener=i=>this.events.next(new H5(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new G5(i))}get hasRequestedNavigation(){return 0!==this.navigationId}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Yn({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Fi(r=>0!==r.id),ge(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),xr(r=>{let i=!1,o=!1;return K(r).pipe(Yt(s=>{this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),xr(s=>{const a=t.browserUrlTree.toString(),u=!t.navigated||s.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(("reload"===t.onSameUrlNavigation||u)&&t.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return a1(s.source)&&(t.browserUrlTree=s.extractedUrl),K(s).pipe(xr(l=>{const d=this.transitions?.getValue();return this.events.next(new Ny(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),d!==this.transitions?.getValue()?Qr:Promise.resolve(l)}),function B8(n,e,t,r){return xr(i=>function L8(n,e,t,r,i){return new U8(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(ge(o=>({...i,urlAfterRedirects:o}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),Yt(l=>{this.currentNavigation={...this.currentNavigation,finalUrl:l.urlAfterRedirects},r.urlAfterRedirects=l.urlAfterRedirects}),function Q8(n,e,t,r,i){return Ot(o=>function G8(n,e,t,r,i,o,s="emptyOnly"){return new H8(n,e,t,r,i,s,o).recognize().pipe(xr(a=>null===a?function $8(n){return new ft(e=>e.error(n))}(new j8):K(a)))}(n,e,t,o.urlAfterRedirects,r.serialize(o.urlAfterRedirects),r,i).pipe(ge(s=>({...o,targetSnapshot:s}))))}(this.environmentInjector,t.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Yt(l=>{if(r.targetSnapshot=l.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!l.extras.skipLocationChange){const h=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl);t.setBrowserUrl(h,l)}t.browserUrlTree=l.urlAfterRedirects}const d=new L5(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(u&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:d,extractedUrl:h,source:f,restoredState:p,extras:m}=s,_=new Ny(d,this.urlSerializer.serialize(h),f,p);this.events.next(_);const I=kM(h,t.rootComponentType).snapshot;return K(r={...s,targetSnapshot:I,urlAfterRedirects:h,extras:{...m,skipLocationChange:!1,replaceUrl:!1}})}return t.rawUrlTree=s.rawUrl,s.resolve(null),Qr}),Yt(s=>{const a=new U5(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ge(s=>r={...s,guards:d8(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),function w8(n,e){return Ot(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?K({...t,guardsResult:!0}):function T8(n,e,t,r){return pt(n).pipe(Ot(i=>function R8(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?K(o.map(a=>{const u=bc(e)??i,c=ca(a,u);return Bi(function v8(n){return n&&Pc(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):u.runInContext(()=>c(n,e,t,r))).pipe(Li())})).pipe(la()):K(!0)}(i.component,i.route,t,e,r)),Li(i=>!0!==i,!0))}(s,r,i,n).pipe(Ot(a=>a&&function g8(n){return"boolean"==typeof n}(a)?function C8(n,e,t,r){return pt(e).pipe(Mo(i=>Ty(function A8(n,e){return null!==n&&e&&e(new q5(n)),K(!0)}(i.route.parent,r),function D8(n,e){return null!==n&&e&&e(new W5(n)),K(!0)}(i.route,r),function S8(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function h8(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>uM(()=>K(s.guards.map(u=>{const c=bc(s.node)??t,l=ca(u,c);return Bi(function y8(n){return n&&Pc(n.canActivateChild)}(l)?l.canActivateChild(r,n):c.runInContext(()=>l(r,n))).pipe(Li())})).pipe(la())));return K(o).pipe(la())}(n,i.path,t),function b8(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return K(!0);const i=r.map(o=>uM(()=>{const s=bc(e)??t,a=ca(o,s);return Bi(function _8(n){return n&&Pc(n.canActivate)}(a)?a.canActivate(e,n):s.runInContext(()=>a(e,n))).pipe(Li())}));return K(i).pipe(la())}(n,i.route,t))),Li(i=>!0!==i,!0))}(r,o,n,e):K(a)),ge(a=>({...t,guardsResult:a})))})}(this.environmentInjector,s=>this.events.next(s)),Yt(s=>{if(r.guardsResult=s.guardsResult,Oo(s.guardsResult))throw LM(0,s.guardsResult);const a=new B5(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Fi(s=>!!s.guardsResult||(t.restoreHistory(s),this.cancelNavigationTransition(s,"",3,t),!1)),Wy(s=>{if(s.guards.canActivateChecks.length)return K(s).pipe(Yt(a=>{const u=new j5(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),xr(a=>{let u=!1;return K(a).pipe(function Y8(n,e){return Ot(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return K(t);let o=0;return pt(i).pipe(Mo(s=>function J8(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!r1(i)&&(o[yc]=i.title),function X8(n,e,t,r){const i=function Z8(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return K({});const o={};return pt(i).pipe(Ot(s=>function eW(n,e,t,r){const i=bc(e)??r,o=ca(n,i);return Bi(o.resolve?o.resolve(e,t):i.runInContext(()=>o(e,t)))}(n[s],e,t,r).pipe(Li(),Yt(a=>{o[s]=a}))),Dy(1),function l5(n){return ge(()=>n)}(o),Ui(s=>Hy(s)?Qr:mc(s)))}(o,n,e,r).pipe(ge(s=>(n._resolvedData=s,n.data=OM(n,t).resolve,i&&r1(i)&&(n.data[yc]=i.title),null)))}(s.route,r,n,e)),Yt(()=>o++),Dy(1),Ot(s=>o===i.length?K(t):Qr))})}(t.paramsInheritanceStrategy,this.environmentInjector),Yt({next:()=>u=!0,complete:()=>{u||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2,t))}}))}),Yt(a=>{const u=new $5(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),Wy(s=>{const a=u=>{const c=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(u.routeConfig).pipe(Yt(l=>{u.component=l}),ge(()=>{})));for(const l of u.children)c.push(...a(l));return c};return sM(a(s.targetSnapshot.root)).pipe(qh(),_c(1))}),Wy(()=>t.afterPreactivation()),ge(s=>{const a=function e8(n,e,t){const r=Dc(n,e._root,t?t._root:void 0);return new NM(r,e)}(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return r={...s,targetRouterState:a}}),Yt(s=>{t.currentUrlTree=s.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),t.routerState=s.targetRouterState,"deferred"===t.urlUpdateStrategy&&(s.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,s),t.browserUrlTree=s.urlAfterRedirects)}),((n,e,t)=>ge(r=>(new l8(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s)),Yt({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Vo(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Ay(()=>{i||o||this.cancelNavigationTransition(r,"",1,t),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Ui(s=>{if(o=!0,jM(s)){BM(s)||(t.navigated=!0,t.restoreHistory(r,!0));const a=new Zh(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode);if(this.events.next(a),BM(s)){const u=t.urlHandlingStrategy.merge(s.url,t.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||a1(r.source)};t.scheduleNavigation(u,"imperative",null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const a=new PM(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(t.errorHandler(s))}catch(u){r.reject(u)}}return Qr}))}))}cancelNavigationTransition(t,r,i,o){const s=new Zh(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function a1(n){return"imperative"!==n}let u1=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===le);return r}getResolvedTitleForRoute(t){return t.data[yc]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=q({token:n,factory:function(){return Ie(rW)},providedIn:"root"}),n})(),rW=(()=>{class n extends u1{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(H(eM))},n.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),iW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=q({token:n,factory:function(){return Ie(sW)},providedIn:"root"}),n})();class oW{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let sW=(()=>{class n extends oW{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Lt(n)))(r||n)}}(),n.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lf=new $("",{providedIn:"root",factory:()=>({})});let uW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=q({token:n,factory:function(){return Ie(cW)},providedIn:"root"}),n})(),cW=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lW(n){throw n}function dW(n,e,t){return e.parse("/")}const hW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Jt=(()=>{class n{constructor(){this.disposed=!1,this.currentPageId=0,this.console=Ie(kq),this.isNgZoneEnabled=!1,this.options=Ie(lf,{optional:!0})||{},this.errorHandler=this.options.errorHandler||lW,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||dW,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>K(void 0),this.urlHandlingStrategy=Ie(uW),this.routeReuseStrategy=Ie(iW),this.urlCreationStrategy=Ie(J5),this.titleStrategy=Ie(u1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=pM(Ie(da,{optional:!0})??[]),this.navigationTransitions=Ie(Qy),this.urlSerializer=Ie(Ic),this.location=Ie(Z_),this.rootComponentType=null,this.isNgZoneEnabled=Ie(mt)instanceof mt&&mt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new No,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=kM(this.currentUrlTree,this.rootComponentType),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(t.state){const a={...t.state};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(i.state=a)}const s=this.parseUrl(t.url);this.scheduleNavigation(s,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Gy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,c=u?this.currentUrlTree.fragment:s;let l=null;switch(a){case"merge":l={...this.currentUrlTree.queryParams,...o};break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=o||null}return null!==l&&(l=this.removeEmptyProps(l)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,l,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Oo(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function pW(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new S(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...hW}:!1===r?{...fW}:r,Oo(t))return _M(this.currentUrlTree,t,i);const o=this.parseUrl(t);return _M(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,c,l;return s?(a=s.resolve,u=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,u=h}),"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),l=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):l=0,this.navigationTransitions.handleNavigationRequest({targetPageId:l,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class l1{}let _W=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Fi(t=>t instanceof Vo),Mo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=_h(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(s,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return pt(i).pipe(ys())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):K(null);const o=i.pipe(Ot(s=>null===s?K(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?pt([o,this.loader.loadComponent(r)]).pipe(ys()):o})}}return n.\u0275fac=function(t){return new(t||n)(H(Jt),H(LP),H(ni),H(l1),H(Ky))},n.\u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Jy=new $("");let d1=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ny?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Vo&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof xM&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new xM(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function G0(){throw new Error("invalid")}()},n.\u0275prov=q({token:n,factory:n.\u0275fac}),n})();function fa(n,e){return{\u0275kind:n,\u0275providers:e}}function f1(){const n=Ie(cr);return e=>{const t=n.get(Ch);if(e!==t.components[0])return;const r=n.get(Jt),i=n.get(p1);1===n.get(Zy)&&r.initialNavigation(),n.get(g1,null,Y.Optional)?.setUpPreloading(),n.get(Jy,null,Y.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const p1=new $("",{factory:()=>new Wr}),Zy=new $("",{providedIn:"root",factory:()=>1});const g1=new $("");function wW(n){return fa(0,[{provide:g1,useExisting:_W},{provide:l1,useExisting:n}])}const m1=new $("ROUTER_FORROOT_GUARD"),TW=[Z_,{provide:Ic,useClass:by},Jt,Ac,{provide:ua,useFactory:function h1(n){return n.routerState.root},deps:[Jt]},Ky,[]];function CW(){return new qP("Router",Jt)}let _1=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[TW,[],{provide:da,multi:!0,useValue:t},{provide:m1,useFactory:SW,deps:[[Jt,new Vu,new Fu]]},{provide:lf,useValue:r||{}},r?.useHash?{provide:Po,useClass:Ez}:{provide:Po,useClass:px},{provide:Jy,useFactory:()=>{const n=Ie(G9),e=Ie(mt),t=Ie(lf),r=Ie(Qy),i=Ie(Ic);return t.scrollOffset&&n.setOffset(t.scrollOffset),new d1(i,r,n,e,t)}},r?.preloadingStrategy?wW(r.preloadingStrategy).\u0275providers:[],{provide:qP,multi:!0,useFactory:CW},r?.initialNavigation?RW(r):[],[{provide:y1,useFactory:f1},{provide:FP,multi:!0,useExisting:y1}]]}}static forChild(t){return{ngModule:n,providers:[{provide:da,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(H(m1,8))},n.\u0275mod=Er({type:n}),n.\u0275inj=rr({imports:[jy]}),n})();function SW(n){return"guarded"}function RW(n){return["disabled"===n.initialNavigation?fa(3,[{provide:Eh,multi:!0,useFactory:()=>{const e=Ie(Jt);return()=>{e.setUpLocationChangeListener()}}},{provide:Zy,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?fa(2,[{provide:Zy,useValue:0},{provide:Eh,multi:!0,deps:[cr],useFactory:e=>{const t=e.get(vz,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const o=e.get(Jt),s=e.get(p1);(function r(i){e.get(Jt).events.pipe(Fi(s=>s instanceof Vo||s instanceof Zh||s instanceof PM),ge(s=>s instanceof Vo||s instanceof Zh&&(0===s.code||1===s.code)&&null),Fi(s=>null!==s),_c(1)).subscribe(()=>{i()})})(()=>{i(!0)}),o.afterPreactivation=()=>(i(!0),s.closed?K(void 0):s),o.initialNavigation()}))}}]).\u0275providers:[]]}const y1=new $("");function v1(n,e,t,r,i,o,s){try{var a=n[o](s),u=a.value}catch(c){return void t(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function g(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function s(u){v1(o,r,i,s,a,"next",u)}function a(u){v1(o,r,i,s,a,"throw",u)}s(void 0)})}}const I1=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=63&i|128):55296==(64512&i)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&n.charCodeAt(++r)),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=63&i|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=63&i|128)}return e},E1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,c=u?n[i+2]:0;let h=(15&a)<<2|c>>6,f=63&c;u||(f=64,s||(h=64)),r.push(t[o>>2],t[(3&o)<<4|a>>4],t[h],t[f])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(I1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const u=((7&i)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const o=n[t++],s=n[t++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;const c=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,null==o||null==a||null==c||null==d)throw new kW;r.push(o<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class kW extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const df=function(n){return function(n){const e=I1(n);return E1.encodeByteArray(e,!0)}(n).replace(/\./g,"")},hf=function(n){try{return E1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null},ff=()=>{try{return function FW(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&hf(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},T1=n=>{var e,t;return null===(t=null===(e=ff())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]},C1=()=>{var n;return null===(n=ff())||void 0===n?void 0:n.config},D1=n=>{var e;return null===(e=ff())||void 0===e?void 0:e[`_${n}`]};class A1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function rt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function b1(){const n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof n&&void 0!==n.id}function tv(){try{return"object"==typeof indexedDB}catch{return!1}}function S1(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(t){e(t)}})}class mr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fo.prototype.create)}}class Fo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?function YW(n,e){return n.replace(JW,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new mr(i,`${this.serviceName}: ${s} (${i}).`,r)}}const JW=/\{\$([^}]+)}/g;function XW(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Nc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],s=e[i];if(P1(o)&&P1(s)){if(!Nc(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function P1(n){return null!==n&&"object"==typeof n}function kc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class e7{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function t7(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=nv),void 0===i.error&&(i.error=nv),void 0===i.complete&&(i.complete=nv);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nv(){}function x1(n,e=1e3,t=2){const r=e*Math.pow(t,n),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function dn(n){return n&&n._delegate?n._delegate:n}class _r{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Lo="[DEFAULT]";class a7{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new A1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function c7(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Lo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Lo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return g(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Lo){return this.instances.has(e)}getOptions(e=Lo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Lo?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=Lo){return this.component?this.component.multipleInstances?e:Lo:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class l7{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a7(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const iv=[];var pe=(()=>{return(n=pe||(pe={}))[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",pe;var n})();const M1={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},d7=pe.INFO,h7={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},f7=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),i=h7[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${n.name}:`,...t)};class gf{constructor(e){this.name=e,this._logLevel=d7,this._logHandler=f7,this._userLogHandler=null,iv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?M1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}let N1,k1;const O1=new WeakMap,ov=new WeakMap,V1=new WeakMap,sv=new WeakMap,av=new WeakMap;let uv={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return ov.get(n);if("objectStoreNames"===e)return n.objectStoreNames||V1.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ji(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function E7(n){return"function"==typeof n?function I7(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function m7(){return k1||(k1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(cv(this),e),ji(O1.get(this))}:function(...e){return ji(n.apply(cv(this),e))}:function(e,...t){const r=n.call(cv(this),e,...t);return V1.set(r,e.sort?e.sort():[e]),ji(r)}}(n):(n instanceof IDBTransaction&&function y7(n){if(ov.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});ov.set(n,e)}(n),((n,e)=>e.some(t=>n instanceof t))(n,function g7(){return N1||(N1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,uv):n)}function ji(n){if(n instanceof IDBRequest)return function _7(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(ji(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&O1.set(t,n)}).catch(()=>{}),av.set(e,n),e}(n);if(sv.has(n))return sv.get(n);const e=E7(n);return e!==n&&(sv.set(n,e),av.set(e,n)),e}const cv=n=>av.get(n);function F1(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(n,e),a=ji(s);return r&&s.addEventListener("upgradeneeded",u=>{r(ji(s.result),u.oldVersion,u.newVersion,ji(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const w7=["get","getKey","getAll","getAllKeys","count"],T7=["put","add","delete","clear"],lv=new Map;function L1(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(lv.get(e))return lv.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=T7.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!w7.includes(t))return;const o=function(){var s=g(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[t](...u),i&&c.done]))[0]});return function(u){return s.apply(this,arguments)}}();return lv.set(e,o),o}!function v7(n){uv=n(uv)}(n=>({...n,get:(e,t,r)=>L1(e,t)||n.get(e,t,r),has:(e,t)=>!!L1(e,t)||n.has(e,t)}));class C7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function D7(n){return"VERSION"===n.getComponent()?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const dv="@firebase/app",Uo=new gf("@firebase/app"),mf="[DEFAULT]",J7={[dv]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Bo=new Map,_f=new Map;function X7(n,e){try{n.container.addComponent(e)}catch(t){Uo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Nr(n){const e=n.name;if(_f.has(e))return Uo.debug(`There were multiple attempts to register component ${e}.`),!1;_f.set(e,n);for(const t of Bo.values())X7(t,n);return!0}function $i(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}const pi=new Fo("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class eK{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pi.create("app-deleted",{appName:this._name})}}const pa="10.8.1";function B1(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:mf,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw pi.create("bad-app-name",{appName:String(i)});if(t||(t=C1()),!t)throw pi.create("no-options");const o=Bo.get(i);if(o){if(Nc(t,o.options)&&Nc(r,o.config))return o;throw pi.create("duplicate-app",{appName:i})}const s=new l7(i);for(const u of _f.values())s.addComponent(u);const a=new eK(t,r,s);return Bo.set(i,a),a}function hv(n=mf){const e=Bo.get(n);if(!e&&n===mf&&C1())return B1();if(!e)throw pi.create("no-app",{appName:n});return e}function Xn(n,e,t){var r;let i=null!==(r=J7[n])&&void 0!==r?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Uo.warn(a.join(" "))}Nr(new _r(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const Oc="firebase-heartbeat-store";let pv=null;function j1(){return pv||(pv=F1("firebase-heartbeat-database",1,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(Oc)}catch(t){console.warn(t)}}}).catch(n=>{throw pi.create("idb-open",{originalErrorMessage:n.message})})),pv}function gv(){return(gv=g(function*(n){try{const t=(yield j1()).transaction(Oc),r=yield t.objectStore(Oc).get(G1(n));return yield t.done,r}catch(e){if(e instanceof mr)Uo.warn(e.message);else{const t=pi.create("idb-get",{originalErrorMessage:e?.message});Uo.warn(t.message)}}})).apply(this,arguments)}function $1(n,e){return mv.apply(this,arguments)}function mv(){return(mv=g(function*(n,e){try{const r=(yield j1()).transaction(Oc,"readwrite");yield r.objectStore(Oc).put(e,G1(n)),yield r.done}catch(t){if(t instanceof mr)Uo.warn(t.message);else{const r=pi.create("idb-set",{originalErrorMessage:t?.message});Uo.warn(r.message)}}})).apply(this,arguments)}function G1(n){return`${n.name}!${n.options.appId}`}class sK{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new uK(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return g(function*(){var t,r;const o=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=H1();if((null!=(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(e._heartbeatsCache=yield e._heartbeatsCachePromise,null!=(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats)))&&e._heartbeatsCache.lastSentHeartbeatDate!==s&&!e._heartbeatsCache.heartbeats.some(a=>a.date===s))return e._heartbeatsCache.heartbeats.push({date:s,agent:o}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return g(function*(){var t;if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=H1(),{heartbeatsToSend:i,unsentEntries:o}=function aK(n,e=1024){const t=[];let r=n.slice();for(const i of n){const o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),q1(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),q1(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=df(JSON.stringify({version:2,heartbeats:i}));return e._heartbeatsCache.lastSentHeartbeatDate=r,o.length>0?(e._heartbeatsCache.heartbeats=o,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function H1(){return(new Date).toISOString().substring(0,10)}class uK{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return g(function*(){return!!tv()&&S1().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return g(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function rK(n){return gv.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return g(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return $1(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return g(function*(){var r;if(yield t._canUseIndexedDBPromise){const o=yield t.read();return $1(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}})()}}function q1(n){return df(JSON.stringify({version:2,heartbeats:n})).length}!function cK(n){Nr(new _r("platform-logger",e=>new C7(e),"PRIVATE")),Nr(new _r("heartbeat",e=>new sK(e),"PRIVATE")),Xn(dv,"0.9.28",n),Xn(dv,"0.9.28","esm2017"),Xn("fire-js","")}(""),Xn("firebase","10.8.1","app");const z1="@firebase/installations",K1="w:0.6.5",Q1="FIS_v2",gi=new Fo("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Y1(n){return n instanceof mr&&n.code.includes("request-failed")}function yv({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function J1(n){return{token:n.token,requestStatus:2,expiresIn:_K(n.expiresIn),creationTime:Date.now()}}function vv(n,e){return Iv.apply(this,arguments)}function Iv(){return(Iv=g(function*(n,e){const r=(yield e.json()).error;return gi.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function X1({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Z1(n,{refreshToken:e}){const t=X1(n);return t.append("Authorization",function yK(n){return`${Q1} ${n}`}(e)),t}function Ev(n){return wv.apply(this,arguments)}function wv(){return(wv=g(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function _K(n){return Number(n.replace("s","000"))}function vK(n,e){return Tv.apply(this,arguments)}function Tv(){return(Tv=g(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=yv(n),i=X1(n),o=e.getImmediate({optional:!0});if(o){const c=yield o.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:Q1,appId:n.appId,sdkVersion:K1})},u=yield Ev(()=>fetch(r,a));if(u.ok){const c=yield u.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:J1(c.authToken)}}throw yield vv("Create Installation",u)})).apply(this,arguments)}function eN(n){return new Promise(e=>{setTimeout(e,n)})}const EK=/^[cdef][\w-]{21}$/;function wK(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function TK(n){return function IK(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return EK.test(t)?t:""}catch{return""}}function ga(n){return`${n.appName}!${n.appId}`}const ma=new Map;function tN(n,e){const t=ga(n);nN(t,e),function AK(n,e){const t=function rN(){return!jo&&"BroadcastChannel"in self&&(jo=new BroadcastChannel("[Firebase] FID Change"),jo.onmessage=n=>{nN(n.data.key,n.data.fid)}),jo}();t&&t.postMessage({key:n,fid:e}),function iN(){0===ma.size&&jo&&(jo.close(),jo=null)}()}(t,e)}function nN(n,e){const t=ma.get(n);if(t)for(const r of t)r(e)}let jo=null;const $o="firebase-installations-store";let Dv=null;function Av(){return Dv||(Dv=F1("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore($o)}})),Dv}function yf(n,e){return bv.apply(this,arguments)}function bv(){return(bv=g(function*(n,e){const t=ga(n),i=(yield Av()).transaction($o,"readwrite"),o=i.objectStore($o),s=yield o.get(t);return yield o.put(e,t),yield i.done,(!s||s.fid!==e.fid)&&tN(n,e.fid),e})).apply(this,arguments)}function Sv(n){return Rv.apply(this,arguments)}function Rv(){return(Rv=g(function*(n){const e=ga(n),r=(yield Av()).transaction($o,"readwrite");yield r.objectStore($o).delete(e),yield r.done})).apply(this,arguments)}function Vc(n,e){return Pv.apply(this,arguments)}function Pv(){return(Pv=g(function*(n,e){const t=ga(n),i=(yield Av()).transaction($o,"readwrite"),o=i.objectStore($o),s=yield o.get(t),a=e(s);return void 0===a?yield o.delete(t):yield o.put(a,t),yield i.done,a&&(!s||s.fid!==a.fid)&&tN(n,a.fid),a})).apply(this,arguments)}function xv(n){return Mv.apply(this,arguments)}function Mv(){return(Mv=g(function*(n){let e;const t=yield Vc(n.appConfig,r=>{const i=RK(r),o=PK(n,i);return e=o.registrationPromise,o.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})).apply(this,arguments)}function RK(n){return sN(n||{fid:wK(),registrationStatus:0})}function PK(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(gi.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function xK(n,e){return Nv.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:MK(n)}:{installationEntry:e}}function Nv(){return(Nv=g(function*(n,e){try{const t=yield vK(n,e);return yf(n.appConfig,t)}catch(t){throw Y1(t)&&409===t.customData.serverCode?yield Sv(n.appConfig):yield yf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})).apply(this,arguments)}function MK(n){return kv.apply(this,arguments)}function kv(){return(kv=g(function*(n){let e=yield oN(n.appConfig);for(;1===e.registrationStatus;)yield eN(100),e=yield oN(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield xv(n);return r||t}return e})).apply(this,arguments)}function oN(n){return Vc(n,e=>{if(!e)throw gi.create("installation-not-found");return sN(e)})}function sN(n){return function NK(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function kK(n,e){return Ov.apply(this,arguments)}function Ov(){return(Ov=g(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=OK(n,t),i=Z1(n,t),o=e.getImmediate({optional:!0});if(o){const c=yield o.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:K1,appId:n.appId}})},u=yield Ev(()=>fetch(r,a));if(u.ok)return J1(yield u.json());throw yield vv("Generate Auth Token",u)})).apply(this,arguments)}function OK(n,{fid:e}){return`${yv(n)}/${e}/authTokens:generate`}function Vv(n){return Fv.apply(this,arguments)}function Fv(){return(Fv=g(function*(n,e=!1){let t;const r=yield Vc(n.appConfig,o=>{if(!uN(o))throw gi.create("not-registered");const s=o.authToken;if(!e&&LK(s))return o;if(1===s.requestStatus)return t=VK(n,e),o;{if(!navigator.onLine)throw gi.create("app-offline");const a=BK(o);return t=FK(n,a),a}});return t?yield t:r.authToken})).apply(this,arguments)}function VK(n,e){return Lv.apply(this,arguments)}function Lv(){return(Lv=g(function*(n,e){let t=yield aN(n.appConfig);for(;1===t.authToken.requestStatus;)yield eN(100),t=yield aN(n.appConfig);const r=t.authToken;return 0===r.requestStatus?Vv(n,e):r})).apply(this,arguments)}function aN(n){return Vc(n,e=>{if(!uN(e))throw gi.create("not-registered");return function jK(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function FK(n,e){return Uv.apply(this,arguments)}function Uv(){return(Uv=g(function*(n,e){try{const t=yield kK(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield yf(n.appConfig,r),t}catch(t){if(!Y1(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield yf(n.appConfig,r)}else yield Sv(n.appConfig);throw t}})).apply(this,arguments)}function uN(n){return void 0!==n&&2===n.registrationStatus}function LK(n){return 2===n.requestStatus&&!function UK(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function BK(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function Bv(){return(Bv=g(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield xv(e);return r?r.catch(console.error):Vv(e).catch(console.error),t.fid})).apply(this,arguments)}function jv(){return(jv=g(function*(n,e=!1){const t=n;return yield HK(t),(yield Vv(t,e)).token})).apply(this,arguments)}function HK(n){return $v.apply(this,arguments)}function $v(){return($v=g(function*(n){const{registrationPromise:e}=yield xv(n);e&&(yield e)})).apply(this,arguments)}function qv(n){return gi.create("missing-app-config-values",{valueName:n})}const cN="installations",QK=n=>{const e=n.getProvider("app").getImmediate(),t=function WK(n){if(!n||!n.options)throw qv("App Configuration");if(!n.name)throw qv("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw qv(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:$i(e,"heartbeat"),_delete:()=>Promise.resolve()}},YK=n=>{const t=$i(n.getProvider("app").getImmediate(),cN).getImmediate();return{getId:()=>function $K(n){return Bv.apply(this,arguments)}(t),getToken:i=>function GK(n){return jv.apply(this,arguments)}(t,i)}};(function JK(){Nr(new _r(cN,QK,"PUBLIC")),Nr(new _r("installations-internal",YK,"PRIVATE"))})(),Xn(z1,"0.6.5"),Xn(z1,"0.6.5","esm2017");const vf="analytics",XK="firebase_id",tQ="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zv="https://www.googletagmanager.com/gtag/js",Rt=new gf("@firebase/analytics"),hn=new Fo("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function rQ(n){if(!n.startsWith(zv)){const e=hn.create("invalid-gtag-resource",{gtagURL:n});return Rt.warn(e.message),""}return n}function lN(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function oQ(n,e){const t=function iQ(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}("firebase-js-sdk-policy",{createScriptURL:rQ}),r=document.createElement("script"),i=`${zv}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function aQ(n,e,t,r,i,o){return Wv.apply(this,arguments)}function Wv(){return(Wv=g(function*(n,e,t,r,i,o){const s=r[i];try{if(s)yield e[s];else{const u=(yield lN(t)).find(c=>c.measurementId===i);u&&(yield e[u.appId])}}catch(a){Rt.error(a)}n("config",i,o)})).apply(this,arguments)}function uQ(n,e,t,r,i){return Kv.apply(this,arguments)}function Kv(){return(Kv=g(function*(n,e,t,r,i){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const a=yield lN(t);for(const u of s){const c=a.find(d=>d.measurementId===u),l=c&&e[c.appId];if(!l){o=[];break}o.push(l)}}0===o.length&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){Rt.error(o)}})).apply(this,arguments)}function dQ(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(zv)&&t.src.includes(n))return t;return null}const dN=new class pQ{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function gQ(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function mQ(n){return Qv.apply(this,arguments)}function Qv(){return(Qv=g(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:gQ(r)},o=tQ.replace("{app-id}",t),s=yield fetch(o,i);if(200!==s.status&&304!==s.status){let a="";try{const u=yield s.json();null!==(e=u.error)&&void 0!==e&&e.message&&(a=u.error.message)}catch{}throw hn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})).apply(this,arguments)}function _Q(n){return Yv.apply(this,arguments)}function Yv(){return(Yv=g(function*(n,e=dN,t){const{appId:r,apiKey:i,measurementId:o}=n.options;if(!r)throw hn.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw hn.create("no-api-key")}const s=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new IQ;return setTimeout(g(function*(){a.abort()}),void 0!==t?t:6e4),hN({appId:r,apiKey:i,measurementId:o},s,a,e)})).apply(this,arguments)}function hN(n,e,t){return Jv.apply(this,arguments)}function Jv(){return(Jv=g(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=dN){var o;const{appId:s,measurementId:a}=n;try{yield yQ(r,e)}catch(u){if(a)return Rt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:s,measurementId:a};throw u}try{const u=yield mQ(n);return i.deleteThrottleMetadata(s),u}catch(u){const c=u;if(!vQ(c)){if(i.deleteThrottleMetadata(s),a)return Rt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:s,measurementId:a};throw u}const l=503===Number(null===(o=c?.customData)||void 0===o?void 0:o.httpStatus)?x1(t,i.intervalMillis,30):x1(t,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:t+1};return i.setThrottleMetadata(s,d),Rt.debug(`Calling attemptFetch again in ${l} millis`),hN(n,d,r,i)}})).apply(this,arguments)}function yQ(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(hn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function vQ(n){if(!(n instanceof mr&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class IQ{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Xv,oI;function Zv(){return(Zv=g(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const o=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:o}))}})).apply(this,arguments)}function fN(n){oI=n}function pN(n){Xv=n}function bQ(){return sI.apply(this,arguments)}function sI(){return(sI=g(function*(){if(!tv())return Rt.warn(hn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield S1()}catch(n){return Rt.warn(hn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}return!0})).apply(this,arguments)}function aI(){return(aI=g(function*(n,e,t,r,i,o,s){var a;const u=_Q(n);u.then(f=>{t[f.measurementId]=f.appId,n.options.measurementId&&f.measurementId!==n.options.measurementId&&Rt.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Rt.error(f)),e.push(u);const c=bQ().then(f=>{if(f)return r.getId()}),[l,d]=yield Promise.all([u,c]);dQ(o)||oQ(o,l.measurementId),oI&&(i("consent","default",oI),fN(void 0)),i("js",new Date);const h=null!==(a=s?.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h[XK]=d),i("config",l.measurementId,h),Xv&&(i("set",Xv),pN(void 0)),l.measurementId})).apply(this,arguments)}class RQ{constructor(e){this.app=e}_delete(){return delete kr[this.app.options.appId],Promise.resolve()}}let kr={},gN=[];const mN={};let yN,Or,If="dataLayer",uI=!1;function xQ(n,e,t){!function PQ(){const n=[];if(b1()&&n.push("This is a browser extension environment."),function KW(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=hn.create("invalid-analytics-context",{errorInfo:e});Rt.warn(t.message)}}();const r=n.options.appId;if(!r)throw hn.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw hn.create("no-api-key");Rt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=kr[r])throw hn.create("already-exists",{id:r});if(!uI){!function sQ(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(If);const{wrappedGtag:o,gtagCore:s}=function lQ(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function cQ(n,e,t,r){function o(){return(o=g(function*(s,...a){try{if("event"===s){const[u,c]=a;yield uQ(n,e,t,u,c)}else if("config"===s){const[u,c]=a;yield aQ(n,e,t,r,u,c)}else if("consent"===s){const[u]=a;n("consent","update",u)}else if("get"===s){const[u,c,l]=a;n("get",u,c,l)}else if("set"===s){const[u]=a;n("set",u)}else n(s,...a)}catch(u){Rt.error(u)}})).apply(this,arguments)}return function i(s){return o.apply(this,arguments)}}(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}(kr,gN,mN,If,"gtag");Or=o,yN=s,uI=!0}return kr[r]=function SQ(n,e,t,r,i,o,s){return aI.apply(this,arguments)}(n,gN,mN,e,yN,If,t),new RQ(n)}function vN(n,e,t,r){n=dn(n),function EQ(n,e,t,r,i){return Zv.apply(this,arguments)}(Or,kr[n.app.options.appId],e,t,r).catch(i=>Rt.error(i))}const IN="@firebase/analytics";!function kQ(){Nr(new _r(vf,(e,{options:t})=>xQ(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),Nr(new _r("analytics-internal",function n(e){try{const t=e.getProvider(vf).getImmediate();return{logEvent:(r,i,o)=>vN(t,r,i,o)}}catch(t){throw hn.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Xn(IN,"0.10.1"),Xn(IN,"0.10.1","esm2017")}();const OQ=function wN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},TN=new Fo("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ef=new gf("@firebase/auth");function wf(n,...e){Ef.logLevel<=pe.ERROR&&Ef.error(`Auth (${pa}): ${n}`,...e)}function Tn(n,...e){throw dI(n,...e)}function Fn(n,...e){return dI(n,...e)}function CN(n,e,t){const r=Object.assign(Object.assign({},OQ()),{[e]:t});return new Fo("auth","Firebase",r).create(e,{appName:n.name})}function _a(n,e,t){if(!(e instanceof t))throw t.name!==e.constructor.name&&Tn(n,"argument-error"),CN(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function dI(n,...e){if("string"!=typeof n){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return TN.create(n,...e)}function R(n,e,...t){if(!n)throw dI(e,...t)}function Vr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw wf(e),new Error(e)}function mi(n,e){n||Vr(e)}function Fc(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.href)||""}function DN(){var n;return typeof self<"u"&&(null===(n=self.location)||void 0===n?void 0:n.protocol)||null}class Lc{constructor(e,t){this.shortDelay=e,this.longDelay=t,mi(t>e,"Short delay should be less than long delay!"),this.isMobile=function GW(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}()||function qW(){return"object"==typeof navigator&&"ReactNative"===navigator.product}()}get(){return function FQ(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function hI(){return"http:"===DN()||"https:"===DN()}()||b1()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function fI(n,e){mi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class AN{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const UQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},BQ=new Lc(3e4,6e4);function He(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function qe(n,e,t,r){return pI.apply(this,arguments)}function pI(){return(pI=g(function*(n,e,t,r,i={}){return bN(n,i,g(function*(){let o={},s={};r&&("GET"===e?s=r:o={body:JSON.stringify(r)});const a=kc(Object.assign({key:n.config.apiKey},s)).slice(1),u=yield n._getAdditionalHeaders();return u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode),AN.fetch()(SN(n,n.config.apiHost,t,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},o))}))})).apply(this,arguments)}function bN(n,e,t){return gI.apply(this,arguments)}function gI(){return(gI=g(function*(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},UQ),e);try{const i=new $Q(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw Uc(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[u,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw Uc(n,"credential-already-in-use",s);if("EMAIL_EXISTS"===u)throw Uc(n,"email-already-in-use",s);if("USER_DISABLED"===u)throw Uc(n,"user-disabled",s);const l=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw CN(n,l,c);Tn(n,l)}}catch(i){if(i instanceof mr)throw i;Tn(n,"network-request-failed",{message:String(i)})}})).apply(this,arguments)}function _i(n,e,t,r){return mI.apply(this,arguments)}function mI(){return(mI=g(function*(n,e,t,r,i={}){const o=yield qe(n,e,t,r,i);return"mfaPendingCredential"in o&&Tn(n,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function SN(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?fI(n.config,i):`${n.config.apiScheme}://${i}`}class $Q{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Fn(this.auth,"network-request-failed")),BQ.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Uc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Fn(n,e,r);return i.customData._tokenResponse=t,i}function vI(){return(vI=g(function*(n,e){return qe(n,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function zQ(n,e){return EI.apply(this,arguments)}function EI(){return(EI=g(function*(n,e){return qe(n,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Bc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function wI(){return(wI=g(function*(n,e=!1){const t=dn(n),r=yield t.getIdToken(e),i=Tf(r);R(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Bc(TI(i.auth_time)),issuedAtTime:Bc(TI(i.iat)),expirationTime:Bc(TI(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function TI(n){return 1e3*Number(n)}function Tf(n){const[e,t,r]=n.split(".");if(void 0===e||void 0===t||void 0===r)return wf("JWT malformed, contained fewer than 3 sections"),null;try{const i=hf(t);return i?JSON.parse(i):(wf("Failed to decode base64 JWT payload"),null)}catch(i){return wf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function yi(n,e){return CI.apply(this,arguments)}function CI(){return(CI=g(function*(n,e,t=!1){if(t)return e;try{return yield e}catch(r){throw r instanceof mr&&QQ(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})).apply(this,arguments)}function QQ({code:n}){return"auth/user-disabled"===n||"auth/user-token-expired"===n}class YQ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(g(function*(){yield t.iteration()}),r)}iteration(){var e=this;return g(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t?.code&&e.schedule(!0))}e.schedule()})()}}class NN{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bc(this.lastLoginAt),this.creationTime=Bc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function jc(n){return DI.apply(this,arguments)}function DI(){return(DI=g(function*(n){var e;const t=n.auth,r=yield n.getIdToken(),i=yield yi(n,zQ(t,{idToken:r}));R(i?.users.length,t,"internal-error");const o=i.users[0];n._notifyReloadListener(o);const s=null!==(e=o.providerUserInfo)&&void 0!==e&&e.length?ZQ(o.providerUserInfo):[],a=XQ(n.providerData,s),l=!!n.isAnonymous&&!(n.email&&o.passwordHash||a?.length),d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new NN(o.createdAt,o.lastLoginAt),isAnonymous:l};Object.assign(n,d)})).apply(this,arguments)}function AI(){return(AI=g(function*(n){const e=dn(n);yield jc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function XQ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ZQ(n){return n.map(e=>{var{providerId:t}=e,r=Tg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function bI(){return(bI=g(function*(n,e){const t=yield bN(n,{},g(function*(){const r=kc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=SN(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",AN.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})).apply(this,arguments)}function SI(){return(SI=g(function*(n,e){return qe(n,"POST","/v2/accounts:revokeToken",He(n,e))})).apply(this,arguments)}class $c{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){R(e.idToken,"internal-error"),R(typeof e.idToken<"u","internal-error"),R(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function KQ(n){const e=Tf(n);return R(e,"internal-error"),R(typeof e.exp<"u","internal-error"),R(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var r=this;return g(function*(){return R(!r.accessToken||r.refreshToken,e,"user-token-expired"),t||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var r=this;return g(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function eY(n,e){return bI.apply(this,arguments)}(e,t);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new $c;return r&&(R("string"==typeof r,"internal-error",{appName:e}),s.refreshToken=r),i&&(R("string"==typeof i,"internal-error",{appName:e}),s.accessToken=i),o&&(R("number"==typeof o,"internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $c,this.toJSON())}_performRefresh(){return Vr("not implemented")}}function Gi(n,e){R("string"==typeof n||typeof n>"u","internal-error",{appName:e})}class Go{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Tg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YQ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new NN(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){var t=this;return g(function*(){const r=yield yi(t,t.stsTokenManager.getToken(t.auth,e));return R(r,t.auth,"internal-error"),t.accessToken!==r&&(t.accessToken=r,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),r})()}getIdTokenResult(e){return function WQ(n){return wI.apply(this,arguments)}(this,e)}reload(){return function JQ(n){return AI.apply(this,arguments)}(this)}_assign(e){this!==e&&(R(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Go(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){R(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var r=this;return g(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield jc(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return g(function*(){const t=yield e.getIdToken();return yield yi(e,function HQ(n,e){return vI.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,c,l;const d=null!==(r=t.displayName)&&void 0!==r?r:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,f=null!==(o=t.phoneNumber)&&void 0!==o?o:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,_=null!==(u=t._redirectEventId)&&void 0!==u?u:void 0,I=null!==(c=t.createdAt)&&void 0!==c?c:void 0,w=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:b,isAnonymous:B,providerData:j,stsTokenManager:et}=t;R(y&&et,e,"internal-error");const bn=$c.fromJSON(this.name,et);R("string"==typeof y,e,"internal-error"),Gi(d,e.name),Gi(h,e.name),R("boolean"==typeof b,e,"internal-error"),R("boolean"==typeof B,e,"internal-error"),Gi(f,e.name),Gi(p,e.name),Gi(m,e.name),Gi(_,e.name),Gi(I,e.name),Gi(w,e.name);const pd=new Go({uid:y,auth:e,email:h,emailVerified:b,displayName:d,isAnonymous:B,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:bn,createdAt:I,lastLoginAt:w});return j&&Array.isArray(j)&&(pd.providerData=j.map(mg=>Object.assign({},mg))),_&&(pd._redirectEventId=_),pd}static _fromIdTokenResponse(e,t,r=!1){return g(function*(){const i=new $c;i.updateFromServerResponse(t);const o=new Go({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield jc(o),o})()}}const kN=new Map;function vi(n){mi(n instanceof Function,"Expected a class definition");let e=kN.get(n);return e?(mi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,kN.set(n,e),e)}const ON=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return g(function*(){return!0})()}_set(t,r){var i=this;return g(function*(){i.storage[t]=r})()}_get(t){var r=this;return g(function*(){const i=r.storage[t];return void 0===i?null:i})()}_remove(t){var r=this;return g(function*(){delete r.storage[t]})()}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})();function Cf(n,e,t){return`firebase:${n}:${e}:${t}`}class ya{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Cf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Cf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return g(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?Go._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return g(function*(){if(t.persistence===e)return;const r=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,r?t.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return g(function*(){if(!t.length)return new ya(vi(ON),e,r);const i=(yield Promise.all(t.map(function(){var c=g(function*(l){if(yield l._isAvailable())return l});return function(l){return c.apply(this,arguments)}}()))).filter(c=>c);let o=i[0]||vi(ON);const s=Cf(r,e.config.apiKey,e.name);let a=null;for(const c of t)try{const l=yield c._get(s);if(l){const d=Go._fromJSON(e,l);c!==o&&(a=d),o=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return o._shouldAllowMigration&&u.length?(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(function(){var c=g(function*(l){if(l!==o)try{yield l._remove(s)}catch{}});return function(l){return c.apply(this,arguments)}}())),new ya(o,e,r)):new ya(o,e,r)})()}}function VN(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jN(e))return"Blackberry";if($N(e))return"Webos";if(RI(e))return"Safari";if((e.includes("chrome/")||LN(e))&&!e.includes("edge/"))return"Chrome";if(BN(e))return"Android";{const r=n.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function FN(n=rt()){return/firefox\//i.test(n)}function RI(n=rt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LN(n=rt()){return/crios\//i.test(n)}function UN(n=rt()){return/iemobile/i.test(n)}function BN(n=rt()){return/android/i.test(n)}function jN(n=rt()){return/blackberry/i.test(n)}function $N(n=rt()){return/webos/i.test(n)}function Df(n=rt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function GN(n=rt()){return Df(n)||BN(n)||$N(n)||jN(n)||/windows phone/i.test(n)||UN(n)}function HN(n,e=[]){let t;switch(n){case"Browser":t=VN(rt());break;case"Worker":t=`${VN(rt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${pa}/${r}`}class oY{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((s,a)=>{try{s(e(o))}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var t=this;return g(function*(){if(t.auth.currentUser===e)return;const r=[];try{for(const i of t.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw t.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}function PI(){return(PI=g(function*(n,e={}){return qe(n,"GET","/v2/passwordPolicy",He(n,e))})).apply(this,arguments)}class uY{constructor(e){var t,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(o=e.forceUpgradeOnSignin)&&void 0!==o&&o,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=null===(t=u.meetsMinPasswordLength)||void 0===t||t),u.isValid&&(u.isValid=null===(r=u.meetsMaxPasswordLength)||void 0===r||r),u.isValid&&(u.isValid=null===(i=u.containsLowercaseLetter)||void 0===i||i),u.isValid&&(u.isValid=null===(o=u.containsUppercaseLetter)||void 0===o||o),u.isValid&&(u.isValid=null===(s=u.containsNumericCharacter)||void 0===s||s),u.isValid&&(u.isValid=null===(a=u.containsNonAlphanumericCharacter)||void 0===a||a),u}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let r;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class cY{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qN(this),this.idTokenSubscription=new qN(this),this.beforeStateQueue=new oY(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){var r=this;return t&&(this._popupRedirectResolver=vi(t)),this._initializationPromise=this.queue(g(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield ya.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(t),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return g(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t,!0)}})()}initializeCurrentUser(e){var t=this;return g(function*(){var r;const i=yield t.assertedPersistence.getCurrentUser();let o=i,s=!1;if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const a=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,u=o?._redirectEventId,c=yield t.tryRedirectSignIn(e);(!a||a===u)&&c?.user&&(o=c.user,s=!0)}if(!o)return t.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield t.beforeStateQueue.runMiddleware(o)}catch(a){o=i,t._popupRedirectResolver._overrideRedirectResult(t,()=>Promise.reject(a))}return o?t.reloadAndSetCurrentUserOrClear(o):t.directlySetCurrentUser(null)}return R(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===o._redirectEventId?t.directlySetCurrentUser(o):t.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(e){var t=this;return g(function*(){let r=null;try{r=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch{yield t._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var t=this;return g(function*(){try{yield jc(e)}catch(r){if("auth/network-request-failed"!==r?.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function LQ(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}()}_delete(){var e=this;return g(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return g(function*(){const r=e?dn(e):null;return r&&R(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))})()}_updateCurrentUser(e,t=!1){var r=this;return g(function*(){if(!r._deleted)return e&&R(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),t||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(g(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return g(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var t=this;return this.queue(g(function*(){yield t.assertedPersistence.setPersistence(vi(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var t=this;return g(function*(){t._getPasswordPolicyInternal()||(yield t._updatePasswordPolicy());const r=t._getPasswordPolicyInternal();return r.schemaVersion!==t.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(t._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return g(function*(){const t=yield function sY(n){return PI.apply(this,arguments)}(e),r=new uY(t);null===e.tenantId?e._projectPasswordPolicy=r:e._tenantPasswordPolicies[e.tenantId]=r})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){var t=this;return g(function*(){if(t.currentUser){const r=yield t.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};null!=t.tenantId&&(i.tenantId=t.tenantId),yield function tY(n,e){return SI.apply(this,arguments)}(t,i)}})()}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var r=this;return g(function*(){const i=yield r.getOrInitRedirectPersistenceManager(t);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return g(function*(){if(!t.redirectPersistenceManager){const r=e&&vi(e)||t._popupRedirectResolver;R(r,t,"argument-error"),t.redirectPersistenceManager=yield ya.create(t,[vi(r._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return g(function*(){var r,i;return t._isInitialized&&(yield t.queue(g(function*(){}))),(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return g(function*(){if(e===t.currentUser)return t.queue(g(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o="function"==typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(R(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),"function"==typeof t){const u=e.addObserver(t,r,i);return()=>{s=!0,u()}}{const u=e.addObserver(t);return()=>{s=!0,u()}}}directlySetCurrentUser(e){var t=this;return g(function*(){t.currentUser&&t.currentUser!==e&&t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh(),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return R(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return g(function*(){var t;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(t=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();i&&(r["X-Firebase-Client"]=i);const o=yield e._getAppCheckToken();return o&&(r["X-Firebase-AppCheck"]=o),r})()}_getAppCheckToken(){var e=this;return g(function*(){var t;const r=yield null===(t=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();return r?.error&&function VQ(n,...e){Ef.logLevel<=pe.WARN&&Ef.warn(`Auth (${pa}): ${n}`,...e)}(`Error while retrieving App Check token: ${r.error}`),r?.token})()}}function ut(n){return dn(n)}class qN{constructor(e){this.auth=e,this.observer=null,this.addObserver=function ZW(n,e){const t=new e7(n,e);return t.subscribe.bind(t)}(t=>this.observer=t)}get next(){return R(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Gc={loadJS:()=>g(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zN(n){return`__${n}${Math.floor(1e6*Math.random())}`}function QN(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function YN(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}class JN{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,t){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}function Ii(n,e){return KI.apply(this,arguments)}function KI(){return(KI=g(function*(n,e){return _i(n,"POST","/v1/accounts:signInWithIdp",He(n,e))})).apply(this,arguments)}class va extends JN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Tn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=Tg(t,["providerId","signInMethod"]);if(!r||!i)return null;const s=new va(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){return Ii(e,this.buildRequest())}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ii(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ii(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=kc(t)}return e}}class Hi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ek extends Hi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let ZI=(()=>{class n extends ek{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return va._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}return n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com",n})();class Zn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return g(function*(){const o=yield Go._fromIdTokenResponse(e,r,i),s=nk(r);return new Zn({user:o,providerId:s,_tokenResponse:r,operationType:t})})()}static _forOperation(e,t,r){return g(function*(){yield e._updateTokensIfNecessary(r,!0);const i=nk(r);return new Zn({user:e,providerId:i,_tokenResponse:r,operationType:t})})()}}function nk(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}class Rf extends mr{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Rf.prototype),this.customData={appName:e.name,tenantId:null!==(o=e.tenantId)&&void 0!==o?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Rf(e,t,r,i)}}function rk(n,e,t,r){return("reauthenticate"===e?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?Rf._fromErrorAndOperation(n,o,e,r):o})}function iE(n,e){return oE.apply(this,arguments)}function oE(){return(oE=g(function*(n,e,t=!1){const r=yield yi(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Zn._forOperation(n,"link",r)})).apply(this,arguments)}function aE(){return(aE=g(function*(n,e,t=!1){const{auth:r}=n,i="reauthenticate";try{const o=yield yi(n,rk(r,i,e,n),t);R(o.idToken,r,"internal-error");const s=Tf(o.idToken);R(s,r,"internal-error");const{sub:a}=s;return R(n.uid===a,r,"user-mismatch"),Zn._forOperation(n,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&Tn(r,"user-mismatch"),o}})).apply(this,arguments)}function uE(){return(uE=g(function*(n,e,t=!1){const r="signIn",i=yield rk(n,r,e),o=yield Zn._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})).apply(this,arguments)}const Mf="__sak";class uk{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Mf,"1"),this.storage.removeItem(Mf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const cJ=(()=>{class n extends uk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function sJ(){const n=rt();return RI(n)||Df(n)}()&&function iY(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=GN(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key)return void this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});const i=t.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(t.newValue!==a)null!==t.newValue?this.storage.setItem(i,t.newValue):this.storage.removeItem(i);else if(this.localCache[i]===t.newValue&&!r)return}const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function rY(){return function zW(){const n=rt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===t.newValue||t.newValue===t.oldValue?o():setTimeout(o,10)}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(t,r){var i=()=>super._set,o=this;return g(function*(){yield i().call(o,t,r),o.localCache[t]=JSON.stringify(r)})()}_get(t){var r=()=>super._get,i=this;return g(function*(){const o=yield r().call(i,t);return i.localCache[t]=JSON.stringify(o),o})()}_remove(t){var r=()=>super._remove,i=this;return g(function*(){yield r().call(i,t),delete i.localCache[t]})()}}return n.type="LOCAL",n})(),ck=(()=>{class n extends uk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})();let dJ=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;const i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){var r=this;return g(function*(){const i=t,{eventId:o,eventType:s,data:a}=i.data,u=r.handlersMap[s];if(!u?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const c=Array.from(u).map(function(){var d=g(function*(h){return h(i.origin,a)});return function(h){return d.apply(this,arguments)}}()),l=yield function lJ(n){return Promise.all(n.map(function(){var e=g(function*(t){try{return{fulfilled:!0,value:yield t}}catch(r){return{fulfilled:!1,reason:r}}});return function(t){return e.apply(this,arguments)}}()))}(c);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:l})})()}_subscribe(t,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||0===this.handlersMap[t].size)&&delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return n.receivers=[],n})();function Nf(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(10*Math.random());return n+t}class hJ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){var i=this;return g(function*(){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let s,a;return new Promise((u,c)=>{const l=Nf("",20);o.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:o,onMessage(h){const f=h;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(f.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"))}}},i.handlers.add(a),o.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:l,data:t},[o.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function vt(){return window}function jE(){return typeof vt().WorkerGlobalScope<"u"&&"function"==typeof vt().importScripts}function $E(){return($E=g(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const lk="firebaseLocalStorageDb",kf="firebaseLocalStorage",dk="fbase_key";class Wc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Of(n,e){return n.transaction([kf],e?"readwrite":"readonly").objectStore(kf)}function GE(){const n=indexedDB.open(lk,1);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(kf,{keyPath:dk})}catch(i){t(i)}}),n.addEventListener("success",g(function*(){const r=n.result;r.objectStoreNames.contains(kf)?e(r):(r.close(),yield function yJ(){const n=indexedDB.deleteDatabase(lk);return new Wc(n).toPromise()}(),e(yield GE()))}))})}function hk(n,e,t){return HE.apply(this,arguments)}function HE(){return(HE=g(function*(n,e,t){const r=Of(n,!0).put({[dk]:e,value:t});return new Wc(r).toPromise()})).apply(this,arguments)}function qE(){return(qE=g(function*(n,e){const t=Of(n,!1).get(e),r=yield new Wc(t).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function fk(n,e){const t=Of(n,!0).delete(e);return new Wc(t).toPromise()}const wJ=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var t=this;return g(function*(){return t.db||(t.db=yield GE()),t.db})()}_withRetries(t){var r=this;return g(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield t(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var t=this;return g(function*(){return jE()?t.initializeReceiver():t.initializeSender()})()}initializeReceiver(){var t=this;return g(function*(){t.receiver=dJ._getInstance(function mJ(){return jE()?self:null}()),t.receiver._subscribe("keyChanged",function(){var r=g(function*(i,o){return{keyProcessed:(yield t._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),t.receiver._subscribe("ping",function(){var r=g(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var t=this;return g(function*(){var r,i;if(t.activeServiceWorker=yield function pJ(){return $E.apply(this,arguments)}(),!t.activeServiceWorker)return;t.sender=new hJ(t.activeServiceWorker);const o=yield t.sender._send("ping",{},800);!o||(null===(r=o[0])||void 0===r?void 0:r.fulfilled)&&(null===(i=o[0])||void 0===i?void 0:i.value.includes("keyChanged"))&&(t.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(t){var r=this;return g(function*(){if(r.sender&&r.activeServiceWorker&&function gJ(){var n;return(null===(n=navigator?.serviceWorker)||void 0===n?void 0:n.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:t},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return g(function*(){try{if(!indexedDB)return!1;const t=yield GE();return yield hk(t,Mf,"1"),yield fk(t,Mf),!0}catch{}return!1})()}_withPendingWrite(t){var r=this;return g(function*(){r.pendingWrites++;try{yield t()}finally{r.pendingWrites--}})()}_set(t,r){var i=this;return g(function*(){return i._withPendingWrite(g(function*(){return yield i._withRetries(o=>hk(o,t,r)),i.localCache[t]=r,i.notifyServiceWorker(t)}))})()}_get(t){var r=this;return g(function*(){const i=yield r._withRetries(o=>function vJ(n,e){return qE.apply(this,arguments)}(o,t));return r.localCache[t]=i,i})()}_remove(t){var r=this;return g(function*(){return r._withPendingWrite(g(function*(){return yield r._withRetries(i=>fk(i,t)),delete r.localCache[t],r.notifyServiceWorker(t)}))})()}_poll(){var t=this;return g(function*(){const r=yield t._withRetries(s=>{const a=Of(s,!1).getAll();return new Wc(a).toPromise()});if(!r)return[];if(0!==t.pendingWrites)return[];const i=[],o=new Set;if(0!==r.length)for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(t.localCache[s])!==JSON.stringify(a)&&(t.notifyListeners(s,a),i.push(s));for(const s of Object.keys(t.localCache))t.localCache[s]&&!o.has(s)&&(t.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(t,r){this.localCache[t]=r;const i=this.listeners[t];if(i)for(const o of Array.from(i))o(r)}startPolling(){var t=this;this.stopPolling(),this.pollTimer=setInterval(g(function*(){return t._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return n.type="LOCAL",n})();function qo(n,e){return e?vi(e):(R(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}zN("rcb"),new Lc(3e4,6e4);class ew extends JN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ii(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ii(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ii(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function FJ(n){return function sk(n,e){return uE.apply(this,arguments)}(n.auth,new ew(n),n.bypassAuthState)}function LJ(n){const{auth:e,user:t}=n;return R(t,e,"internal-error"),function ok(n,e){return aE.apply(this,arguments)}(t,new ew(n),n.bypassAuthState)}function UJ(n){return tw.apply(this,arguments)}function tw(){return(tw=g(function*(n){const{auth:e,user:t}=n;return R(t,e,"internal-error"),iE(t,new ew(n),n.bypassAuthState)})).apply(this,arguments)}class gk{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=g(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(o){e.reject(o)}});return function(r,i){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return g(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:u}=e;if(a)return void t.reject(a);const c={auth:t.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(u)(c))}catch(l){t.reject(l)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FJ;case"linkViaPopup":case"linkViaRedirect":return UJ;case"reauthViaPopup":case"reauthViaRedirect":return LJ;default:Tn(this.auth,"internal-error")}}resolve(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const BJ=new Lc(2e3,1e4);function nw(){return(nw=g(function*(n,e,t){const r=ut(n);_a(n,e,Hi);const i=qo(r,t);return new ow(r,"signInViaPopup",e,i).executeNotNull()})).apply(this,arguments)}let ow=(()=>{class n extends gk{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){var t=this;return g(function*(){const r=yield t.execute();return R(r,t.auth,"internal-error"),r})()}onExecution(){var t=this;return g(function*(){mi(1===t.filter.length,"Popup operations only handle one event");const r=Nf();t.authWindow=yield t.resolver._openPopup(t.auth,t.provider,t.filter[0],r),t.authWindow.associatedEvent=r,t.resolver._originValidation(t.auth).catch(i=>{t.reject(i)}),t.resolver._isIframeWebStorageSupported(t.auth,i=>{i||t.reject(Fn(t.auth,"web-storage-unsupported"))}),t.pollUserCancellation()})()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,i;this.pollId=null!==(i=null===(r=this.authWindow)||void 0===r?void 0:r.window)&&void 0!==i&&i.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(t,BJ.get())};t()}}return n.currentPopupAction=null,n})();const Kc=new Map;class GJ extends gk{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,t=this;return g(function*(){let r=Kc.get(t.auth._key());if(!r){try{const o=(yield function HJ(n,e){return sw.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}Kc.set(t.auth._key(),r)}return t.bypassAuthState||Kc.set(t.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,r=this;return g(function*(){if("signInViaRedirect"===e.type)return t().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,t().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return g(function*(){})()}cleanUp(){}}function sw(){return(sw=g(function*(n,e){const t=_k(e),r=mk(n);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(t));return yield r._remove(t),i})).apply(this,arguments)}function qJ(n,e){Kc.set(n._key(),e)}function mk(n){return vi(n._redirectPersistence)}function _k(n){return Cf("pendingRedirect",n.config.apiKey,n.name)}function yk(n,e){return fw.apply(this,arguments)}function fw(){return(fw=g(function*(n,e,t=!1){const r=ut(n),i=qo(r,e),s=yield new GJ(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})).apply(this,arguments)}class YJ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function JJ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ek(n);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Ek(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";t.onError(Fn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ik(e))}saveEventToCache(e){this.cachedEventUids.add(Ik(e)),this.lastProcessedEventTime=Date.now()}}function Ik(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Ek({type:n,error:e}){return"unknown"===n&&"auth/no-auth-event"===e?.code}function XJ(n){return gw.apply(this,arguments)}function gw(){return(gw=g(function*(n,e={}){return qe(n,"GET","/v1/projects",e)})).apply(this,arguments)}const ZJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eX=/^https?/;function mw(){return(mw=g(function*(n){if(n.config.emulator)return;const{authorizedDomains:e}=yield XJ(n);for(const t of e)try{if(nX(t))return}catch{}Tn(n,"unauthorized-domain")})).apply(this,arguments)}function nX(n){const e=Fc(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const s=new URL(n);return""===s.hostname&&""===r?"chrome-extension:"===t&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===t&&s.hostname===r}if(!eX.test(t))return!1;if(ZJ.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const rX=new Lc(3e4,6e4);function wk(){const n=vt().___jsl;if(n?.H)for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}function iX(n){return new Promise((e,t)=>{var r,i,o;function s(){wk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wk(),t(Fn(n,"network-request-failed"))},timeout:rX.get()})}if(null!==(i=null===(r=vt().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(o=vt().gapi)||void 0===o||!o.load){const a=zN("iframefcb");return vt()[a]=()=>{gapi.load?s():t(Fn(n,"network-request-failed"))},function xI(n){return Gc.loadJS(n)}(`${function fY(){return Gc.gapiScript}()}?onload=${a}`).catch(u=>t(u))}s()}}).catch(e=>{throw Ff=null,e})}let Ff=null;function oX(n){return Ff=Ff||iX(n),Ff}const sX=new Lc(5e3,15e3),cX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dX(n){const e=n.config;R(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?fI(e,"emulator/auth/iframe"):`https://${n.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:n.name,v:pa},i=lX.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${kc(r).slice(1)}`}function _w(){return _w=g(function*(n){const e=yield oX(n),t=vt().gapi;return R(t,n,"internal-error"),e.open({where:document.body,url:dX(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cX,dontclear:!0},r=>new Promise(function(){var i=g(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=Fn(n,"network-request-failed"),u=vt().setTimeout(()=>{s(a)},sX.get());function c(){vt().clearTimeout(u),o(r)}r.ping(c).then(c,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),_w.apply(this,arguments)}const fX={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Tk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const wX=encodeURIComponent("fac");function Ck(n,e,t,r,i,o){return yw.apply(this,arguments)}function yw(){return(yw=g(function*(n,e,t,r,i,o){R(n.config.authDomain,n,"auth-domain-config-required"),R(n.config.apiKey,n,"invalid-api-key");const s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:pa,eventId:i};if(e instanceof Hi){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",XW(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,d]of Object.entries(o||{}))s[l]=d}if(e instanceof ek){const l=e.getScopes().filter(d=>""!==d);l.length>0&&(s.scopes=l.join(","))}n.tenantId&&(s.tid=n.tenantId);const a=s;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];const u=yield n._getAppCheckToken(),c=u?`#${wX}=${encodeURIComponent(u)}`:"";return`${TX(n)}?${kc(a).slice(1)}${c}`})).apply(this,arguments)}function TX({config:n}){return n.emulator?fI(n,"emulator/auth/handler"):`https://${n.authDomain}/__/auth/handler`}const vw="webStorageSupport",DX=class CX{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ck,this._completeRedirectFn=yk,this._overrideRedirectResult=qJ}_openPopup(e,t,r,i){var o=this;return g(function*(){var s;mi(null===(s=o.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=yield Ck(e,t,r,Fc(),i);return function yX(n,e,t,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},fX),{width:r.toString(),height:i.toString(),top:o,left:s}),c=rt().toLowerCase();t&&(a=LN(c)?"_blank":t),FN(c)&&(e=e||"http://localhost",u.scrollbars="yes");const l=Object.entries(u).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function nY(n=rt()){var e;return Df(n)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function vX(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}(e||"",a),new Tk(null);const d=window.open(e||"",a,l);R(d,n,"popup-blocked");try{d.focus()}catch{}return new Tk(d)}(e,a,Nf())})()}_openRedirect(e,t,r,i){var o=this;return g(function*(){return yield o._originValidation(e),function fJ(n){vt().location.href=n}(yield Ck(e,t,r,Fc(),i)),new Promise(()=>{})})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(mi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){var t=this;return g(function*(){const r=yield function hX(n){return _w.apply(this,arguments)}(e),i=new YJ(e);return r.register("authEvent",o=>(R(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vw,{type:vw},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[vw];void 0!==s&&t(!!s),Tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function tX(n){return mw.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return GN()||RI()||Df()}};var bk="@firebase/auth";class AX{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return g(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){R(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const PX=D1("authIdTokenMaxAge")||300;let Rk=null;const xX=n=>function(){var e=g(function*(t){const r=t&&(yield t.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>PX)return;const o=r?.token;Rk!==o&&(Rk=o,yield fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))});return function(t){return e.apply(this,arguments)}}();function MX(n=hv()){const e=$i(n,"auth");if(e.isInitialized())return e.getImmediate();const t=function _Y(n,e){const t=$i(n,"auth");if(t.isInitialized()){const i=t.getImmediate();if(Nc(t.getOptions(),e??{}))return i;Tn(i,"already-initialized")}return t.initialize({options:e})}(n,{popupRedirectResolver:DX,persistence:[wJ,cJ,ck]}),r=D1("authTokenSyncURL");if(r){const o=xX(r);(function eJ(n,e,t){dn(n).beforeAuthStateChanged(e,t)})(t,o,()=>o(t.currentUser)),function ZY(n,e,t,r){dn(n).onIdTokenChanged(e,t,r)}(t,s=>o(s))}const i=T1("auth");return i&&function vY(n,e,t){const r=ut(n);R(r._canInitEmulator,r,"emulator-config-failed"),R(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!t?.disableWarnings,o=QN(e),{host:s,port:a}=function IY(n){const e=QN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:YN(r.substr(o.length+1))}}{const[o,s]=r.split(":");return{host:o,port:YN(s)}}}(e);r.config.emulator={url:`${o}//${s}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function EY(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",n):n())}()}(t,`http://${i}`),t}(function lY(n){Gc=n})({loadJS:n=>new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=Fn("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",function NX(){var n,e;return null!==(e=null===(n=document.getElementsByTagName("head"))||void 0===n?void 0:n[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function SX(n){Nr(new _r("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;R(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HN(n)},c=new cY(r,i,o,u);return function yY(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(vi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Nr(new _r("auth-internal",e=>{const t=ut(e.getProvider("auth").getImmediate());return new AX(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xn(bk,"1.6.1",function bX(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(n)),Xn(bk,"1.6.1","esm2017")}("Browser");var M,kX=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yr={},Ew=Ew||{},ne=kX||self;function Uf(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Qc(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var ww="closure_uid_"+(1e9*Math.random()>>>0),VX=0;function FX(n,e,t){return n.call.apply(n.bind,arguments)}function LX(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Xt(n,e,t){return(Xt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?FX:LX).apply(null,arguments)}function Bf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Pt(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function qi(){this.s=this.s,this.o=this.o}qi.prototype.s=!1,qi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function OX(n){Object.prototype.hasOwnProperty.call(n,ww)&&n[ww]||(n[ww]=++VX)}(this)},qi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Pk=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Tw(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function xk(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Uf(r)){const i=n.length||0,o=r.length||0;n.length=i+o;for(let s=0;s<o;s++)n[i+s]=r[s]}else n.push(r)}}function Zt(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Zt.prototype.h=function(){this.defaultPrevented=!0};var BX=function(){if(!ne.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};ne.addEventListener("test",t,e),ne.removeEventListener("test",t,e)}catch{}return n}();function Yc(n){return/^[\s\xa0]*$/.test(n)}function jf(){var n=ne.navigator;return n&&(n=n.userAgent)?n:""}function Fr(n){return-1!=jf().indexOf(n)}function Cw(n){return Cw[" "](n),n}Cw[" "]=function(){};var Aw,n,$X=Fr("Opera"),Ia=Fr("Trident")||Fr("MSIE"),Mk=Fr("Edge"),Dw=Mk||Ia,Nk=Fr("Gecko")&&!(-1!=jf().toLowerCase().indexOf("webkit")&&!Fr("Edge"))&&!(Fr("Trident")||Fr("MSIE"))&&!Fr("Edge"),GX=-1!=jf().toLowerCase().indexOf("webkit")&&!Fr("Edge");function kk(){var n=ne.document;return n?n.documentMode:void 0}e:{var bw="",Sw=(n=jf(),Nk?/rv:([^\);]+)(\)|;)/.exec(n):Mk?/Edge\/([\d\.]+)/.exec(n):Ia?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):GX?/WebKit\/(\S+)/.exec(n):$X?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Sw&&(bw=Sw?Sw[1]:""),Ia){var Rw=kk();if(null!=Rw&&Rw>parseFloat(bw)){Aw=String(Rw);break e}}Aw=bw}var HX=ne.document&&Ia&&(kk()||parseInt(Aw,10))||void 0;function Jc(n,e){if(Zt.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Nk){e:{try{Cw(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:qX[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Jc.$.h.call(this)}}Pt(Jc,Zt);var qX={2:"touch",3:"pen",4:"mouse"};Jc.prototype.h=function(){Jc.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Xc="closure_listenable_"+(1e6*Math.random()|0),zX=0;function WX(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++zX,this.fa=this.ia=!1}function $f(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function xw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Vk(n){const e={};for(const t in n)e[t]=n[t];return e}const Fk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Lk(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<Fk.length;o++)t=Fk[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Gf(n){this.src=n,this.g={},this.h=0}function Mw(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=Pk(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&($f(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Nw(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.fa&&o.listener==e&&o.capture==!!t&&o.la==r)return i}return-1}Gf.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var s=Nw(n,e,r,i);return-1<s?(e=n[s],t||(e.ia=!1)):((e=new WX(e,this.src,o,!!r,i)).ia=t,n.push(e)),e};var kw="closure_lm_"+(1e6*Math.random()|0),Ow={};function Uk(n,e,t,r,i){if(r&&r.once)return jk(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Uk(n,e[o],t,r,i);return null}return t=Uw(t),n&&n[Xc]?n.O(e,t,Qc(r)?!!r.capture:!!r,i):Bk(n,e,t,!1,r,i)}function Bk(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var s=Qc(i)?!!i.capture:!!i,a=Fw(n);if(a||(n[kw]=a=new Gf(n)),(t=a.add(e,t,r,s,o)).proxy)return t;if(r=function QX(){const e=YX;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)BX||(i=s),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Gk(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function jk(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)jk(n,e[o],t,r,i);return null}return t=Uw(t),n&&n[Xc]?n.P(e,t,Qc(r)?!!r.capture:!!r,i):Bk(n,e,t,!0,r,i)}function $k(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)$k(n,e[o],t,r,i);else r=Qc(r)?!!r.capture:!!r,t=Uw(t),n&&n[Xc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Nw(o=n.g[e],t,r,i))&&($f(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=Fw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Nw(e,t,r,i)),(t=-1<n?e[n]:null)&&Vw(t))}function Vw(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Xc])Mw(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Gk(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Fw(e))?(Mw(t,n),0==t.h&&(t.src=null,e[kw]=null)):$f(n)}}}function Gk(n){return n in Ow?Ow[n]:Ow[n]="on"+n}function YX(n,e){if(n.fa)n=!0;else{e=new Jc(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Vw(n),n=t.call(r,e)}return n}function Fw(n){return(n=n[kw])instanceof Gf?n:null}var Lw="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uw(n){return"function"==typeof n?n:(n[Lw]||(n[Lw]=function(e){return n.handleEvent(e)}),n[Lw])}function xt(){qi.call(this),this.i=new Gf(this),this.S=this,this.J=null}function Bt(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Zt(e,n);else if(e instanceof Zt)e.target=e.target||n;else{var i=e;Lk(e=new Zt(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var s=e.g=t[o];i=Hf(s,r,!0,e)&&i}if(i=Hf(s=e.g=n,r,!0,e)&&i,i=Hf(s,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Hf(s=e.g=t[o],r,!1,e)&&i}function Hf(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==t){var a=s.listener,u=s.la||s.src;s.ia&&Mw(n.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Pt(xt,qi),xt.prototype[Xc]=!0,xt.prototype.removeEventListener=function(n,e,t,r){$k(this,n,e,t,r)},xt.prototype.N=function(){if(xt.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)$f(t[r]);delete n.g[e],n.h--}}this.J=null},xt.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},xt.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Bw=ne.JSON.stringify;function XX(){var n=jw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Hk=new class JX{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new eZ,n=>n.reset());class eZ{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function tZ(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function nZ(n){ne.setTimeout(()=>{throw n},0)}let Zc,el=!1,jw=new class ZX{constructor(){this.h=this.g=null}add(e,t){const r=Hk.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},qk=()=>{const n=ne.Promise.resolve(void 0);Zc=()=>{n.then(rZ)}};var rZ=()=>{for(var n;n=XX();){try{n.h.call(n.g)}catch(t){nZ(t)}var e=Hk;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}el=!1};function qf(n,e){xt.call(this),this.h=n||1,this.g=e||ne,this.j=Xt(this.qb,this),this.l=Date.now()}function $w(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Gw(n,e,t){if("function"==typeof n)t&&(n=Xt(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Xt(n.handleEvent,n)}return 2147483647<Number(e)?-1:ne.setTimeout(n,e||0)}function zk(n){n.g=Gw(()=>{n.g=null,n.i&&(n.i=!1,zk(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Pt(qf,xt),(M=qf.prototype).ga=!1,M.T=null,M.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Bt(this,"tick"),this.ga&&($w(this),this.start()))}},M.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},M.N=function(){qf.$.N.call(this),$w(this),delete this.g};class iZ extends qi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zk(this)}N(){super.N(),this.g&&(ne.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tl(n){qi.call(this),this.h=n,this.g={}}Pt(tl,qi);var Wk=[];function Kk(n,e,t,r){Array.isArray(t)||(t&&(Wk[0]=t.toString()),t=Wk);for(var i=0;i<t.length;i++){var o=Uk(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function Qk(n){xw(n.g,function(e,t){this.g.hasOwnProperty(t)&&Vw(e)},n),n.g={}}function zf(){this.g=!0}function Ea(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function uZ(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Bw(t)}catch{return e}}(n,t)+(r?" "+r:"")})}tl.prototype.N=function(){tl.$.N.call(this),Qk(this)},tl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zf.prototype.Ea=function(){this.g=!1},zf.prototype.info=function(){};var zo={},Yk=null;function Wf(){return Yk=Yk||new xt}function Jk(n){Zt.call(this,zo.Ta,n)}function nl(n){const e=Wf();Bt(e,new Jk(e))}function Xk(n,e){Zt.call(this,zo.STAT_EVENT,n),this.stat=e}function fn(n){const e=Wf();Bt(e,new Xk(e,n))}function Zk(n,e){Zt.call(this,zo.Ua,n),this.size=e}function rl(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return ne.setTimeout(function(){n()},e)}zo.Ta="serverreachability",Pt(Jk,Zt),zo.STAT_EVENT="statevent",Pt(Xk,Zt),zo.Ua="timingevent",Pt(Zk,Zt);var Kf={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},eO={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Hw(){}function nO(){}Hw.prototype.h=null;var Ww,il={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function qw(){Zt.call(this,"d")}function zw(){Zt.call(this,"c")}function Qf(){}function ol(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new tl(this),this.P=cZ,this.V=new qf(n=Dw?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new rO}function rO(){this.i=null,this.g="",this.h=!1}Pt(qw,Zt),Pt(zw,Zt),Pt(Qf,Hw),Qf.prototype.g=function(){return new XMLHttpRequest},Qf.prototype.i=function(){return{}},Ww=new Qf;var cZ=45e3,iO={},Kw={};function Qw(n,e,t){n.L=1,n.A=Zf(Ei(e)),n.u=t,n.S=!0,oO(n,null)}function oO(n,e){n.G=Date.now(),sl(n),n.B=Ei(n.A);var t=n.B,r=n.W;Array.isArray(r)||(r=[String(r)]),gO(t.i,"t",r),n.o=0,t=n.l.J,n.h=new rO,n.g=UO(n.l,t?e:null,!n.u),0<n.O&&(n.M=new iZ(Xt(n.Pa,n,n.g),n.O)),Kk(n.U,n.g,"readystatechange",n.nb),e=n.I?Vk(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),nl(),function oZ(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");s=2<=d.length&&"type"==d[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+s})}(n.j,n.v,n.B,n.m,n.W,n.u)}function sO(n){return!!n.g&&"GET"==n.v&&2!=n.L&&n.l.Ha}function aO(n,e,t){let i,r=!0;for(;!n.J&&n.o<t.length;){if(i=lZ(n,t),i==Kw){4==e&&(n.s=4,fn(14),r=!1),Ea(n.j,n.m,null,"[Incomplete Response]");break}if(i==iO){n.s=4,fn(15),Ea(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ea(n.j,n.m,i,null),Yw(n,i)}sO(n)&&0!=n.o&&(n.h.g=n.h.g.slice(n.o),n.o=0),4!=e||0!=t.length||n.h.h||(n.s=1,fn(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),rT(e),e.M=!0,fn(11))):(Ea(n.j,n.m,t,"[Invalid Chunked Response]"),Wo(n),al(n))}function lZ(n,e){var t=n.o,r=e.indexOf("\n",t);return-1==r?Kw:(t=Number(e.substring(t,r)),isNaN(t)?iO:(r+=1)+t>e.length?Kw:(e=e.slice(r,r+t),n.o=r+t,e))}function sl(n){n.Y=Date.now()+n.P,uO(n,n.P)}function uO(n,e){if(null!=n.C)throw Error("WatchDog timer not null");n.C=rl(Xt(n.lb,n),e)}function Yf(n){n.C&&(ne.clearTimeout(n.C),n.C=null)}function al(n){0==n.l.H||n.J||OO(n.l,n)}function Wo(n){Yf(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,$w(n.V),Qk(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Yw(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Jw(t.i,n)))if(!n.K&&Jw(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;op(t),rp(t)}nT(t),fn(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=rl(Xt(t.ib,t),6e3));if(1>=yO(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Qo(t,11)}else if((n.K||t.g==n)&&op(t),!Yc(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(t.V=c[0],c=c[1],2==t.H)if("c"==c[0]){t.K=c[1],t.pa=c[2];const l=c[3];null!=l&&(t.ra=l,t.l.info("VER="+t.ra));const d=c[4];null!=d&&(t.Ga=d,t.l.info("SVER="+t.Ga));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(t.L=r=1.5*h,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const f=n.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var o=r.i;o.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Xw(o,o.h),o.h=null))}if(r.F){const m=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(r.Da=m,ze(r.I,r.F,m))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var s=n;if((r=t).wa=LO(r,r.J?r.pa:null,r.Y),s.K){vO(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(Yf(a),sl(a)),r.g=s}else NO(r);0<t.j.length&&ip(t)}else"stop"!=c[0]&&"close"!=c[0]||Qo(t,7);else 3==t.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Qo(t,7):tT(t):"noop"!=c[0]&&t.h&&t.h.Aa(c),t.A=0)}nl()}catch{}}function cO(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Uf(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function hZ(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Uf(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function dZ(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Uf(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}(M=ol.prototype).setTimeout=function(n){this.P=n},M.nb=function(n){n=n.target;const e=this.M;e&&3==Lr(n)?e.l():this.Pa(n)},M.Pa=function(n){try{if(n==this.g)e:{const l=Lr(this.g);var e=this.g.Ia();if(this.g.da(),!(3>l)&&(3!=l||Dw||this.g&&(this.h.h||this.g.ja()||bO(this.g)))){this.J||4!=l||7==e||nl(),Yf(this);var t=this.g.da();this.ca=t;t:if(sO(this)){var r=bO(this.g);n="";var i=r.length,o=4==Lr(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Wo(this),al(this);var s="";break t}this.h.i=new ne.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=n,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==t,function sZ(n,e,t,r,i,o,s){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+s})}(this.j,this.v,this.B,this.m,this.W,l,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yc(a)){var c=a;break t}}c=null}if(!(t=c)){this.i=!1,this.s=3,fn(12),Wo(this),al(this);break e}Ea(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yw(this,t)}this.S?(aO(this,l,s),Dw&&this.i&&3==l&&(Kk(this.U,this.V,"tick",this.mb),this.V.start())):(Ea(this.j,this.m,s,null),Yw(this,s)),4==l&&Wo(this),this.i&&!this.J&&(4==l?OO(this.l,this):(this.i=!1,sl(this)))}else(function PZ(n){const e={};n=(n.g&&2<=Lr(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Yc(n[r]))continue;var t=tZ(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const o=e[i]||[];e[i]=o,o.push(t)}!function KX(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<s.indexOf("Unknown SID")?(this.s=3,fn(12)):(this.s=0,fn(13)),Wo(this),al(this)}}}catch{}},M.mb=function(){if(this.g){var n=Lr(this.g),e=this.g.ja();this.o<e.length&&(Yf(this),aO(this,n,e),this.i&&4!=n&&sl(this))}},M.cancel=function(){this.J=!0,Wo(this)},M.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(function aZ(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(nl(),fn(17)),Wo(this),this.s=2,al(this)):uO(this,this.Y-n)};var lO=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ko(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ko){this.h=n.h,Jf(this,n.j),this.s=n.s,this.g=n.g,Xf(this,n.m),this.l=n.l;var e=n.i,t=new ll;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),dO(this,t),this.o=n.o}else n&&(e=String(n).match(lO))?(this.h=!1,Jf(this,e[1]||"",!0),this.s=ul(e[2]||""),this.g=ul(e[3]||"",!0),Xf(this,e[4]),this.l=ul(e[5]||"",!0),dO(this,e[6]||"",!0),this.o=ul(e[7]||"")):(this.h=!1,this.i=new ll(null,this.h))}function Ei(n){return new Ko(n)}function Jf(n,e,t){n.j=t?ul(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Xf(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function dO(n,e,t){e instanceof ll?(n.i=e,function vZ(n,e){e&&!n.j&&(zi(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(fO(this,r),gO(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=cl(e,_Z)),n.i=new ll(e,n.h))}function ze(n,e,t){n.i.set(e,t)}function Zf(n){return ze(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ul(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function cl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,pZ),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function pZ(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ko.prototype.toString=function(){var n=[],e=this.j;e&&n.push(cl(e,hO,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(cl(e,hO,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(cl(t,"/"==t.charAt(0)?mZ:gZ,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",cl(t,yZ)),n.join("")};var hO=/[#\/\?@]/g,gZ=/[#\?:]/g,mZ=/[#\?]/g,_Z=/[#\?@]/g,yZ=/#/g;function ll(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function zi(n){n.g||(n.g=new Map,n.h=0,n.i&&function fZ(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function fO(n,e){zi(n),e=wa(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function pO(n,e){return zi(n),e=wa(n,e),n.g.has(e)}function gO(n,e,t){fO(n,e),0<t.length&&(n.i=null,n.g.set(wa(n,e),Tw(t)),n.h+=t.length)}function wa(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function mO(n){this.l=n||EZ,n=ne.PerformanceNavigationTiming?0<(n=ne.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(ne.g&&ne.g.Ka&&ne.g.Ka()&&ne.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(M=ll.prototype).add=function(n,e){zi(this),this.i=null,n=wa(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},M.forEach=function(n,e){zi(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},M.ta=function(){zi(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let o=0;o<i.length;o++)t.push(e[r])}return t},M.Z=function(n){zi(this);let e=[];if("string"==typeof n)pO(this,n)&&(e=e.concat(this.g.get(wa(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},M.set=function(n,e){return zi(this),this.i=null,pO(this,n=wa(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},M.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},M.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),n.push(i)}}return this.i=n.join("&")};var EZ=10;function _O(n){return!!n.h||!!n.g&&n.g.size>=n.j}function yO(n){return n.h?1:n.g?n.g.size:0}function Jw(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Xw(n,e){n.g?n.g.add(e):n.h=e}function vO(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function IO(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Tw(n.i)}function TZ(){this.g=new class{stringify(n){return ne.JSON.stringify(n,void 0)}parse(n){return ne.JSON.parse(n,void 0)}}}function CZ(n,e,t){const r=t||"";try{cO(n,function(i,o){let s=i;Qc(i)&&(s=Bw(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ep(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function dl(n){this.l=n.ec||null,this.j=n.ob||!1}function tp(n,e){xt.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Zw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mO.prototype.cancel=function(){if(this.i=IO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Pt(dl,Hw),dl.prototype.g=function(){return new tp(this.l,this.j)},dl.prototype.i=function(n){return function(){return n}}({}),Pt(tp,xt);var Zw=0;function EO(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function hl(n){n.readyState=4,n.l=null,n.j=null,n.A=null,fl(n)}function fl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(M=tp.prototype).open=function(n,e){if(this.readyState!=Zw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,fl(this)},M.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||ne).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},M.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hl(this)),this.readyState=Zw},M.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,fl(this)),this.g&&(this.readyState=3,fl(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ne.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;EO(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},M.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?hl(this):fl(this),3==this.readyState&&EO(this)}},M.Za=function(n){this.g&&(this.response=this.responseText=n,hl(this))},M.Ya=function(n){this.g&&(this.response=n,hl(this))},M.ka=function(){this.g&&hl(this)},M.setRequestHeader=function(n,e){this.v.append(n,e)},M.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},M.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(tp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var AZ=ne.JSON.parse;function it(n){xt.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=wO,this.L=this.M=!1}Pt(it,xt);var wO="",bZ=/^https?$/i,SZ=["POST","PUT"];function TO(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,CO(n),np(n)}function CO(n){n.F||(n.F=!0,Bt(n,"complete"),Bt(n,"error"))}function DO(n){if(n.h&&typeof Ew<"u"&&(!n.C[1]||4!=Lr(n)||2!=n.da()))if(n.v&&4==Lr(n))Gw(n.La,0,n);else if(Bt(n,"readystatechange"),4==Lr(n)){n.h=!1;try{const s=n.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===s){var i=String(n.I).match(lO)[1]||null;!i&&ne.self&&ne.self.location&&(i=ne.self.location.protocol.slice(0,-1)),r=!bZ.test(i?i.toLowerCase():"")}t=r}if(t)Bt(n,"complete"),Bt(n,"success");else{n.m=6;try{var o=2<Lr(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",CO(n)}}finally{np(n)}}}function np(n,e){if(n.g){AO(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Bt(n,"ready");try{t.onreadystatechange=r}catch{}}}function AO(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(ne.clearTimeout(n.A),n.A=null)}function Lr(n){return n.g?n.g.readyState:0}function bO(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case wO:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function SO(n){let e="";return xw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function eT(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=SO(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ze(n,e,t))}function pl(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function RO(n){this.Ga=0,this.j=[],this.l=new zf,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=pl("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=pl("baseRetryDelayMs",5e3,n),this.hb=pl("retryDelaySeedMs",1e4,n),this.eb=pl("forwardChannelMaxRetries",2,n),this.xa=pl("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new mO(n&&n.concurrentRequestLimit),this.Ja=new TZ,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function tT(n){if(PO(n),3==n.H){var e=n.W++,t=Ei(n.I);if(ze(t,"SID",n.K),ze(t,"RID",e),ze(t,"TYPE","terminate"),gl(n,t),(e=new ol(n,n.l,e)).L=2,e.A=Zf(Ei(t)),t=!1,ne.navigator&&ne.navigator.sendBeacon)try{t=ne.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&ne.Image&&((new Image).src=e.A,t=!0),t||(e.g=UO(e.l,null),e.g.ha(e.A)),e.G=Date.now(),sl(e)}FO(n)}function rp(n){n.g&&(rT(n),n.g.cancel(),n.g=null)}function PO(n){rp(n),n.u&&(ne.clearTimeout(n.u),n.u=null),op(n),n.i.cancel(),n.m&&("number"==typeof n.m&&ne.clearTimeout(n.m),n.m=null)}function ip(n){if(!_O(n.i)&&!n.m){n.m=!0;var e=n.Na;Zc||qk(),el||(Zc(),el=!0),jw.add(e,n),n.C=0}}function xO(n,e){var t;t=e?e.m:n.W++;const r=Ei(n.I);ze(r,"SID",n.K),ze(r,"RID",t),ze(r,"AID",n.V),gl(n,r),n.o&&n.s&&eT(r,n.o,n.s),t=new ol(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=MO(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Xw(n.i,t),Qw(t,r,e)}function gl(n,e){n.na&&xw(n.na,function(t,r){ze(e,r,t)}),n.h&&cO({},function(t,r){ze(e,r,t)})}function MO(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Xt(n.h.Va,n.h,n):null;e:{var i=n.j;let o=-1;for(;;){const s=["count="+t];-1==o?0<t?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<t;u++){let c=i[u].g;const l=i[u].map;if(c-=o,0>c)o=Math.max(0,i[u].g-100),a=!1;else try{CZ(l,s,"req"+c+"_")}catch{r&&r(l)}}if(a){r=s.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function NO(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Zc||qk(),el||(Zc(),el=!0),jw.add(e,n),n.A=0}}function nT(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=rl(Xt(n.Ma,n),VO(n,n.A)),n.A++,0))}function rT(n){null!=n.B&&(ne.clearTimeout(n.B),n.B=null)}function kO(n){n.g=new ol(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Ei(n.wa);ze(e,"RID","rpc"),ze(e,"SID",n.K),ze(e,"AID",n.V),ze(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&ze(e,"TO",n.qa),ze(e,"TYPE","xmlhttp"),gl(n,e),n.o&&n.s&&eT(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=Zf(Ei(e)),t.u=null,t.S=!0,oO(t,n)}function op(n){null!=n.v&&(ne.clearTimeout(n.v),n.v=null)}function OO(n,e){var t=null;if(n.g==e){op(n),rT(n),n.g=null;var r=2}else{if(!Jw(n.i,e))return;t=e.F,vO(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.u?e.u.length:0,e=Date.now()-e.G;var i=n.C;Bt(r=Wf(),new Zk(r,t)),ip(n)}else NO(n);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function xZ(n,e){return!(yO(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=rl(Xt(n.Na,n,e),VO(n,n.C)),n.C++,0)))}(n,e)||2==r&&nT(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Qo(n,5);break;case 4:Qo(n,10);break;case 3:Qo(n,6);break;default:Qo(n,2)}}function VO(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Qo(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Xt(n.pb,n);t||(t=new Ko("//www.google.com/images/cleardot.gif"),ne.location&&"http"==ne.location.protocol||Jf(t,"https"),Zf(t)),function DZ(n,e){const t=new zf;if(ne.Image){const r=new Image;r.onload=Bf(ep,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Bf(ep,t,r,"TestLoadImage: error",!1,e),r.onabort=Bf(ep,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Bf(ep,t,r,"TestLoadImage: timeout",!1,e),ne.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else fn(2);n.H=0,n.h&&n.h.za(e),FO(n),PO(n)}function FO(n){if(n.H=0,n.ma=[],n.h){const e=IO(n.i);(0!=e.length||0!=n.j.length)&&(xk(n.ma,e),xk(n.ma,n.j),n.i.i.length=0,Tw(n.j),n.j.length=0),n.h.ya()}}function LO(n,e,t){var r=t instanceof Ko?Ei(t):new Ko(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Xf(r,r.m);else{var i=ne.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Ko(null);r&&Jf(o,r),e&&(o.g=e),i&&Xf(o,i),t&&(o.l=t),r=o}return e=n.Da,(t=n.F)&&e&&ze(r,t,e),ze(r,"VER",n.ra),gl(n,r),r}function UO(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new it(n.Ha&&!n.va?new dl({ob:t}):n.va)).Oa(n.J),e}function BO(){}function sp(){if(Ia&&!(10<=Number(HX)))throw Error("Environmental error: no available transport.")}function Ln(n,e){xt.call(this),this.g=new RO(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Yc(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yc(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ta(this)}function jO(n){qw.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function $O(){zw.call(this),this.status=1}function Ta(n){this.g=n}function vr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function iT(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var o=n.g[3],s=(e=n.g[0])+(o^(t=n.g[1])&((i=n.g[2])^o))+r[0]+3614090360&4294967295;s=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=(t=(i=(o=(e=t+(s<<7&4294967295|s>>>25))+((s=o+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(t^o&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^i&(o^e))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^t&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(t^o&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^i&(o^e))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^t&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(t^o&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^i&(o^e))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=e+(o^t&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(t^o&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=t+(e^i&(o^e))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=e+(i^o&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^t&(o^e))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^t&(o^e))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^t&(o^e))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=e+(i^o&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(e^t&(o^e))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=t+(o^e&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=e+(t^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=t+(i^o^e)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=e+(t^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=t+(i^o^e)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=e+(t^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=t+(i^o^e)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=e+(t^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^e^t)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=t+(i^o^e)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=e+(i^(t|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~t))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=t+(o^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(t|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~t))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=t+(o^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=e+(i^(t|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(e^(o|~t))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=t+(o^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(e=t+((s=e+(i^(t|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(e^(o|~t))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+o&4294967295}function xe(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var o=0|n[i];r&&o==e||(t[i]=o,r=!1)}this.g=t}(M=it.prototype).Oa=function(n){this.M=n},M.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ww.g(),this.C=function tO(n){return n.h||(n.h=n.i())}(this.u?this.u:Ww),this.g.onreadystatechange=Xt(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(o){return void TO(this,o)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const o of r.keys())t.set(o,r.get(o))}r=Array.from(t.keys()).find(o=>"content-type"==o.toLowerCase()),i=ne.FormData&&n instanceof ne.FormData,!(0<=Pk(SZ,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of t)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{AO(this),0<this.B&&((this.L=function RZ(n){return Ia&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xt(this.ua,this)):this.A=Gw(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){TO(this,o)}},M.ua=function(){typeof Ew<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Bt(this,"timeout"),this.abort(8))},M.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Bt(this,"complete"),Bt(this,"abort"),np(this))},M.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),np(this,!0)),it.$.N.call(this)},M.La=function(){this.s||(this.G||this.v||this.l?DO(this):this.kb())},M.kb=function(){DO(this)},M.isActive=function(){return!!this.g},M.da=function(){try{return 2<Lr(this)?this.g.status:-1}catch{return-1}},M.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},M.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),AZ(e)}},M.Ia=function(){return this.m},M.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(M=RO.prototype).ra=8,M.H=1,M.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new ol(this,this.l,n);let o=this.s;if(this.U&&(o?(o=Vk(o),Lk(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=MO(this,i,e),ze(t=Ei(this.I),"RID",n),ze(t,"CVER",22),this.F&&ze(t,"X-HTTP-Session-Id",this.F),gl(this,t),o&&(this.O?e="headers="+encodeURIComponent(String(SO(o)))+"&"+e:this.o&&eT(t,this.o,o)),Xw(this.i,i),this.bb&&ze(t,"TYPE","init"),this.P?(ze(t,"$req",e),ze(t,"SID","null"),i.aa=!0,Qw(i,t,null)):Qw(i,t,e),this.H=2}}else 3==this.H&&(n?xO(this,n):0==this.j.length||_O(this.i)||xO(this))},M.Ma=function(){if(this.u=null,kO(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=rl(Xt(this.jb,this),n)}},M.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,fn(10),rp(this),kO(this))},M.ib=function(){null!=this.v&&(this.v=null,rp(this),nT(this),fn(19))},M.pb=function(n){n?(this.l.info("Successfully pinged google.com"),fn(2)):(this.l.info("Failed to ping google.com"),fn(1))},M.isActive=function(){return!!this.h&&this.h.isActive(this)},(M=BO.prototype).Ba=function(){},M.Aa=function(){},M.za=function(){},M.ya=function(){},M.isActive=function(){return!0},M.Va=function(){},sp.prototype.g=function(n,e){return new Ln(n,e)},Pt(Ln,xt),Ln.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;fn(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=LO(n,null,n.Y),ip(n)},Ln.prototype.close=function(){tT(this.g)},Ln.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Bw(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&ip(e)},Ln.prototype.N=function(){this.g.h=null,delete this.j,tT(this.g),delete this.g,Ln.$.N.call(this)},Pt(jO,qw),Pt($O,zw),Pt(Ta,BO),Ta.prototype.Ba=function(){Bt(this.g,"a")},Ta.prototype.Aa=function(n){Bt(this.g,new jO(n))},Ta.prototype.za=function(n){Bt(this.g,new $O)},Ta.prototype.ya=function(){Bt(this.g,"b")},Pt(vr,function MZ(){this.blockSize=-1}),vr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},vr.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(0==i)for(;o<=t;)iT(this,n,o),o+=this.blockSize;if("string"==typeof n){for(;o<e;)if(r[i++]=n.charCodeAt(o++),i==this.blockSize){iT(this,r),i=0;break}}else for(;o<e;)if(r[i++]=n[o++],i==this.blockSize){iT(this,r),i=0;break}}this.h=i,this.i+=e},vr.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var NZ={};function oT(n){return-128<=n&&128>n?function jX(n,e){var t=NZ;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new xe([0|e],0>e?-1:0)}):new xe([0|n],0>n?-1:0)}function Ur(n){if(isNaN(n)||!isFinite(n))return Ca;if(0>n)return jt(Ur(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=sT;return new xe(e,0)}var sT=4294967296,Ca=oT(0),aT=oT(1),HO=oT(16777216);function wi(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function er(n){return-1==n.h}function jt(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new xe(t,~n.h).add(aT)}function ap(n,e){return n.add(jt(e))}function up(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function ml(n,e){this.g=n,this.h=e}function cp(n,e){if(wi(e))throw Error("division by zero");if(wi(n))return new ml(Ca,Ca);if(er(n))return e=cp(jt(n),e),new ml(jt(e.g),jt(e.h));if(er(e))return e=cp(n,jt(e)),new ml(jt(e.g),e.h);if(30<n.g.length){if(er(n)||er(e))throw Error("slowDivide_ only works with positive integers.");for(var t=aT,r=e;0>=r.X(n);)t=qO(t),r=qO(r);var i=Da(t,1),o=Da(r,1);for(r=Da(r,2),t=Da(t,2);!wi(r);){var s=o.add(r);0>=s.X(n)&&(i=i.add(t),o=s),r=Da(r,1),t=Da(t,1)}return e=ap(n,i.R(e)),new ml(i,e)}for(i=Ca;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),s=(o=Ur(t)).R(e);er(s)||0<s.X(n);)s=(o=Ur(t-=r)).R(e);wi(o)&&(o=aT),i=i.add(o),n=ap(n,s)}return new ml(i,n)}function qO(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new xe(t,n.h)}function Da(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],o=0;o<r;o++)i[o]=0<e?n.D(o+t)>>>e|n.D(o+t+1)<<32-e:n.D(o+t);return new xe(i,n.h)}(M=xe.prototype).ea=function(){if(er(this))return-jt(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:sT+r)*e,e*=sT}return n},M.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(wi(this))return"0";if(er(this))return"-"+jt(this).toString(n);for(var e=Ur(Math.pow(n,6)),t=this,r="";;){var i=cp(t,e).g,o=((0<(t=ap(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(wi(t=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},M.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},M.X=function(n){return er(n=ap(this,n))?-1:wi(n)?0:1},M.abs=function(){return er(this)?jt(this):this},M.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var o=r+(65535&this.D(i))+(65535&n.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=s>>>16,t[i]=(s&=65535)<<16|(o&=65535)}return new xe(t,-2147483648&t[t.length-1]?-1:0)},M.R=function(n){if(wi(this)||wi(n))return Ca;if(er(this))return er(n)?jt(this).R(jt(n)):jt(jt(this).R(n));if(er(n))return jt(this.R(jt(n)));if(0>this.X(HO)&&0>n.X(HO))return Ur(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=n.D(i)>>>16,u=65535&n.D(i);t[2*r+2*i]+=s*u,up(t,2*r+2*i),t[2*r+2*i+1]+=o*u,up(t,2*r+2*i+1),t[2*r+2*i+1]+=s*a,up(t,2*r+2*i+1),t[2*r+2*i+2]+=o*a,up(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new xe(t,0)},M.gb=function(n){return cp(this,n).h},M.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new xe(t,this.h&n.h)},M.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new xe(t,this.h|n.h)},M.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new xe(t,this.h^n.h)},sp.prototype.createWebChannel=sp.prototype.g,Ln.prototype.send=Ln.prototype.u,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,Kf.NO_ERROR=0,Kf.TIMEOUT=8,Kf.HTTP_ERROR=6,eO.COMPLETE="complete",nO.EventType=il,il.OPEN="a",il.CLOSE="b",il.ERROR="c",il.MESSAGE="d",xt.prototype.listen=xt.prototype.O,it.prototype.listenOnce=it.prototype.P,it.prototype.getLastError=it.prototype.Sa,it.prototype.getLastErrorCode=it.prototype.Ia,it.prototype.getStatus=it.prototype.da,it.prototype.getResponseJson=it.prototype.Wa,it.prototype.getResponseText=it.prototype.ja,it.prototype.send=it.prototype.ha,it.prototype.setWithCredentials=it.prototype.Oa,vr.prototype.digest=vr.prototype.l,vr.prototype.reset=vr.prototype.reset,vr.prototype.update=vr.prototype.j,xe.prototype.add=xe.prototype.add,xe.prototype.multiply=xe.prototype.R,xe.prototype.modulo=xe.prototype.gb,xe.prototype.compare=xe.prototype.X,xe.prototype.toNumber=xe.prototype.ea,xe.prototype.toString=xe.prototype.toString,xe.prototype.getBits=xe.prototype.D,xe.fromNumber=Ur,xe.fromString=function GO(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return jt(GO(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ur(Math.pow(e,8)),r=Ca,i=0;i<n.length;i+=8){var o=Math.min(8,n.length-i),s=parseInt(n.substring(i,i+o),e);8>o?(o=Ur(Math.pow(e,o)),r=r.R(o).add(Ur(s))):r=(r=r.R(t)).add(Ur(s))}return r};var kZ=yr.createWebChannelTransport=function(){return new sp},OZ=yr.getStatEventTarget=function(){return Wf()},uT=yr.ErrorCode=Kf,VZ=yr.EventType=eO,FZ=yr.Event=zo,zO=yr.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},lp=(yr.FetchXmlHttpFactory=dl,yr.WebChannel=nO),LZ=yr.XhrIo=it,UZ=yr.Md5=vr,Aa=yr.Integer=xe;const WO="@firebase/firestore";class Mt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");let ba="10.8.1";const Wi=new gf("@firebase/firestore");function Sa(){return Wi.logLevel}function D(n,...e){if(Wi.logLevel<=pe.DEBUG){const t=e.map(cT);Wi.debug(`Firestore (${ba}): ${n}`,...t)}}function ct(n,...e){if(Wi.logLevel<=pe.ERROR){const t=e.map(cT);Wi.error(`Firestore (${ba}): ${n}`,...t)}}function Un(n,...e){if(Wi.logLevel<=pe.WARN){const t=e.map(cT);Wi.warn(`Firestore (${ba}): ${n}`,...t)}}function cT(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function O(n="Unexpected state"){const e=`FIRESTORE (${ba}) INTERNAL ASSERTION FAILED: `+n;throw ct(e),new Error(e)}function F(n,e){n||O()}function P(n,e){return n}const E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class A extends mr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class At{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class KO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Mt.UNAUTHENTICATED))}shutdown(){}}class jZ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $Z{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let s=new At;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new At,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(g(function*(){yield c.promise,yield o(r.currentUser)}))},u=c=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new At)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(F("string"==typeof r.accessToken),new KO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return F(null===e||"string"==typeof e),new Mt(e)}}class GZ{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class HZ{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new GZ(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qZ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=o=>{null!=o.error&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,D("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(F("string"==typeof t.token),this.R=t.token,new QO(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function zZ(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class YO{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=zZ(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function ee(n,e){return n<e?-1:n>e?1:0}function Ra(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}class Ze{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new A(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new A(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new A(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new A(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ze.fromMillis(Date.now())}static fromDate(e){return Ze.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ze(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class U{constructor(e){this.timestamp=e}static fromTimestamp(e){return new U(e)}static min(){return new U(new Ze(0,0))}static max(){return new U(new Ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class _l{constructor(e,t,r){void 0===t?t=0:t>e.length&&O(),void 0===r?r=e.length-t:r>e.length-t&&O(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===_l.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _l?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class _e extends _l{construct(e,t,r){return new _e(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new A(E.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new _e(t)}static emptyPath(){return new _e([])}}const WZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends _l{construct(e,t,r){return new Qe(e,t,r)}static isValidIdentifier(e){return WZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qe(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new A(E.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new A(E.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new A(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new A(E.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qe(t)}static emptyPath(){return new Qe([])}}class x{constructor(e){this.path=e}static fromPath(e){return new x(_e.fromString(e))}static fromName(e){return new x(_e.fromString(e).popFirst(5))}static empty(){return new x(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_e.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return _e.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new x(new _e(e.slice()))}}function ZO(n){return new Bn(n.readTime,n.key,-1)}class Bn{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Bn(U.min(),x.empty(),-1)}static max(){return new Bn(U.max(),x.empty(),-1)}}function dT(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=x.comparator(n.documentKey,e.documentKey),0!==t?t:ee(n.largestBatchId,e.largestBatchId))}const eV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YZ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ki(n){return hT.apply(this,arguments)}function hT(){return hT=g(function*(n){if(n.code!==E.FAILED_PRECONDITION||n.message!==eV)throw n;D("LocalStore","Unexpectedly lost primary lease")}),hT.apply(this,arguments)}class v{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&O(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new v((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof v?t:v.resolve(t)}catch(t){return v.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):v.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):v.reject(t)}static resolve(e){return new v((t,r)=>{t(e)})}static reject(e){return new v((t,r)=>{r(e)})}static waitFor(e){return new v((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=v.resolve(!1);for(const r of e)t=t.next(i=>i?v.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new v((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const c=u;t(e[c]).next(l=>{s[c]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,t){return new v((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class dp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new At,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new yl(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=fT(r.target.error);this.V.reject(new yl(e,i))}}static open(e,t,r,i){try{return new dp(t,e.transaction(i,r))}catch(o){throw new yl(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(D("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new XZ(t)}}class tr{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===tr.S(rt())&&ct("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return D("SimpleDb","Removing database:",e),Xo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!tv())return!1;if(tr.C())return!0;const e=rt(),t=tr.S(e),r=0<t&&t<10,i=tr.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return g(function*(){return t.db||(D("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new yl(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new A(E.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new A(E.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new yl(e,a))},o.onupgradeneeded=s=>{D("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',s.oldVersion),t.p.N(s.target.result,o.transaction,s.oldVersion,t.version).next(()=>{D("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return g(function*(){const s="readonly"===t;let a=0;for(;;){++a;try{o.db=yield o.O(e);const u=dp.open(o.db,e,s?"readonly":"readwrite",r),c=i(u).next(l=>(u.g(),l)).catch(l=>(u.abort(l),v.reject(l))).toPromise();return c.catch(()=>{}),yield u.m,c}catch(u){const c=u,l="FirebaseError"!==c.name&&a<3;if(D("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),o.close(),!l)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class JZ{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Xo(this.k.delete())}}class yl extends A{constructor(e,t){super(E.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Qi(n){return"IndexedDbTransactionError"===n.name}class XZ{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(D("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(D("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Xo(r)}add(e){return D("SimpleDb","ADD",this.store.name,e,e),Xo(this.store.add(e))}get(e){return Xo(this.store.get(e)).next(t=>(void 0===t&&(t=null),D("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return D("SimpleDb","DELETE",this.store.name,e),Xo(this.store.delete(e))}count(){return D("SimpleDb","COUNT",this.store.name),Xo(this.store.count())}W(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const o=i.getAll(r.range);return new v((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{const o=this.cursor(r),s=[];return this.G(o,(a,u)=>{s.push(u)}).next(()=>s)}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new v((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,t){D("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Z(e){const t=this.cursor({});return new v((r,i)=>{t.onerror=o=>{const s=fT(o.target.error);i(s)},t.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,t){const r=[];return new v((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const u=new JZ(a),c=t(a.primaryKey,a.value,u);if(c instanceof v){const l=c.catch(d=>(u.done(),v.reject(d)));r.push(l)}u.isDone?i():null===u.$?a.continue():a.continue(u.$)}}).next(()=>v.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Xo(n){return new v((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=fT(r.target.error);t(i)}})}let tV=!1;function fT(n){const e=tr.S(rt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new A("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tV||(tV=!0,setTimeout(()=>{throw r},0)),r}}return n}let jn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function vl(n){return null==n}function Il(n){return 0===n&&1/n==-1/0}function cV(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lV(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class je{constructor(e,t){this.comparator=e,this.root=t||$t.EMPTY}insert(e,t){return new je(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fp(this.root,e,this.comparator,!1)}getReverseIterator(){return new fp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fp(this.root,e,this.comparator,!0)}}class fp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??$t.RED,this.left=i??$t.EMPTY,this.right=o??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new $t(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return $t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw O();const e=this.left.check();if(e!==this.right.check())throw O();return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1,$t.EMPTY=new class{constructor(){this.size=0}get key(){throw O()}get value(){throw O()}get color(){throw O()}get left(){throw O()}get right(){throw O()}copy(e,t,r,i,o){return this}insert(e,t,r){return new $t(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ne{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dV(this.data.getIterator())}getIteratorFrom(e){return new dV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ne)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ne(this.comparator);return t.data=e,t}}class dV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Cn{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new Cn([])}unionWith(e){let t=new Ne(Qe.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Cn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ra(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class hV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new hV("Invalid base64 string: "+o):o}}(e);return new bt(t)}static fromUint8Array(e){const t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const vee=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ji(n){if(F(!!n),"string"==typeof n){let e=0;const t=vee.exec(n);if(F(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(n.seconds),nanos:ot(n.nanos)}}function ot(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ti(n){return"string"==typeof n?bt.fromBase64String(n):bt.fromUint8Array(n)}function pp(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function gp(n){const e=n.mapValue.fields.__previous_value__;return pp(e)?gp(e):e}function El(n){const e=Ji(n.mapValue.fields.__local_write_time__.timestampValue);return new Ze(e.seconds,e.nanos)}class Iee{constructor(e,t,r,i,o,s,a,u,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Zo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Zo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Zo&&e.projectId===this.projectId&&e.database===this.database}}const Xi_mapValue={fields:{__type__:{stringValue:"__max__"}}};function Zi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?pp(n)?4:mV(n)?9007199254740991:10:O()}function jr(n,e){if(n===e)return!0;const t=Zi(n);if(t!==Zi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return El(n).isEqual(El(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Ji(i.timestampValue),a=Ji(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Ti(n.bytesValue).isEqual(Ti(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ot(i.geoPointValue.latitude)===ot(o.geoPointValue.latitude)&&ot(i.geoPointValue.longitude)===ot(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ot(i.integerValue)===ot(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=ot(i.doubleValue),a=ot(o.doubleValue);return s===a?Il(s)===Il(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Ra(n.arrayValue.values||[],e.arrayValue.values||[],jr);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(cV(s)!==cV(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(void 0===a[u]||!jr(s[u],a[u])))return!1;return!0}(n,e);default:return O()}var o}function wl(n,e){return void 0!==(n.values||[]).find(t=>jr(t,e))}function eo(n,e){if(n===e)return 0;const t=Zi(n),r=Zi(e);if(t!==r)return ee(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ee(n.booleanValue,e.booleanValue);case 2:return function(o,s){const a=ot(o.integerValue||o.doubleValue),u=ot(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return fV(n.timestampValue,e.timestampValue);case 4:return fV(El(n),El(e));case 5:return ee(n.stringValue,e.stringValue);case 6:return function(o,s){const a=Ti(o),u=Ti(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let c=0;c<a.length&&c<u.length;c++){const l=ee(a[c],u[c]);if(0!==l)return l}return ee(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){const a=ee(ot(o.latitude),ot(s.latitude));return 0!==a?a:ee(ot(o.longitude),ot(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],u=s.values||[];for(let c=0;c<a.length&&c<u.length;++c){const l=eo(a[c],u[c]);if(l)return l}return ee(a.length,u.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Xi_mapValue&&s===Xi_mapValue)return 0;if(o===Xi_mapValue)return 1;if(s===Xi_mapValue)return-1;const a=o.fields||{},u=Object.keys(a),c=s.fields||{},l=Object.keys(c);u.sort(),l.sort();for(let d=0;d<u.length&&d<l.length;++d){const h=ee(u[d],l[d]);if(0!==h)return h;const f=eo(a[u[d]],c[l[d]]);if(0!==f)return f}return ee(u.length,l.length)}(n.mapValue,e.mapValue);default:throw O()}}function fV(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ee(n,e);const t=Ji(n),r=Ji(e),i=ee(t.seconds,r.seconds);return 0!==i?i:ee(t.nanos,r.nanos)}function Na(n){return gT(n)}function gT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ji(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ti(n.bytesValue).toBase64():"referenceValue"in n?x.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=gT(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${gT(t.fields[s])}`;return i+"}"}(n.mapValue):O()}function es(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function mT(n){return!!n&&"integerValue"in n}function Tl(n){return!!n&&"arrayValue"in n}function pV(n){return!!n&&"nullValue"in n}function gV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yp(n){return!!n&&"mapValue"in n}function Cl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Yi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Cl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function mV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class Gt{constructor(e){this.value=e}static empty(){return new Gt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!yp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cl(t)}setAll(e){let t=Qe.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){const u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Cl(s):i.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());yp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];yp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Yi(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Gt(Cl(this.value))}}function vV(n){const e=[];return Yi(n.fields,(t,r)=>{const i=new Qe([t]);if(yp(r)){const o=vV(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Cn(e)}class We{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new We(e,0,U.min(),U.min(),U.min(),Gt.empty(),0)}static newFoundDocument(e,t,r,i){return new We(e,1,t,U.min(),r,i,0)}static newNoDocument(e,t){return new We(e,2,t,U.min(),U.min(),Gt.empty(),0)}static newUnknownDocument(e,t){return new We(e,3,t,U.min(),U.min(),Gt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(U.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=U.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof We&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new We(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class to{constructor(e,t){this.position=e,this.inclusive=t}}function IV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(r=o.field.isKeyField()?x.comparator(x.fromName(s.referenceValue),t.key):eo(s,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function EV(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!jr(n.position[t],e.position[t]))return!1;return!0}class Dl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Tee(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class wV{}class ye extends wV{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Cee(e,t,r):"array-contains"===t?new bee(e,r):"in"===t?new SV(e,r):"not-in"===t?new See(e,r):"array-contains-any"===t?new Ree(e,r):new ye(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Dee(e,r):new Aee(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(eo(t,this.value)):null!==t&&Zi(this.value)===Zi(t)&&this.matchesComparison(eo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return O()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Me extends wV{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Me(e,t)}matches(e){return ka(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function ka(n){return"and"===n.op}function yT(n){return function TV(n){for(const e of n.filters)if(e instanceof Me)return!1;return!0}(n)&&ka(n)}function vT(n){if(n instanceof ye)return n.field.canonicalString()+n.op.toString()+Na(n.value);if(yT(n))return n.filters.map(e=>vT(e)).join(",");{const e=n.filters.map(t=>vT(t)).join(",");return`${n.op}(${e})`}}function CV(n,e){return n instanceof ye?(r=n,(i=e)instanceof ye&&r.op===i.op&&r.field.isEqual(i.field)&&jr(r.value,i.value)):n instanceof Me?function(r,i){return i instanceof Me&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&CV(s,i.filters[a]),!0)}(n,e):void O();var r,i}function AV(n){return n instanceof ye?`${(t=n).field.canonicalString()} ${t.op} ${Na(t.value)}`:n instanceof Me?function(t){return t.op.toString()+" {"+t.getFilters().map(AV).join(" ,")+"}"}(n):"Filter";var t}class Cee extends ye{constructor(e,t,r){super(e,t,r),this.key=x.fromName(r.referenceValue)}matches(e){const t=x.comparator(e.key,this.key);return this.matchesComparison(t)}}class Dee extends ye{constructor(e,t){super(e,"in",t),this.keys=bV(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Aee extends ye{constructor(e,t){super(e,"not-in",t),this.keys=bV(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function bV(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>x.fromName(r.referenceValue))}class bee extends ye{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Tl(t)&&wl(t.arrayValue,this.value)}}class SV extends ye{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&wl(this.value.arrayValue,t)}}class See extends ye{constructor(e,t){super(e,"not-in",t)}matches(e){if(wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!wl(this.value.arrayValue,t)}}class Ree extends ye{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Tl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wl(this.value.arrayValue,r))}}class Pee{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function IT(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Pee(n,e,t,r,i,o,s)}function ts(n){const e=P(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>vT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),vl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Na(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Na(r)).join(",")),e.ce=t}return e.ce}function Al(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Tee(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!EV(n.startAt,e.startAt)&&EV(n.endAt,e.endAt)}function vp(n){return x.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Ci{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null}}function Oa(n){return new Ci(n)}function MV(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function ET(n){return null!==n.collectionGroup}function Va(n){const e=P(n);if(null===e.le){e.le=[];const t=new Set;for(const o of e.explicitOrderBy)e.le.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ne(Qe.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.le.push(new Dl(o,r))}),t.has(Qe.keyField().canonicalString())||e.le.push(new Dl(Qe.keyField(),r))}return e.le}function pn(n){const e=P(n);return e.he||(e.he=function NV(n,e){if("F"===n.limitType)return IT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Dl(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new to(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new to(n.startAt.position,n.startAt.inclusive):null;return IT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Va(n))),e.he}function wT(n,e){const t=n.filters.concat([e]);return new Ci(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ep(n,e,t){return new Ci(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bl(n,e){return Al(pn(n),pn(e))&&n.limitType===e.limitType}function kV(n){return`${ts(pn(n))}|lt:${n.limitType}`}function Fa(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>AV(i)).join(", ")}]`),vl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Na(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Na(i)).join(",")),`Target(${r})`}(pn(n))}; limitType=${n.limitType})`}function Sl(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):x.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of Va(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(s,a,u){const c=IV(s,a,u);return s.inclusive?c<=0:c<0}(r.startAt,Va(r),i)||r.endAt&&!function(s,a,u){const c=IV(s,a,u);return s.inclusive?c>=0:c>0}(r.endAt,Va(r),i)));var r,i}function VV(n){return(e,t)=>{let r=!1;for(const i of Va(n)){const o=xee(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function xee(n,e,t){const r=n.field.isKeyField()?x.comparator(e.key,t.key):function(o,s,a){const u=s.data.field(o),c=a.data.field(o);return null!==u&&null!==c?eo(u,c):O()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return O()}}class Di{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yi(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return lV(this.inner)}size(){return this.innerSize}}const Mee=new je(x.comparator);function Dn(){return Mee}const FV=new je(x.comparator);function Rl(...n){let e=FV;for(const t of n)e=e.insert(t.key,t);return e}function LV(n){let e=FV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function $r(){return Pl()}function UV(){return Pl()}function Pl(){return new Di(n=>n.toString(),(n,e)=>n.isEqual(e))}const Nee=new je(x.comparator),kee=new Ne(x.comparator);function se(...n){let e=kee;for(const t of n)e=e.add(t);return e}const Oee=new Ne(ee);function BV(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Il(e)?"-0":e}}function jV(n){return{integerValue:""+n}}function $V(n,e){return function nV(n){return"number"==typeof n&&Number.isInteger(n)&&!Il(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?jV(e):BV(n,e)}class wp{constructor(){this._=void 0}}function Vee(n,e,t){return n instanceof La?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&pp(o)&&(o=gp(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof ns?HV(n,e):n instanceof rs?qV(n,e):function(i,o){const s=GV(i,o),a=zV(s)+zV(i.Ie);return mT(s)&&mT(i.Ie)?jV(a):BV(i.serializer,a)}(n,e)}function Fee(n,e,t){return n instanceof ns?HV(n,e):n instanceof rs?qV(n,e):t}function GV(n,e){return n instanceof Ua?mT(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class La extends wp{}class ns extends wp{constructor(e){super(),this.elements=e}}function HV(n,e){const t=WV(e);for(const r of n.elements)t.some(i=>jr(i,r))||t.push(r);return{arrayValue:{values:t}}}class rs extends wp{constructor(e){super(),this.elements=e}}function qV(n,e){let t=WV(e);for(const r of n.elements)t=t.filter(i=>!jr(i,r));return{arrayValue:{values:t}}}class Ua extends wp{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function zV(n){return ot(n.integerValue||n.doubleValue)}function WV(n){return Tl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Uee{constructor(e,t){this.version=e,this.transformResults=t}}class Ye{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ye}static exists(e){return new Ye(void 0,e)}static updateTime(e){return new Ye(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Cp{}function KV(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ja(n.key,Ye.none()):new Ba(n.key,n.data,Ye.none());{const t=n.data,r=Gt.empty();let i=new Ne(Qe.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);null===s&&o.length>1&&(o=o.popLast(),s=t.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new Ai(n.key,r,new Cn(i.toArray()),Ye.none())}}function Bee(n,e,t){n instanceof Ba?function(i,o,s){const a=i.value.clone(),u=JV(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ai?function(i,o,s){if(!Tp(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=JV(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(YV(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ml(n,e,t,r){return n instanceof Ba?function(o,s,a,u){if(!Tp(o.precondition,s))return a;const c=o.value.clone(),l=XV(o.fieldTransforms,u,s);return c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ai?function(o,s,a,u){if(!Tp(o.precondition,s))return a;const c=XV(o.fieldTransforms,u,s),l=s.data;return l.setAll(YV(o)),l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(n,e,t,r):(a=t,Tp(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function jee(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=GV(r.transform,i||null);null!=o&&(null===t&&(t=Gt.empty()),t.set(r.field,o))}return t||null}function QV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Ra(r,i,(o,s)=>function Lee(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof ns&&i instanceof ns||r instanceof rs&&i instanceof rs?Ra(r.elements,i.elements,jr):r instanceof Ua&&i instanceof Ua?jr(r.Ie,i.Ie):r instanceof La&&i instanceof La);var r,i}(o,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Ba extends Cp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ai extends Cp{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function YV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function JV(n,e,t){const r=new Map;F(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Fee(s,a,t[i]))}return r}function XV(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,Vee(o,s,e))}return r}class ja extends Cp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CT extends Cp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class DT{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&Bee(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ml(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ml(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=UV();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;const u=KV(s,a);null!==u&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(U.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),se())}isEqual(e){return this.batchId===e.batchId&&Ra(this.mutations,e.mutations,(t,r)=>QV(t,r))&&Ra(this.baseMutations,e.baseMutations,(t,r)=>QV(t,r))}}class AT{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){F(e.mutations.length===r.length);let i=Nee;const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new AT(e,t,r,i)}}class bT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Gee{constructor(e,t){this.count=e,this.unchangedNames=t}}var It,we;function ZV(n){switch(n){default:return O();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}function eF(n){if(void 0===n)return ct("GRPC error has no .code"),E.UNKNOWN;switch(n){case It.OK:return E.OK;case It.CANCELLED:return E.CANCELLED;case It.UNKNOWN:return E.UNKNOWN;case It.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case It.INTERNAL:return E.INTERNAL;case It.UNAVAILABLE:return E.UNAVAILABLE;case It.UNAUTHENTICATED:return E.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case It.NOT_FOUND:return E.NOT_FOUND;case It.ALREADY_EXISTS:return E.ALREADY_EXISTS;case It.PERMISSION_DENIED:return E.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case It.ABORTED:return E.ABORTED;case It.OUT_OF_RANGE:return E.OUT_OF_RANGE;case It.UNIMPLEMENTED:return E.UNIMPLEMENTED;case It.DATA_LOSS:return E.DATA_LOSS;default:return O()}}(we=It||(It={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";const Hee=new Aa([4294967295,4294967295],0);function nF(n){const e=function tF(){return new TextEncoder}().encode(n),t=new UZ;return t.update(e),new Uint8Array(t.digest())}function rF(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Aa([t,r],0),new Aa([i,o],0)]}class ST{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Nl(`Invalid padding: ${t}`);if(r<0)throw new Nl(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Nl(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Nl(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=Aa.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(Aa.fromNumber(r)));return 1===i.compare(Hee)&&(i=new Aa([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=nF(e),[r,i]=rF(t);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new ST(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Te)return;const t=nF(e),[r,i]=rF(t);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Re(s)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Nl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class kl{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Ol.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new kl(U.min(),i,new je(ee),Dn(),se())}}class Ol{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ol(r,t,se(),se(),se())}}class Ap{constructor(e,t,r,i){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=i}}class iF{constructor(e,t){this.targetId=e,this.fe=t}}class oF{constructor(e,t,r=bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class sF{constructor(){this.ge=0,this.pe=uF(),this.ye=bt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=se(),t=se(),r=se();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:O()}}),new Ol(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=uF()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,F(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class qee{constructor(e){this.Le=e,this.ke=new Map,this.qe=Dn(),this.Qe=aF(),this.Ke=new je(ee)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:O()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.fe.count,i=this.Ye(t);if(i){const o=i.target;if(vp(o))if(0===r){const s=new x(o.path);this.We(t,s,We.newNoDocument(s,U.min()))}else F(1===r);else{const s=this.Ze(t);if(s!==r){const a=this.Xe(e),u=a?this.et(a,e,s):1;0!==u&&(this.He(t),this.Ke=this.Ke.insert(t,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,a;try{s=Ti(r).toUint8Array()}catch(u){if(u instanceof hV)return Un("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new ST(s,i,o)}catch(u){return Un(u instanceof Nl?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Te?null:a}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(t,o,null),i++)}),i}it(e){const t=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&vp(a.target)){const u=new x(a.target.path);null!==this.qe.get(u)||this.st(s,u)||this.We(s,u,We.newNoDocument(u,e))}o.De&&(t.set(s,o.ve()),o.Fe())}});let r=se();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const c=this.Ye(u);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const i=new kl(e,t,this.Ke,this.qe,r);return this.qe=Dn(),this.Qe=aF(),this.Ke=new je(ee),i}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,t)?i.Me(t,1):i.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new sF,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Ne(ee),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||D("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new sF),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function aF(){return new je(x.comparator)}function uF(){return new je(x.comparator)}const zee={asc:"ASCENDING",desc:"DESCENDING"},Wee={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kee={and:"AND",or:"OR"};class Qee{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function RT(n,e){return n.useProto3Json||vl(e)?e:{value:e}}function $a(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Yee(n,e){return $a(n,e.toTimestamp())}function lt(n){return F(!!n),U.fromTimestamp(function(t){const r=Ji(t);return new Ze(r.seconds,r.nanos)}(n))}function PT(n,e){return xT(n,e).canonicalString()}function xT(n,e){const t=(i=n,new _e(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function lF(n){const e=_e.fromString(n);return F(IF(e)),e}function Vl(n,e){return PT(n.databaseId,e.path)}function Gr(n,e){const t=lF(e);if(t.get(1)!==n.databaseId.projectId)throw new A(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new A(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new x(fF(t))}function dF(n,e){return PT(n.databaseId,e)}function MT(n){return new _e(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function fF(n){return F(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function pF(n,e,t){return{name:Vl(n,e),fields:t.value.mapValue.fields}}function mF(n,e){return{documents:[dF(n,e.path)]}}function kT(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=dF(n,i);const o=function(c){if(0!==c.length)return vF(Me.create(c,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const s=function(c){if(0!==c.length)return c.map(l=>{return{field:no((h=l).field),direction:tte(h.dir)};var h})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=RT(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:t,parent:i};var c}function _F(n){let e=function hF(n){const e=lF(n);return 4===e.length?_e.emptyPath():fF(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){F(1===r);const l=t.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];t.where&&(o=function(d){const h=yF(d);return h instanceof Me&&yT(h)?h.getFilters():[h]}(t.where));let s=[];t.orderBy&&(s=t.orderBy.map(h=>{return new Dl(Ga((p=h).field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction));var p}));let a=null;t.limit&&(a=function(d){let h;return h="object"==typeof d?d.value:d,vl(h)?null:h}(t.limit));let u=null;var d;t.startAt&&(u=new to((d=t.startAt).values||[],!!d.before));let c=null;return t.endAt&&(c=function(d){return new to(d.values||[],!d.before)}(t.endAt)),function xV(n,e,t,r,i,o,s,a){return new Ci(n,e,t,r,i,o,s,a)}(e,i,s,o,a,"F",u,c)}function yF(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ga(t.unaryFilter.field);return ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ga(t.unaryFilter.field);return ye.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ga(t.unaryFilter.field);return ye.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Ga(t.unaryFilter.field);return ye.create(s,"!=",{nullValue:"NULL_VALUE"});default:return O()}}(n):void 0!==n.fieldFilter?ye.create(Ga((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return O()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Me.create(t.compositeFilter.filters.map(r=>yF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return O()}}(t.compositeFilter.op))}(n):O();var t}function tte(n){return zee[n]}function nte(n){return Wee[n]}function rte(n){return Kee[n]}function no(n){return{fieldPath:n.canonicalString()}}function Ga(n){return Qe.fromServerFormat(n.fieldPath)}function vF(n){return n instanceof ye?function(t){if("=="===t.op){if(gV(t.value))return{unaryFilter:{field:no(t.field),op:"IS_NAN"}};if(pV(t.value))return{unaryFilter:{field:no(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(gV(t.value))return{unaryFilter:{field:no(t.field),op:"IS_NOT_NAN"}};if(pV(t.value))return{unaryFilter:{field:no(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:no(t.field),op:nte(t.op),value:t.value}}}(n):n instanceof Me?function(t){const r=t.getFilters().map(i=>vF(i));return 1===r.length?r[0]:{compositeFilter:{op:rte(t.op),filters:r}}}(n):O()}function ite(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function IF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class bi{constructor(e,t,r,i,o=U.min(),s=U.min(),a=bt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new bi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class EF{constructor(e){this.ct=e}}function OT(n){const e=_F({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ep(e,e.limit,"L"):e}class as{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(ot(e.integerValue));else if("doubleValue"in e){const r=ot(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),Il(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At(`${r.seconds||""}`),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Ti(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?mV(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):O()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),x.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}as.bt=new as;class hte{constructor(){this._n=new jT}addToCollectionParentIndex(e,t){return this._n.add(t),v.resolve()}getCollectionParents(e,t){return v.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return v.resolve()}deleteFieldIndex(e,t){return v.resolve()}deleteAllFieldIndexes(e){return v.resolve()}createTargetIndexes(e,t){return v.resolve()}getDocumentsMatchingTarget(e,t){return v.resolve(null)}getIndexType(e,t){return v.resolve(0)}getFieldIndexes(e,t){return v.resolve([])}getNextCollectionGroupToUpdate(e){return v.resolve(null)}getMinOffset(e,t){return v.resolve(Bn.min())}getMinOffsetFromCollectionGroup(e,t){return v.resolve(Bn.min())}updateCollectionGroup(e,t,r){return v.resolve()}updateIndexEntries(e,t){return v.resolve()}}class jT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ne(_e.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ne(_e.comparator)).toArray()}}new Uint8Array(0);class tn{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new tn(e,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(41943040,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);class cs{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new cs(0)}static Bn(){return new cs(-1)}}class yte{constructor(){this.changes=new Di(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,We.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?v.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ete{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class KF{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Ml(r.mutation,i,Cn.empty(),Ze.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=se()){const i=$r();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Rl();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=$r();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,se()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Dn();const s=Pl(),a=Pl();return t.forEach((u,c)=>{const l=r.get(c.key);i.has(c.key)&&(void 0===l||l.mutation instanceof Ai)?o=o.insert(c.key,c):void 0!==l?(s.set(c.key,l.mutation.getFieldMask()),Ml(l.mutation,c,l.mutation.getFieldMask(),Ze.now())):s.set(c.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,l)=>s.set(c,l)),t.forEach((c,l)=>{var d;return a.set(c,new Ete(l,null!==(d=s.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Pl();let i=new je((s,a)=>s-a),o=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const a of s)a.keys().forEach(u=>{const c=t.get(u);if(null===c)return;let l=r.get(u)||Cn.empty();l=a.applyToLocalView(c,l),r.set(u,l);const d=(i.get(a.batchId)||se()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,l=u.value,d=UV();l.forEach(h=>{if(!o.has(h)){const f=KV(t.get(h),r.get(h));null!==f&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return v.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return x.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ET(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var s}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):v.resolve($r());let a=-1,u=o;return s.next(c=>v.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(l)?v.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,se())).next(l=>({batchId:a,changes:LV(l)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new x(t)).next(r=>{let i=Rl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=Rl();return this.indexManager.getCollectionParents(e,o).next(a=>v.forEach(a,u=>{const c=(d=t,h=u.child(o),new Ci(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt));var d,h;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(l=>{l.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,c)=>{const l=c.getKey();null===s.get(l)&&(s=s.insert(l,We.newInvalidDocument(l)))});let a=Rl();return s.forEach((u,c)=>{const l=o.get(u);void 0!==l&&Ml(l.mutation,c,Cn.empty(),Ze.now()),Sl(t,c)&&(a=a.insert(u,c))}),a})}}class wte{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return v.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:lt(i.createTime)}),v.resolve();var i}getNamedQuery(e,t){return v.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:OT(i.bundledQuery),readTime:lt(i.readTime)}),v.resolve();var i}}class Tte{constructor(){this.overlays=new je(x.comparator),this.hr=new Map}getOverlay(e,t){return v.resolve(this.overlays.get(t))}getOverlays(e,t){const r=$r();return v.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),v.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),v.resolve()}getOverlaysForCollection(e,t,r){const i=$r(),o=t.length+1,s=new x(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return v.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new je((c,l)=>c-l);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let l=o.get(c.largestBatchId);null===l&&(l=$r(),o=o.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}const a=$r(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return v.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new bT(t,r));let o=this.hr.get(t);void 0===o&&(o=se(),this.hr.set(t,o)),this.hr.set(t,o.add(r.key))}}class $T{constructor(){this.Pr=new Ne(kt.Ir),this.Tr=new Ne(kt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new kt(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new kt(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new x(new _e([])),r=new kt(t,e),i=new kt(t,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new x(new _e([])),r=new kt(t,e),i=new kt(t,e+1);let o=se();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new kt(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class kt{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return x.comparator(e.key,t.key)||ee(e.pr,t.pr)}static Er(e,t){return ee(e.pr,t.pr)||x.comparator(e.key,t.key)}}class Cte{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Ne(kt.Ir)}checkEmpty(e){return v.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.yr;this.yr++;const s=new DT(o,t,r,i);this.mutationQueue.push(s);for(const a of i)this.wr=this.wr.add(new kt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return v.resolve(s)}lookupMutationBatch(e,t){return v.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),o=i<0?0:i;return v.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return v.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return v.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new kt(t,0),i=new kt(t,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{const a=this.Sr(s.pr);o.push(a)}),v.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ne(ee);return t.forEach(i=>{const o=new kt(i,0),s=new kt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),v.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;x.isDocumentKey(o)||(o=o.child(""));const s=new kt(new x(o),0);let a=new Ne(ee);return this.wr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.pr)),!0)},s),v.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){F(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return v.forEach(t.mutations,i=>{const o=new kt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new kt(t,0),i=this.wr.firstAfterOrEqual(r);return v.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return v.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Dte{constructor(e){this.vr=e,this.docs=new je(x.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return v.resolve(r?r.document.mutableCopy():We.newInvalidDocument(t))}getEntries(e,t){let r=Dn();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():We.newInvalidDocument(i))}),v.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Dn();const s=t.path,a=new x(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:l}}=u.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||dT(ZO(l),r)<=0||(i.has(l.key)||Sl(t,l))&&(o=o.insert(l.key,l.mutableCopy()))}return v.resolve(o)}getAllFromCollectionGroup(e,t,r,i){O()}Fr(e,t){return v.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ate(this)}getSize(e){return v.resolve(this.size)}}class Ate extends yte{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),v.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class bte{constructor(e){this.persistence=e,this.Mr=new Di(t=>ts(t),Al),this.lastRemoteSnapshotVersion=U.min(),this.highestTargetId=0,this.Or=0,this.Nr=new $T,this.targetCount=0,this.Br=cs.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),v.resolve()}getLastRemoteSnapshotVersion(e){return v.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return v.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),v.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),v.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new cs(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,v.resolve()}updateTargetData(e,t){return this.qn(t),v.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,v.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),v.waitFor(o).next(()=>i)}getTargetCount(e){return v.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return v.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),v.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),v.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),v.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return v.resolve(r)}containsKey(e,t){return v.resolve(this.Nr.containsKey(t))}}class GT{constructor(e,t){this.Lr={},this.overlays={},this.kr=new jn(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new bte(this),this.indexManager=new hte,this.remoteDocumentCache=new Dte(r=>this.referenceDelegate.Kr(r)),this.serializer=new EF(t),this.$r=new wte(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Tte,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Lr[e.toKey()];return r||(r=new Cte(t,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){D("MemoryPersistence","Starting transaction:",e);const i=new Ste(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,t){return v.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,t)))}}class Ste extends YZ{constructor(e){super(),this.currentSequenceNumber=e}}class kp{constructor(e){this.persistence=e,this.zr=new $T,this.jr=null}static Hr(e){return new kp(e)}get Jr(){if(this.jr)return this.jr;throw O()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),v.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),v.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),v.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return v.forEach(this.Jr,r=>{const i=x.fromPath(r);return this.Yr(e,i).next(o=>{o||t.removeEntry(i,U.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return v.or([()=>v.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class WT{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=se(),i=se();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new WT(e,t.fromCache,r,i)}}class Pte{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class YF{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function WW(){return!function HW(){var n;const e=null===(n=ff())||void 0===n?void 0:n.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()?8:tr.v(rt())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.ji(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new Pte;return this.Ji(e,t,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,t,s,a.size)})}).next(()=>o.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Sa()<=pe.DEBUG&&D("QueryEngine","SDK will not create cache indexes for query:",Fa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),v.resolve()):(Sa()<=pe.DEBUG&&D("QueryEngine","Query:",Fa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Sa()<=pe.DEBUG&&D("QueryEngine","The SDK decides to create cache indexes for query:",Fa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pn(t))):v.resolve())}ji(e,t){if(MV(t))return v.resolve(null);let r=pn(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Ep(t,null,"F"),r=pn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=se(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Zi(t,a);return this.Xi(t,c,s,u.readTime)?this.ji(e,Ep(t,null,"F")):this.es(e,c,t,u)}))})))}Hi(e,t,r,i){return MV(t)||i.isEqual(U.min())?v.resolve(null):this.zi.getDocuments(e,r).next(o=>{const s=this.Zi(t,o);return this.Xi(t,s,r,i)?v.resolve(null):(Sa()<=pe.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fa(t)),this.es(e,s,t,function XO(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=U.fromTimestamp(1e9===r?new Ze(t+1,0):new Ze(t,r));return new Bn(i,x.empty(),e)}(i,-1)).next(a=>a))})}Zi(e,t){let r=new Ne(VV(e));return t.forEach((i,o)=>{Sl(e,o)&&(r=r.add(o))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,t,r){return Sa()<=pe.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",Fa(t)),this.zi.getDocumentsMatchingQuery(e,t,Bn.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}class xte{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new je(ee),this.rs=new Di(o=>ts(o),Al),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KF(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function XF(n,e){return KT.apply(this,arguments)}function KT(){return KT=g(function*(n,e){const t=P(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=se();for(const c of i){s.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}for(const c of o){a.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}return t.localDocuments.getDocuments(r,u).next(c=>({us:c,removedBatchIds:s,addedBatchIds:a}))})})}),KT.apply(this,arguments)}function Mte(n,e){const t=P(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.os.newChangeBuffer({trackRemovals:!0});return function(a,u,c,l){const d=c.batch,h=d.keys();let f=v.resolve();return h.forEach(p=>{f=f.next(()=>l.getEntry(u,p)).next(m=>{const _=c.docVersions.get(p);F(null!==_),m.version.compareTo(_)<0&&(d.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),l.addEntry(m)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=se();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ZF(n){const e=P(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function Nte(n,e){const t=P(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((l,d)=>{const h=i.get(d);if(!h)return;a.push(t.Qr.removeMatchingKeys(o,l.removedDocuments,d).next(()=>t.Qr.addMatchingKeys(o,l.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);var m,_,I;null!==e.targetMismatches.get(d)?f=f.withResumeToken(bt.EMPTY_BYTE_STRING,U.min()).withLastLimboFreeSnapshotVersion(U.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),_=f,I=l,(0===(m=h).resumeToken.approximateByteSize()||_.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8||I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(o,f))});let u=Dn(),c=se();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(function eL(n,e,t){let r=se(),i=se();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Dn();return t.forEach((a,u)=>{const c=o.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(U.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):D("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{cs:s,ls:i}})}(o,s,e.documentUpdates).next(l=>{u=l.cs,c=l.ls})),!r.isEqual(U.min())){const l=t.Qr.getLastRemoteSnapshotVersion(o).next(d=>t.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return v.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(t.ns=i,o))}function kte(n,e){const t=P(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ka(n,e){const t=P(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(o=>o?(i=o,v.resolve(i)):t.Qr.allocateTargetId(r).next(s=>(i=new bi(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Qa(n,e,t){return QT.apply(this,arguments)}function QT(){return QT=g(function*(n,e,t){const r=P(n),i=r.ns.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Qi(s))throw s;D("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}),QT.apply(this,arguments)}function Fp(n,e,t){const r=P(n);let i=U.min(),o=se();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,c,l){const d=P(u),h=d.rs.get(l);return void 0!==h?v.resolve(d.ns.get(h)):d.Qr.getTargetData(c,l)}(r,s,pn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,t?i:U.min(),t?o:se())).next(a=>(function rL(n,e,t){let r=n.ss.get(e)||U.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ss.set(e,r)}(r,function OV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),a),{documents:a,hs:o})))}class eC{constructor(){this.activeTargetIds=function TT(){return Oee}()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sL{constructor(){this.no=new eC,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new eC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Fte{io(e){}shutdown(){}}class aL{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Bp=null;function nC(){return null===Bp?Bp=268435456+Math.round(2147483648*Math.random()):Bp++,"0x"+Bp.toString(16)}const Lte={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ute{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const nn="WebChannelConnection";class Bte extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+t.host,this.po=`projects/${i}/databases/${o}`,this.yo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(t,r,i,o,s){const a=nC(),u=this.bo(t,r.toUriEncodedString());D("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,o,s),this.Co(t,u,c,i).then(l=>(D("RestConnection",`Received RPC '${t}' ${a}: `,l),l),l=>{throw Un("RestConnection",`RPC '${t}' ${a} failed with error: `,l,"url: ",u,"request:",i),l})}vo(t,r,i,o,s,a){return this.So(t,r,i,o,s)}Do(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+ba,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}bo(t,r){return`${this.fo}/v1/${r}:${Lte[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,r,i){const o=nC();return new Promise((s,a)=>{const u=new LZ;u.setWithCredentials(!0),u.listenOnce(VZ.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case uT.NO_ERROR:const l=u.getResponseJson();D(nn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(l)),s(l);break;case uT.TIMEOUT:D(nn,`RPC '${e}' ${o} timed out`),a(new A(E.DEADLINE_EXCEEDED,"Request time out"));break;case uT.HTTP_ERROR:const d=u.getStatus();if(D(nn,`RPC '${e}' ${o} failed with status:`,d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h?.error;if(f&&f.status&&f.message){const p=function(_){const I=_.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(I)>=0?I:E.UNKNOWN}(f.status);a(new A(p,f.message))}else a(new A(E.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new A(E.UNAVAILABLE,"Connection failed."));break;default:O()}}finally{D(nn,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);D(nn,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",c,r,15)})}Fo(e,t,r){const i=nC(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=kZ(),a=OZ(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;const l=o.join("");D(nn,`Creating RPC '${e}' stream ${i}: ${l}`,u);const d=s.createWebChannel(l,u);let h=!1,f=!1;const p=new Ute({lo:_=>{f?D(nn,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(h||(D(nn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),D(nn,`RPC '${e}' stream ${i} sending:`,_),d.send(_))},ho:()=>d.close()}),m=(_,I,w)=>{_.listen(I,y=>{try{w(y)}catch(b){setTimeout(()=>{throw b},0)}})};return m(d,lp.EventType.OPEN,()=>{f||D(nn,`RPC '${e}' stream ${i} transport opened.`)}),m(d,lp.EventType.CLOSE,()=>{f||(f=!0,D(nn,`RPC '${e}' stream ${i} transport closed`),p.Vo())}),m(d,lp.EventType.ERROR,_=>{f||(f=!0,Un(nn,`RPC '${e}' stream ${i} transport errored:`,_),p.Vo(new A(E.UNAVAILABLE,"The operation could not be completed")))}),m(d,lp.EventType.MESSAGE,_=>{var I;if(!f){const w=_.data[0];F(!!w);const y=w,b=y.error||(null===(I=y[0])||void 0===I?void 0:I.error);if(b){D(nn,`RPC '${e}' stream ${i} received error:`,b);const B=b.status;let j=function(pd){const mg=It[pd];if(void 0!==mg)return eF(mg)}(B),et=b.message;void 0===j&&(j=E.INTERNAL,et="Unknown error status: "+B+" with message "+b.message),f=!0,p.Vo(new A(j,et)),d.close()}else D(nn,`RPC '${e}' stream ${i} received:`,w),p.mo(w)}}),m(a,FZ.STAT_EVENT,_=>{_.stat===zO.PROXY?D(nn,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===zO.NOPROXY&&D(nn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}}function jp(){return typeof document<"u"?document:null}function ql(n){return new Qee(n,!0)}class rC{constructor(e,t,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=t,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,t-r);i>0&&D("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class cL{constructor(e,t,r,i,o,s,a,u){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new rC(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return g(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return g(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,t){var r=this;return g(function*(){r.n_(),r.r_(),r.jo.cancel(),r.Wo++,4!==e?r.jo.reset():t&&t.code===E.RESOURCE_EXHAUSTED?(ct(t.toString()),ct("Using maximum backoff delay to prevent overloading the backend."),r.jo.ko()):t&&t.code===E.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.i_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.To(t)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===t&&this.o_(r,i)},r=>{e(()=>{const i=new A(E.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,t){const r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){var e=this;this.state=5,this.jo.qo(g(function*(){e.state=0,e.start()}))}__(e){return D("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget(()=>this.Wo===e?t():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jte extends cL{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function Xee(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:O(),i=e.targetChange.targetIds||[],o=function(c,l){return c.useProto3Json?(F(void 0===l||"string"==typeof l),bt.fromBase64String(l||"")):(F(void 0===l||l instanceof Uint8Array),bt.fromUint8Array(l||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(c){const l=void 0===c.code?E.UNKNOWN:eF(c.code);return new A(l,c.message||"")}(s);t=new oF(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Gr(n,r.document.name),o=lt(r.document.updateTime),s=r.document.createTime?lt(r.document.createTime):U.min(),a=new Gt({mapValue:{fields:r.document.fields}}),u=We.newFoundDocument(i,o,s,a);t=new Ap(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Gr(n,r.document),o=r.readTime?lt(r.readTime):U.min(),s=We.newNoDocument(i,o);t=new Ap([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=Gr(n,r.document);t=new Ap([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return O();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new Gee(i,o);t=new iF(r.targetId,s)}}var c;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return U.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?U.min():s.readTime?lt(s.readTime):U.min()}(e);return this.listener.u_(t,r)}c_(e){const t={};t.database=MT(this.serializer),t.addTarget=function(o,s){let a;const u=s.target;if(a=vp(u)?{documents:mF(o,u)}:{query:kT(o,u).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=cF(o,s.resumeToken);const c=RT(o,s.expectedCount);null!==c&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(U.min())>0){a.readTime=$a(o,s.snapshotVersion.toTimestamp());const c=RT(o,s.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function ete(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return O()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.t_(t)}l_(e){const t={};t.database=MT(this.serializer),t.removeTarget=e,this.t_(t)}}class $te extends cL{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(F(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function Zee(n,e){return n&&n.length>0?(F(void 0!==e),n.map(t=>function(i,o){let s=lt(i.updateTime?i.updateTime:o);return s.isEqual(U.min())&&(s=lt(o)),new Uee(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=lt(e.commitTime);return this.listener.T_(r,t)}return F(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=MT(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function Fl(n,e){let t;if(e instanceof Ba)t={update:pF(n,e.key,e.value)};else if(e instanceof ja)t={delete:Vl(n,e.key)};else if(e instanceof Ai)t={update:pF(n,e.key,e.data),updateMask:ite(e.fieldMask)};else{if(!(e instanceof CT))return O();t={verify:Vl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof La)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ns)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof rs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ua)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw O()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:Yee(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:O()),t;var o}(this.serializer,r))};this.t_(t)}}class Gte extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new A(E.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,xT(t,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new A(E.UNKNOWN,o.toString())})}vo(e,t,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,xT(t,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new A(E.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class qte{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(ct(t),this.g_=!1):D("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class zte{constructor(e,t,r,i,o){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(a=>{r.enqueueAndForget(g(function*(){var u;so(s)&&(D("RemoteStore","Restarting streams for network reachability change."),yield(u=g(function*(l){const d=P(l);d.v_.add(4),yield Ya(d),d.x_.set("Unknown"),d.v_.delete(4),yield zl(d)}),function c(l){return u.apply(this,arguments)})(s))}))}),this.x_=new qte(r,i)}}function zl(n){return oC.apply(this,arguments)}function oC(){return oC=g(function*(n){if(so(n))for(const e of n.F_)yield e(!0)}),oC.apply(this,arguments)}function Ya(n){return sC.apply(this,arguments)}function sC(){return sC=g(function*(n){for(const e of n.F_)yield e(!1)}),sC.apply(this,arguments)}function $p(n,e){const t=P(n);t.C_.has(e.targetId)||(t.C_.set(e.targetId,e),cC(t)?uC(t):Xa(t).Jo()&&aC(t,e))}function Wl(n,e){const t=P(n),r=Xa(t);t.C_.delete(e),r.Jo()&&lL(t,e),0===t.C_.size&&(r.Jo()?r.Xo():so(t)&&t.x_.set("Unknown"))}function aC(n,e){if(n.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(U.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xa(n).c_(e)}function lL(n,e){n.O_.Oe(e),Xa(n).l_(e)}function uC(n){n.O_=new qee({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.C_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Xa(n).start(),n.x_.p_()}function cC(n){return so(n)&&!Xa(n).Ho()&&n.C_.size>0}function so(n){return 0===P(n).v_.size}function dL(n){n.O_=void 0}function Wte(n){return lC.apply(this,arguments)}function lC(){return lC=g(function*(n){n.C_.forEach((e,t)=>{aC(n,e)})}),lC.apply(this,arguments)}function Kte(n,e){return dC.apply(this,arguments)}function dC(){return dC=g(function*(n,e){dL(n),cC(n)?(n.x_.S_(e),uC(n)):n.x_.set("Unknown")}),dC.apply(this,arguments)}function Qte(n,e,t){return hC.apply(this,arguments)}function hC(){return hC=g(function*(n,e,t){if(n.x_.set("Online"),e instanceof oF&&2===e.state&&e.cause)try{yield(r=g(function*(o,s){const a=s.cause;for(const u of s.targetIds)o.C_.has(u)&&(yield o.remoteSyncer.rejectListen(u,a),o.C_.delete(u),o.O_.removeTarget(u))}),function i(o,s){return r.apply(this,arguments)})(n,e)}catch(r){D("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Gp(n,r)}else if(e instanceof Ap?n.O_.$e(e):e instanceof iF?n.O_.Je(e):n.O_.Ge(e),!t.isEqual(U.min()))try{const r=yield ZF(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){const a=o.O_.it(s);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const l=o.C_.get(c);l&&o.C_.set(c,l.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,c)=>{const l=o.C_.get(u);if(!l)return;o.C_.set(u,l.withResumeToken(bt.EMPTY_BYTE_STRING,l.snapshotVersion)),lL(o,u);const d=new bi(l.target,u,c,l.sequenceNumber);aC(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){D("RemoteStore","Failed to raise snapshot:",r),yield Gp(n,r)}var r}),hC.apply(this,arguments)}function Gp(n,e,t){return fC.apply(this,arguments)}function fC(){return fC=g(function*(n,e,t){if(!Qi(e))throw e;n.v_.add(1),yield Ya(n),n.x_.set("Offline"),t||(t=()=>ZF(n.localStore)),n.asyncQueue.enqueueRetryable(g(function*(){D("RemoteStore","Retrying IndexedDB access"),yield t(),n.v_.delete(1),yield zl(n)}))}),fC.apply(this,arguments)}function hL(n,e){return e().catch(t=>Gp(n,t,e))}function Ja(n){return pC.apply(this,arguments)}function pC(){return pC=g(function*(n){const e=P(n),t=ao(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Yte(e);)try{const i=yield kte(e.localStore,r);if(null===i){0===e.D_.length&&t.Xo();break}r=i.batchId,Jte(e,i)}catch(i){yield Gp(e,i)}fL(e)&&pL(e)}),pC.apply(this,arguments)}function Yte(n){return so(n)&&n.D_.length<10}function Jte(n,e){n.D_.push(e);const t=ao(n);t.Jo()&&t.P_&&t.I_(e.mutations)}function fL(n){return so(n)&&!ao(n).Ho()&&n.D_.length>0}function pL(n){ao(n).start()}function Xte(n){return gC.apply(this,arguments)}function gC(){return gC=g(function*(n){ao(n).d_()}),gC.apply(this,arguments)}function Zte(n){return mC.apply(this,arguments)}function mC(){return mC=g(function*(n){const e=ao(n);for(const t of n.D_)e.I_(t.mutations)}),mC.apply(this,arguments)}function ene(n,e,t){return _C.apply(this,arguments)}function _C(){return _C=g(function*(n,e,t){const r=n.D_.shift(),i=AT.from(r,e,t);yield hL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ja(n)}),_C.apply(this,arguments)}function tne(n,e){return yC.apply(this,arguments)}function yC(){return yC=g(function*(n,e){var t;e&&ao(n).P_&&(yield(t=g(function*(i,o){if(ZV(a=o.code)&&a!==E.ABORTED){const s=i.D_.shift();ao(i).Zo(),yield hL(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield Ja(i)}var a}),function r(i,o){return t.apply(this,arguments)})(n,e)),fL(n)&&pL(n)}),yC.apply(this,arguments)}function gL(n,e){return vC.apply(this,arguments)}function vC(){return vC=g(function*(n,e){const t=P(n);t.asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials");const r=so(t);t.v_.add(3),yield Ya(t),r&&t.x_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.v_.delete(3),yield zl(t)}),vC.apply(this,arguments)}function EC(){return EC=g(function*(n,e){const t=P(n);e?(t.v_.delete(2),yield zl(t)):e||(t.v_.add(2),yield Ya(t),t.x_.set("Unknown"))}),EC.apply(this,arguments)}function Xa(n){return n.N_||(n.N_=function(t,r,i){const o=P(t);return o.R_(),new jte(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:Wte.bind(null,n),To:Kte.bind(null,n),u_:Qte.bind(null,n)}),n.F_.push(function(){var e=g(function*(t){t?(n.N_.Zo(),cC(n)?uC(n):n.x_.set("Unknown")):(yield n.N_.stop(),dL(n))});return function(t){return e.apply(this,arguments)}}())),n.N_}function ao(n){return n.B_||(n.B_=function(t,r,i){const o=P(t);return o.R_(),new $te(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Po:Xte.bind(null,n),To:tne.bind(null,n),E_:Zte.bind(null,n),T_:ene.bind(null,n)}),n.F_.push(function(){var e=g(function*(t){t?(n.B_.Zo(),yield Ja(n)):(yield n.B_.stop(),n.D_.length>0&&(D("RemoteStore",`Stopping write stream with ${n.D_.length} pending writes`),n.D_=[]))});return function(t){return e.apply(this,arguments)}}())),n.B_}class wC{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new At,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,a=new wC(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new A(E.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Za(n,e){if(ct("AsyncQueue",`${e}: ${n}`),Qi(n))return new A(E.UNAVAILABLE,`${e}: ${n}`);throw n}class eu{constructor(e){this.comparator=e?(t,r)=>e(t,r)||x.comparator(t.key,r.key):(t,r)=>x.comparator(t.key,r.key),this.keyedMap=Rl(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new eu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof eu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new eu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class mL{constructor(){this.L_=new je(x.comparator)}track(e){const t=e.doc.key,r=this.L_.get(t);r?0!==e.type&&3===r.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==r.type?this.L_=this.L_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.L_=this.L_.remove(t):1===e.type&&2===r.type?this.L_=this.L_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):O():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal((t,r)=>{e.push(r)}),e}}class tu{constructor(e,t,r,i,o,s,a,u,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new tu(e,t,eu.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class nne{constructor(){this.q_=void 0,this.Q_=[]}}class rne{constructor(){this.queries=new Di(e=>kV(e),bl),this.onlineState="Unknown",this.K_=new Set}}function TC(n,e){return CC.apply(this,arguments)}function CC(){return CC=g(function*(n,e){const t=P(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new nne),i)try{o.q_=yield t.onListen(r)}catch(s){const a=Za(s,`Initialization of query '${Fa(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,o),o.Q_.push(e),e.U_(t.onlineState),o.q_&&e.W_(o.q_)&&bC(t)}),CC.apply(this,arguments)}function DC(n,e){return AC.apply(this,arguments)}function AC(){return AC=g(function*(n,e){const t=P(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),i=0===o.Q_.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),AC.apply(this,arguments)}function ine(n,e){const t=P(n);let r=!1;for(const i of e){const s=t.queries.get(i.query);if(s){for(const a of s.Q_)a.W_(i)&&(r=!0);s.q_=i}}r&&bC(t)}function one(n,e,t){const r=P(n),i=r.queries.get(e);if(i)for(const o of i.Q_)o.onError(t);r.queries.delete(e)}function bC(n){n.K_.forEach(e=>{e.next()})}class SC{constructor(e,t,r){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new tu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){return!e.fromCache||(!this.options.Z_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=tu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class vL{constructor(e){this.key=e}}class IL{constructor(e){this.key=e}}class EL{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=se(),this.mutatedKeys=se(),this.ua=VV(e),this.ca=new eu(this.ua)}get la(){return this.oa}ha(e,t){const r=t?t.Pa:new mL,i=t?t.ca:this.ca;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const h=i.get(l),f=Sl(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),m=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let _=!1;h&&f?h.data.isEqual(f.data)?p!==m&&(r.track({type:3,doc:f}),_=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),_=!0,(u&&this.ua(f,u)>0||c&&this.ua(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),_=!0):h&&!f&&(r.track({type:1,doc:h}),_=!0,(u||c)&&(a=!0)),_&&(f?(s=s.add(f),o=m?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const l="F"===this.query.limitType?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ca:s,Pa:r,Xi:a,mutatedKeys:o}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort((l,d)=>function(f,p){const m=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return O()}};return m(f)-m(p)}(l.type,d.type)||this.ua(l.doc,d.doc)),this.Ta(r),i=null!=i&&i;const a=t&&!i?this.Ea():[],u=0===this.aa.size&&this.current&&!i?1:0,c=u!==this._a;return this._a=u,0!==s.length||c?{snapshot:new tu(this.query,e.ca,o,s,e.mutatedKeys,0===u,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new mL,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=se(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const t=[];return e.forEach(r=>{this.aa.has(r)||t.push(new IL(r))}),this.aa.forEach(r=>{e.has(r)||t.push(new vL(r))}),t}Ra(e){this.oa=e.hs,this.aa=se();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return tu.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class une{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class cne{constructor(e){this.key=e,this.ma=!1}}class lne{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Di(a=>kV(a),bl),this.pa=new Map,this.ya=new Set,this.wa=new je(x.comparator),this.Sa=new Map,this.ba=new $T,this.Da={},this.Ca=new Map,this.va=cs.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function dne(n,e){return RC.apply(this,arguments)}function RC(){return RC=g(function*(n,e){const t=XC(n);let r,i;const o=t.ga.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{const s=yield Ka(t.localStore,pn(e)),a=t.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield PC(t,e,r,"current"===a,s.resumeToken),t.isPrimaryClient&&$p(t.remoteStore,s)}return i}),RC.apply(this,arguments)}function PC(n,e,t,r,i){return xC.apply(this,arguments)}function xC(){return xC=g(function*(n,e,t,r,i){n.Ma=(d,h,f)=>{return(p=g(function*(_,I,w,y){let b=I.view.ha(w);b.Xi&&(b=yield Fp(_.localStore,I.query,!1).then(({documents:bn})=>I.view.ha(bn,b)));const B=y&&y.targetChanges.get(I.targetId),j=y&&null!=y.targetMismatches.get(I.targetId),et=I.view.applyChanges(b,_.isPrimaryClient,B,j);return jC(_,I.targetId,et.da),et.snapshot}),function m(_,I,w,y){return p.apply(this,arguments)})(n,d,h,f);var p};const o=yield Fp(n.localStore,e,!0),s=new EL(e,o.hs),a=s.ha(o.documents),u=Ol.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),c=s.applyChanges(a,n.isPrimaryClient,u);jC(n,t,c.da);const l=new une(e,t,s);return n.ga.set(e,l),n.pa.has(t)?n.pa.get(t).push(e):n.pa.set(t,[e]),c.snapshot}),xC.apply(this,arguments)}function hne(n,e){return MC.apply(this,arguments)}function MC(){return MC=g(function*(n,e){const t=P(n),r=t.ga.get(e),i=t.pa.get(r.targetId);if(i.length>1)return t.pa.set(r.targetId,i.filter(o=>!bl(o,e))),void t.ga.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Qa(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Wl(t.remoteStore,r.targetId),nu(t,r.targetId)}).catch(Ki))):(nu(t,r.targetId),yield Qa(t.localStore,r.targetId,!0))}),MC.apply(this,arguments)}function NC(){return NC=g(function*(n,e,t){const r=ZC(n);try{const i=yield function(s,a){const u=P(s),c=Ze.now(),l=a.reduce((f,p)=>f.add(p.key),se());let d,h;return u.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=Dn(),m=se();return u.os.getEntries(f,l).next(_=>{p=_,p.forEach((I,w)=>{w.isValidDocument()||(m=m.add(I))})}).next(()=>u.localDocuments.getOverlayedDocuments(f,p)).next(_=>{d=_;const I=[];for(const w of a){const y=jee(w,d.get(w.key).overlayedDocument);null!=y&&I.push(new Ai(w.key,y,vV(y.value.mapValue),Ye.exists(!0)))}return u.mutationQueue.addMutationBatch(f,c,I,a)}).next(_=>{h=_;const I=_.applyToLocalDocumentSet(d,m);return u.documentOverlayCache.saveOverlays(f,_.batchId,I)})}).then(()=>({batchId:h.batchId,changes:LV(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let c=s.Da[s.currentUser.toKey()];c||(c=new je(ee)),c=c.insert(a,u),s.Da[s.currentUser.toKey()]=c}(r,i.batchId,t),yield Si(r,i.changes),yield Ja(r.remoteStore)}catch(i){const o=Za(i,"Failed to persist write");t.reject(o)}}),NC.apply(this,arguments)}function wL(n,e){return kC.apply(this,arguments)}function kC(){return kC=g(function*(n,e){const t=P(n);try{const r=yield Nte(t.localStore,e);e.targetChanges.forEach((i,o)=>{const s=t.Sa.get(o);s&&(F(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.ma=!0:i.modifiedDocuments.size>0?F(s.ma):i.removedDocuments.size>0&&(F(s.ma),s.ma=!1))}),yield Si(t,r,e)}catch(r){yield Ki(r)}}),kC.apply(this,arguments)}function TL(n,e,t){const r=P(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ga.forEach((o,s)=>{const a=s.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=P(s);u.onlineState=a;let c=!1;u.queries.forEach((l,d)=>{for(const h of d.Q_)h.U_(a)&&(c=!0)}),c&&bC(u)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function pne(n,e,t){return OC.apply(this,arguments)}function OC(){return OC=g(function*(n,e,t){const r=P(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Sa.get(e),o=i&&i.key;if(o){let s=new je(x.comparator);s=s.insert(o,We.newNoDocument(o,U.min()));const a=se().add(o),u=new kl(U.min(),new Map,new je(ee),s,a);yield wL(r,u),r.wa=r.wa.remove(o),r.Sa.delete(e),$C(r)}else yield Qa(r.localStore,e,!1).then(()=>nu(r,e,t)).catch(Ki)}),OC.apply(this,arguments)}function gne(n,e){return VC.apply(this,arguments)}function VC(){return VC=g(function*(n,e){const t=P(n),r=e.batch.batchId;try{const i=yield Mte(t.localStore,e);BC(t,r,null),UC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Si(t,i)}catch(i){yield Ki(i)}}),VC.apply(this,arguments)}function mne(n,e,t){return FC.apply(this,arguments)}function FC(){return FC=g(function*(n,e,t){const r=P(n);try{const i=yield function(s,a){const u=P(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let l;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(F(null!==d),l=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,l,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,l)).next(()=>u.localDocuments.getDocuments(c,l))})}(r.localStore,e);BC(r,e,t),UC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Si(r,i)}catch(i){yield Ki(i)}}),FC.apply(this,arguments)}function UC(n,e){(n.Ca.get(e)||[]).forEach(t=>{t.resolve()}),n.Ca.delete(e)}function BC(n,e,t){const r=P(n);let i=r.Da[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function nu(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.pa.get(e))n.ga.delete(r),t&&n.fa.xa(r,t);n.pa.delete(e),n.isPrimaryClient&&n.ba.Vr(e).forEach(r=>{n.ba.containsKey(r)||CL(n,r)})}function CL(n,e){n.ya.delete(e.path.canonicalString());const t=n.wa.get(e);null!==t&&(Wl(n.remoteStore,t),n.wa=n.wa.remove(e),n.Sa.delete(t),$C(n))}function jC(n,e,t){for(const r of t)r instanceof vL?(n.ba.addReference(r.key,e),yne(n,r)):r instanceof IL?(D("SyncEngine","Document no longer in limbo: "+r.key),n.ba.removeReference(r.key,e),n.ba.containsKey(r.key)||CL(n,r.key)):O()}function yne(n,e){const t=e.key,r=t.path.canonicalString();n.wa.get(t)||n.ya.has(r)||(D("SyncEngine","New document in limbo: "+t),n.ya.add(r),$C(n))}function $C(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){const e=n.ya.values().next().value;n.ya.delete(e);const t=new x(_e.fromString(e)),r=n.va.next();n.Sa.set(r,new cne(t)),n.wa=n.wa.insert(t,r),$p(n.remoteStore,new bi(pn(Oa(t.path)),r,"TargetPurposeLimboResolution",jn._e))}}function Si(n,e,t){return GC.apply(this,arguments)}function GC(){return GC=g(function*(n,e,t){const r=P(n),i=[],o=[],s=[];var a;r.ga.isEmpty()||(r.ga.forEach((a,u)=>{s.push(r.Ma(u,e,t).then(c=>{if((c||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);const l=WT.Ki(u.targetId,c);o.push(l)}}))}),yield Promise.all(s),r.fa.u_(i),yield(a=g(function*(c,l){const d=P(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>v.forEach(l,f=>v.forEach(f.qi,p=>d.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>v.forEach(f.Qi,p=>d.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Qi(h))throw h;D("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const f=h.targetId;if(!h.fromCache){const p=d.ns.get(f),_=p.withLastLimboFreeSnapshotVersion(p.snapshotVersion);d.ns=d.ns.insert(f,_)}}}),function u(c,l){return a.apply(this,arguments)})(r.localStore,o))}),GC.apply(this,arguments)}function vne(n,e){return HC.apply(this,arguments)}function HC(){return HC=g(function*(n,e){const t=P(n);if(!t.currentUser.isEqual(e)){D("SyncEngine","User change. New user:",e.toKey());const r=yield XF(t.localStore,e);t.currentUser=e,(o=t).Ca.forEach(a=>{a.forEach(u=>{u.reject(new A(E.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ca.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Si(t,r.us)}var o}),HC.apply(this,arguments)}function Ine(n,e){const t=P(n),r=t.Sa.get(e);if(r&&r.ma)return se().add(r.key);{let i=se();const o=t.pa.get(e);if(!o)return i;for(const s of o){const a=t.ga.get(s);i=i.unionWith(a.view.la)}return i}}function XC(n){const e=P(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=wL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ine.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pne.bind(null,e),e.fa.u_=ine.bind(null,e.eventManager),e.fa.xa=one.bind(null,e.eventManager),e}function ZC(n){const e=P(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gne.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mne.bind(null,e),e}class Hp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return g(function*(){t.serializer=ql(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function JF(n,e,t,r){return new xte(n,e,t,r)}(this.persistence,new YF,e.initialUser,this.serializer)}createPersistence(e){return new GT(kp.Hr,this.serializer)}createSharedClientState(e){return new sL}terminate(){var e=this;return g(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ru{initialize(e,t){var r=this;return g(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>TL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=vne.bind(null,r.syncEngine),yield function IC(n,e){return EC.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new rne}createDatastore(e){const t=ql(e.databaseInfo.databaseId),r=new Bte(e.databaseInfo);return new Gte(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,o=e.asyncQueue,s=t=>TL(this.syncEngine,t,0),a=aL.D()?new aL:new Fte,new zte(r,i,o,s,a);var r,i,o,s,a}createSyncEngine(e,t){return function(i,o,s,a,u,c,l){const d=new lne(i,o,s,a,u,c);return l&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return g(function*(){var t,r;yield(r=g(function*(o){const s=P(o);D("RemoteStore","RemoteStore shutting down."),s.v_.add(5),yield Ya(s),s.M_.shutdown(),s.x_.set("Unknown")}),function i(o){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}class qp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):ct("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Nne{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Mt.UNAUTHENTICATED,this.clientId=YO.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=g(function*(a){D("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(D("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new A(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new At;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(g(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Za(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function zp(n,e){return eD.apply(this,arguments)}function eD(){return eD=g(function*(n,e){n.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=g(function*(o){r.isEqual(o)||(yield XF(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),eD.apply(this,arguments)}function tD(n,e){return nD.apply(this,arguments)}function nD(){return nD=g(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield rD(n);D("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>gL(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>gL(e.remoteStore,i)),n._onlineComponents=e}),nD.apply(this,arguments)}function PL(n){return"FirebaseError"===n.name?n.code===E.FAILED_PRECONDITION||n.code===E.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function rD(n){return iD.apply(this,arguments)}function iD(){return iD=g(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){D("FirestoreClient","Using user provided OfflineComponentProvider");try{yield zp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!PL(t))throw t;Un("Error using user provided cache. Falling back to memory cache: "+t),yield zp(n,new Hp)}}else D("FirestoreClient","Using default OfflineComponentProvider"),yield zp(n,new Hp);return n._offlineComponents}),iD.apply(this,arguments)}function Wp(n){return oD.apply(this,arguments)}function oD(){return oD=g(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(D("FirestoreClient","Using user provided OnlineComponentProvider"),yield tD(n,n._uninitializedComponentsProvider._online)):(D("FirestoreClient","Using default OnlineComponentProvider"),yield tD(n,new ru))),n._onlineComponents}),oD.apply(this,arguments)}function ou(n){return aD.apply(this,arguments)}function aD(){return aD=g(function*(n){const e=yield Wp(n),t=e.eventManager;return t.onListen=dne.bind(null,e.syncEngine),t.onUnlisten=hne.bind(null,e.syncEngine),t}),aD.apply(this,arguments)}function VL(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const FL=new Map;function uD(n,e,t){if(!t)throw new A(E.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function LL(n){if(!x.isDocumentKey(n))throw new A(E.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function UL(n){if(x.isDocumentKey(n))throw new A(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Kp(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":O()}function ve(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new A(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Kp(n);throw new A(E.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class jL{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new A(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new A(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function Hne(n,e,t,r){if(!0===e&&!0===r)throw new A(E.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=VL(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new A(E.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new A(E.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new A(E.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kl{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jL({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new A(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new A(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jL(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new BZ;switch(r.type){case"firstParty":return new HZ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new A(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=FL.get(t);r&&(D("ComponentProvider","Removing Datastore"),FL.delete(t),r.terminate())}(this),Promise.resolve()}}class Ht{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ht(this.firestore,e,this._query)}}class dt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}}class Hr extends Ht{constructor(e,t,r){super(e,t,Oa(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new x(e))}withConverter(e){return new Hr(this.firestore,e,this._path)}}function cD(n,e,...t){if(n=dn(n),uD("collection","path",e),n instanceof Kl){const r=_e.fromString(e,...t);return UL(r),new Hr(n,null,r)}{if(!(n instanceof dt||n instanceof Hr))throw new A(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_e.fromString(e,...t));return UL(r),new Hr(n.firestore,null,r)}}function Qp(n,e,...t){if(n=dn(n),1===arguments.length&&(e=YO.newId()),uD("doc","path",e),n instanceof Kl){const r=_e.fromString(e,...t);return LL(r),new dt(n,null,new x(r))}{if(!(n instanceof dt||n instanceof Hr))throw new A(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_e.fromString(e,...t));return LL(r),new dt(n.firestore,n instanceof Hr?n.converter:null,new x(r))}}class zne{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new rC(this,"async_queue_retry"),this._u=()=>{const t=jp();t&&D("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const e=jp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=jp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const t=new At;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return g(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(t){if(!Qi(t))throw t;D("AsyncQueue","Operation failed with retryable error: "+t)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const t=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{throw this.ru=r,this.iu=!1,ct("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.iu=!1,r))));return this.Xa=t,t}enqueueAfterDelay(e,t,r){this.au(),this.ou.indexOf(e)>-1&&(t=0);const i=wC.createAndSchedule(this,e,t,r,o=>this.lu(o));return this.nu.push(i),i}au(){this.ru&&O()}verifyOperationInProgress(){}hu(){var e=this;return g(function*(){let t;do{t=e.Xa,yield t}while(t!==e.Xa)})()}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}class $e extends Kl{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new zne,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||GL(this),this._firestoreClient.terminate()}}function Kne(n,e){const r="string"==typeof n?n:e||"(default)",i=$i("object"==typeof n?n:hv(),"firestore").getImmediate({identifier:r});if(!i._initialized){const o=(n=>{const e=T1("firestore");if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})();o&&function qne(n,e,t,r={}){var i;const o=(n=ve(n,Kl))._getSettings(),s=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&Un("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Mt.MOCK_USER;else{a=function $W(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[df(JSON.stringify({alg:"none",type:"JWT"})),df(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new A(E.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Mt(c)}n._authCredentials=new jZ(new KO(a,u))}}(i,...o)}return i}function ht(n){return n._firestoreClient||GL(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function GL(n){var e,t,r;const i=n._freezeSettings(),o=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Iee(n._databaseId,u,n._persistenceKey,(l=i).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,VL(l.experimentalLongPollingOptions),l.useFetchStreams));var u,l;n._firestoreClient=new Nne(n._authCredentials,n._appCheckCredentials,n._queue,o),(null===(t=i.localCache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class ds{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ds(bt.fromBase64String(e))}catch(t){throw new A(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ds(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class su{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new A(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zL{constructor(e){this._methodName=e}}class dD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new A(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new A(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}}const Yne=/^__.*__$/;class Jne{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ai(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ba(e,this.data,t,this.fieldTransforms)}}function KL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw O()}}class Yp{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Yp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Xp(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(KL(this.du)&&Yne.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Xne{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ql(e)}Su(e,t,r,i=!1){return new Yp({du:e,methodName:t,wu:r,path:Qe.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function au(n){const e=n._freezeSettings(),t=ql(n._databaseId);return new Xne(n._databaseId,!!e.ignoreUndefinedProperties,t)}function hD(n,e,t,r,i,o={}){const s=n.Su(o.merge||o.mergeFields?2:0,e,t,i);_D("Data must be an object, but it was:",s,r);const a=ZL(r,s);let u,c;if(o.merge)u=new Cn(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const l=[];for(const d of o.mergeFields){const h=Jl(e,d,t);if(!s.contains(h))throw new A(E.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);t2(l,h)||l.push(h)}u=new Cn(l),c=s.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=s.fieldTransforms;return new Jne(new Gt(a),u,c)}function hs(n,e){if(e2(n=dn(n)))return _D("Unsupported field value:",e,n),ZL(n,e);if(n instanceof zL)return function(r,i){if(!KL(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=hs(a,i.gu(s));null==u&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if(null===(r=dn(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return $V(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Ze.fromDate(r);return{timestampValue:$a(i.serializer,o)}}if(r instanceof Ze){const o=new Ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$a(i.serializer,o)}}if(r instanceof dD)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ds)return{bytesValue:cF(i.serializer,r._byteString)};if(r instanceof dt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.pu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:PT(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${Kp(r)}`)}(n,e)}function ZL(n,e){const t={};return lV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yi(n,(r,i)=>{const o=hs(i,e.Ru(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function e2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ze||n instanceof dD||n instanceof ds||n instanceof dt||n instanceof zL)}function _D(n,e,t){if(!e2(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Kp(t);throw e.pu("an object"===r?n+" a custom object":n+" "+r)}var i}function Jl(n,e,t){if((e=dn(e))instanceof su)return e._internalPath;if("string"==typeof e)return Jp(n,e);throw Xp("Field path arguments must be of type string or ",n,!1,void 0,t)}const Zne=new RegExp("[~\\*/\\[\\]]");function Jp(n,e,t){if(e.search(Zne)>=0)throw Xp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new su(...e.split("."))._internalPath}catch{throw Xp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xp(n,e,t,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new A(E.INVALID_ARGUMENT,a+n+u)}function t2(n,e){return n.some(t=>t.isEqual(e))}class yD{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new ere(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Zp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class ere extends yD{data(){return super.data()}}function Zp(n,e){return"string"==typeof e?Jp(n,e):e instanceof su?e._internalPath:e._delegate._internalPath}class vD{}class r2 extends vD{}class Xl extends r2{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Xl(e,t,r)}_apply(e){const t=this._parse(e);return a2(e._query,t),new Ht(e.firestore,e.converter,wT(e._query,t))}_parse(e){const t=au(e.firestore);return function(o,s,a,u,c,l,d){let h;if(c.isKeyField()){if("array-contains"===l||"array-contains-any"===l)throw new A(E.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if("in"===l||"not-in"===l){s2(d,l);const f=[];for(const p of d)f.push(o2(u,o,p));h={arrayValue:{values:f}}}else h=o2(u,o,d)}else"in"!==l&&"not-in"!==l&&"array-contains-any"!==l||s2(d,l),h=function XL(n,e,t,r=!1){return hs(t,n.Su(r?4:3,e))}(a,"where",d,"in"===l||"not-in"===l);return ye.create(c,l,h)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class uu extends vD{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new uu(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Me.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)a2(s,u),s=wT(s,u)}(e._query,t),new Ht(e.firestore,e.converter,wT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class eg extends r2{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new eg(e,t,r)}_apply(e){return new Ht(e.firestore,e.converter,Ep(e._query,this._limit,this._limitType))}}function o2(n,e,t){if("string"==typeof(t=dn(t))){if(""===t)throw new A(E.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ET(e)&&-1!==t.indexOf("/"))throw new A(E.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(_e.fromString(t));if(!x.isDocumentKey(r))throw new A(E.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return es(n,new x(r))}if(t instanceof dt)return es(n,t._key);throw new A(E.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kp(t)}.`)}function s2(n,e){if(!Array.isArray(n)||0===n.length)throw new A(E.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function a2(n,e){const t=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new A(E.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class rre{convertValue(e,t="none"){switch(Zi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ti(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw O()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Yi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new dD(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=gp(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(El(e));default:return null}}convertTimestamp(e){const t=Ji(e);return new Ze(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=_e.fromString(e);F(IF(r));const i=new Zo(r.get(1),r.get(3)),o=new x(r.popFirst(5));return i.isEqual(t)||ct(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}class fs{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cu extends yD{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Zp("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class rg extends cu{data(e={}){return super.data(e)}}class lu{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new fs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new rg(this._firestore,this._userDataWriter,r.key,r,new fs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new A(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new rg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const u=new rg(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,l=-1;return 0!==a.type&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:ore(a.type),doc:u,oldIndex:c,newIndex:l}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function ore(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return O()}}class uo extends rre{constructor(e){super(),this.firestore=e}convertBytes(e){return new ds(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,t)}}function c2(n,e,t){n=ve(n,dt);const r=ve(n.firestore,$e),i=function ED(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}(n.converter,e,t);return function Zl(n,e){return function(r,i){const o=new At;return r.asyncQueue.enqueueAndForget(g(function*(){return function fne(n,e,t){return NC.apply(this,arguments)}(yield function sD(n){return Wp(n).then(e=>e.syncEngine)}(r),i,o)})),o.promise}(ht(n),e)}(r,[hD(au(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Ye.none())])}!function(e,t=!0){ba="10.8.1",Nr(new _r("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new $e(new $Z(r.getProvider("auth-internal")),new qZ(r.getProvider("app-check-internal")),function(c,l){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new A(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zo(c.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Xn(WO,"4.4.3",e),Xn(WO,"4.4.3","esm2017")}();class An{static clone(e){let t;if(e){for(var r in t=An.create(e.tag),t.attributes=e.attributes,t.text=e.text,e.children)t.children.push(this.clone(e.children[r]));return t}return e}}An.create=function(n){return{id:An.id(10),tag:n,attributes:new Map,children:[]}},An.add=function(n,e){let t=An.create(e),r=n.children.push(t);return n.children[r-1]},An.id=function(n){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=t.length;let i=0;for(;i<n;)e+=t.charAt(Math.floor(Math.random()*r)),i+=1;return e},An.remove=function(n,e){for(var t=n,r=!1,i=0;!r&&i<t.children.length;i++){if(e.id==t.children[i].id)return t.children.splice(i,1),!0;r=An.remove(t.children[i],e)}return r};const Ere=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];var du=(()=>(function(n){n.USER="USER",n.ADMIN="ADMIN"}(du||(du={})),du))();class ps{constructor(){this.isLoading=new Yn(!1)}show(){this.isLoading.next(!0)}hide(){this.isLoading.next(!1)}}ps.\u0275fac=function(e){return new(e||ps)},ps.\u0275prov=q({token:ps,factory:ps.\u0275fac,providedIn:"root"});class qr{constructor(e){this.loader=e,this.app=B1(Tre),this.analytics=function MQ(n=hv()){const e=$i(n=dn(n),vf);return e.isInitialized()?e.getImmediate():function NQ(n,e={}){const t=$i(n,vf);if(t.isInitialized()){const i=t.getImmediate();if(Nc(e,t.getOptions()))return i;throw hn.create("already-initialized")}return t.initialize({options:e})}(n)}(this.app),this.firestore=Kne(this.app),this.auth=MX(this.app),this.isAdmin=!1,this.data={},this.cursors={},this.refreshEvent=new Ce,this.refreshUser=new Ce,this.refreshUserSession();var t=[gs.DESIGNS];for(var r in t)this.init(t[r]),this.refresh(t[r])}init(e){this.cursors[e]={order:"order",limit:20}}refreshUserSession(){this.auth.onAuthStateChanged(e=>{null==e?(this.user=void 0,this.isAdmin=!1,this.refreshUser.emit(void 0)):(console.log("FirestoreService:refreshUserSession:: Auth State Changed ",e),this.loader.show(),this.login({id:e.uid,email:e.email,name:e.displayName,contact:e.phoneNumber,image:e.photoURL,role:du.USER}))})}refresh(e){console.log("Refreshing "+e);const r=function tre(n,e,...t){let r=[];e instanceof vD&&r.push(e),r=r.concat(t),function(o){const s=o.filter(u=>u instanceof uu).length,a=o.filter(u=>u instanceof Xl).length;if(s>1||s>0&&a>0)throw new A(E.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}(cD(this.firestore,e),function nre(n){return function BL(n,e){if(e<=0)throw new A(E.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}("limit",n),eg._create("limit",n,"F")}(this.cursors[e].limit));(function are(n){n=ve(n,Ht);const e=ve(n.firestore,$e),t=ht(e),r=new uo(e);return function n2(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new A(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(n._query),function OL(n,e,t={}){const r=new At;return n.asyncQueue.enqueueAndForget(g(function*(){return function(o,s,a,u,c){const l=new qp({next:h=>{s.enqueueAndForget(()=>DC(o,d)),h.fromCache&&"server"===u.source?c.reject(new A(E.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new SC(a,l,{includeMetadataChanges:!0,Z_:!0});return TC(o,d)}(yield ou(n),n.asyncQueue,e,t,r)})),r.promise}(t,n._query).then(i=>new lu(e,r,n,i))})(r).then(i=>{this.data[e]=[],i.forEach(o=>{let s=o.data();s.id=o.id,this.data[e].push(s)}),this.refreshEvent.emit(e)})}login(e){var t=this;return g(function*(){const r=Qp(t.firestore,"users",e.id),i=yield function sre(n){n=ve(n,dt);const e=ve(n.firestore,$e);return function kL(n,e,t={}){const r=new At;return n.asyncQueue.enqueueAndForget(g(function*(){return function(o,s,a,u,c){const l=new qp({next:h=>{s.enqueueAndForget(()=>DC(o,d));const f=h.docs.has(a);!f&&h.fromCache?c.reject(new A(E.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&u&&"server"===u.source?c.reject(new A(E.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new SC(Oa(a.path),l,{includeMetadataChanges:!0,Z_:!0});return TC(o,d)}(yield ou(n),n.asyncQueue,e,t,r)})),r.promise}(ht(e),n._key).then(t=>function wD(n,e,t){const r=t.docs.get(e._key),i=new uo(n);return new cu(n,i,e._key,r,new fs(t.hasPendingWrites,t.fromCache),e.converter)}(e,n,t))}(r);if(i.exists()){let o=i.data();console.log("FirestoreService:login:: Existing User :",o),t.user={id:o.id,name:o.name,email:o.email,contact:o.contact,role:o.role,image:o.image},t.refreshUser.emit(t.user),sessionStorage.setItem("user",JSON.stringify(t.user)),t.isAdmin=t.user.role==du.ADMIN,t.loader.hide()}else console.log("FirestoreService:login:: Create new user: "+e.email),t.user=e,yield c2(Qp(cD(t.firestore,"users"),e.id),t.user),console.log("FirestoreService:login:: Created new user: "+e.email),t.refreshUser.emit(t.user),sessionStorage.setItem("user",JSON.stringify(t.user)),t.log(hu.SIGN_UP,t.user),t.loader.hide()})()}logout(){var e=this;return g(function*(){console.log("FirestoreService:logout:: Logging out user: "+e.user?.email),e.user=void 0,sessionStorage.clear(),e.isAdmin=!1,e.log(hu.LOGOUT,e.user),e.refreshUser.emit(e.user)})()}log(e,t=null){let r={url:window.location.href,device:window.navigator.userAgent,timestamp:(new Date).toISOString(),event:e};t&&(r.data=t),console.log("Sending Event to Analytics: ",r),vN(this.analytics,e,r)}}qr.\u0275fac=function(e){return new(e||qr)(H(ps))},qr.\u0275prov=q({token:qr,factory:qr.\u0275fac,providedIn:"root"});var hu=(()=>(function(n){n.PAGE_VIEW="PAGE_VIEW",n.LOGIN="login",n.SIGN_UP="sign_up",n.LOGOUT="logout"}(hu||(hu={})),hu))(),gs=(()=>(function(n){n.DESIGNS="designs"}(gs||(gs={})),gs))();const Tre={apiKey:"AIzaSyAW1LTd9_9KMW90Xtcwd_wzAv6oSyYxdUs",authDomain:"design-vvsk.firebaseapp.com",projectId:"design-vvsk",storageBucket:"design-vvsk.appspot.com",messagingSenderId:"145324731810",appId:"1:145324731810:web:52249d2b70fbee852896fb",measurementId:"G-RYQ3M3HT1H"};class ed{constructor(e,t){this.router=e,this.fs=t,this.provider=new ZI;var r=sessionStorage.getItem("redirect");sessionStorage.removeItem("redirect"),t.refreshUser.subscribe(i=>{null!=i&&(r?(console.log("Login Success, Redirecting to ",r),this.router.navigateByUrl(r)):(console.log("Login Success, Redirecting to home"),this.router.navigate(["home"])))})}login(){this.fs.loader.show(),function jJ(n,e,t){return nw.apply(this,arguments)}(this.fs.auth,this.provider).then(e=>{ZI.credentialFromResult(e);let i=e.user;console.log("LoginComponent: SignInUser",i),this.fs.log(hu.LOGIN,{id:i.uid,email:i.email,name:i.displayName,contact:i.phoneNumber,image:i.photoURL,role:du.USER})}).catch(e=>{this.fs.loader.hide(),console.error(e),ZI.credentialFromError(e)})}}ed.\u0275fac=function(e){return new(e||ed)(T(Jt),T(qr))},ed.\u0275cmp=mn({type:ed,selectors:[["app-login"]],decls:12,vars:0,consts:[[1,"row","text-center","p-3"],[1,"col-md-4","col-sm-6","col-xs-12","form"],[2,"font-weight","600","font-size","18px"],["src","../../assets/icons/google-logo.png"],[3,"click"]],template:function(e,t){1&e&&(V(0,"div",0)(1,"div",1)(2,"div")(3,"h5"),me(4,"Welcome to "),V(5,"b"),me(6,"DeSiGnER"),L()(),V(7,"p",2),me(8,"Login with your google account"),L()(),si(9,"img",3),V(10,"button",4),te("click",function(){return t.login()}),me(11,"Sign in"),L()()())},styles:["img[_ngcontent-%COMP%]{display:block;width:80px;margin:30px auto;box-shadow:0 5px 10px -7px #333;border-radius:50%}.form[_ngcontent-%COMP%]{background-color:#fff;margin:50px auto 10px;padding:30px;border-radius:8px;overflow:hidden;box-shadow:0 2px 10px -3px #333;text-align:center}button[_ngcontent-%COMP%]{border-radius:100px;border:none;background:#719BE6;width:50%;padding:10px;color:#fff;box-shadow:0 2px 10px -3px #719be6;display:block;margin:30px auto 10px}"]});class Ri{constructor(){this.events=new Ce,this.parser=new DOMParser}parseText(e){let t;console.log("Parsing: ",e);try{var r=this.parser.parseFromString(e,"text/html");t=this.parse(r.body.children[0])}catch(i){console.error(i),alert("Unable to parse pasted content")}return console.log("Parsing Success: ",t),t}parse(e){let t=An.create(e.tagName);for(var r=0;r<e.attributes.length;r++){var i=e.attributes[r];t.attributes.set(i.name,i.value)}for(r=0;r<e.children.length;r++)t.children.push(this.parse(e.children[r]));for(r=0;r<e.childNodes.length;r++)if(e.childNodes[r].nodeType==Node.TEXT_NODE){t.text=e.childNodes[r].textContent||void 0;break}return t}}Ri.\u0275fac=function(e){return new(e||Ri)},Ri.\u0275prov=q({token:Ri,factory:Ri.\u0275fac,providedIn:"root"});class td{constructor(){this.menu=new Ce}}function Cre(n,e){if(1&n){const t=Ve();V(0,"div")(1,"i",2),te("click",function(){return Se(t),Re(z().action.emit("edit"))}),me(2,"edit"),L()()}}function Dre(n,e){if(1&n){const t=Ve();V(0,"div")(1,"i",4),te("click",function(){return Se(t),Re(z().action.emit("cut"))}),me(2,"cut"),L()()}}function Are(n,e){if(1&n){const t=Ve();V(0,"div")(1,"i",2),te("click",function(){return Se(t),Re(z().action.emit("copy"))}),me(2,"content_copy"),L()()}}function bre(n,e){if(1&n){const t=Ve();V(0,"div")(1,"i",2),te("click",function(){return Se(t),Re(z().action.emit("paste"))}),me(2,"content_paste"),L()()}}function Sre(n,e){if(1&n){const t=Ve();V(0,"div")(1,"i",2),te("click",function(){return Se(t),Re(z().action.emit("preview"))}),me(2,"preview"),L()()}}function Rre(n,e){if(1&n){const t=Ve();V(0,"div")(1,"i",2),te("click",function(){return Se(t),Re(z().action.emit("upload"))}),me(2,"upload"),L()()}}function Pre(n,e){if(1&n){const t=Ve();V(0,"div")(1,"i",2),te("click",function(){return Se(t),Re(z().action.emit("download"))}),me(2,"download"),L()()}}function xre(n,e){if(1&n){const t=Ve();V(0,"div")(1,"i",2),te("click",function(){return Se(t),Re(z().action.emit("load"))}),me(2,"folder_open"),L()()}}function Mre(n,e){if(1&n){const t=Ve();V(0,"div")(1,"i",2),te("click",function(){return Se(t),Re(z().action.emit("save"))}),me(2,"save"),L()()}}function Nre(n,e){if(1&n){const t=Ve();V(0,"div")(1,"i",5),te("click",function(){return Se(t),Re(z().action.emit("delete"))}),me(2,"delete"),L()()}}function kre(n,e){if(1&n){const t=Ve();V(0,"div")(1,"i",2),te("click",function(){return Se(t),Re(z().login())}),me(2,"login"),L()()}}function Ore(n,e){if(1&n){const t=Ve();V(0,"div")(1,"i",2),te("click",function(){return Se(t),Re(z().logout())}),me(2,"logout"),L()()}}td.\u0275fac=function(e){return new(e||td)},td.\u0275cmp=mn({type:td,selectors:[["app-header"]],outputs:{menu:"menu"},decls:10,vars:0,consts:[[1,"header"],[1,"row"],[1,"col-6","title","px-3"],[1,"col-6","d-flex","align-items-center","justify-content-end"],[1,"material-icons","m-1"]],template:function(e,t){1&e&&(V(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),me(4," Design"),L()(),V(5,"div",3)(6,"i",4),me(7,"copyright"),L(),V(8,"span"),me(9,"V.V.S.K Chaitanya"),L()()()())},styles:[".header[_ngcontent-%COMP%]{padding:5px 20px 5px 8px;background:#673ab7;color:#fff}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:30px}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .arrow-font[_ngcontent-%COMP%]{font-size:50px;line-height:.5;vertical-align:text-top}"]});class nd{constructor(e,t,r){this.app=e,this.firestore=t,this.router=r,this.close=new Ce,this.action=new Ce}ngOnInit(){}login(){this.router.navigate(["login"])}logout(){this.router.navigate(["logout"])}}nd.\u0275fac=function(e){return new(e||nd)(T(Ri),T(qr),T(Jt))},nd.\u0275cmp=mn({type:nd,selectors:[["app-menu"]],outputs:{close:"close",action:"action"},decls:17,vars:12,consts:[[1,"menu"],[1,"mx-3","d-flex","flex-column"],[1,"material-icons","text-light","pointer","mt-4",3,"click"],[4,"ngIf"],[1,"material-symbols-outlined","text-light","pointer","mt-4",3,"click"],[1,"material-icons","text-danger","pointer","mt-4",3,"click"]],template:function(e,t){1&e&&(V(0,"div",0)(1,"div",1)(2,"div")(3,"i",2),te("click",function(){return t.action.emit("add")}),me(4,"add"),L()(),he(5,Cre,3,0,"div",3),he(6,Dre,3,0,"div",3),he(7,Are,3,0,"div",3),he(8,bre,3,0,"div",3),he(9,Sre,3,0,"div",3),he(10,Rre,3,0,"div",3),he(11,Pre,3,0,"div",3),he(12,xre,3,0,"div",3),he(13,Mre,3,0,"div",3),he(14,Nre,3,0,"div",3),he(15,kre,3,0,"div",3),he(16,Ore,3,0,"div",3),L()()),2&e&&(G(5),J("ngIf",t.app.current),G(1),J("ngIf",t.app.current),G(1),J("ngIf",t.app.current),G(1),J("ngIf",t.app.current&&t.app.paste),G(1),J("ngIf",t.app.design),G(1),J("ngIf",!t.app.design),G(1),J("ngIf",t.app.design),G(1),J("ngIf",t.firestore.user&&!t.app.design),G(1),J("ngIf",t.firestore.user&&t.app.design),G(1),J("ngIf",t.app.current),G(1),J("ngIf",!t.firestore.user),G(1),J("ngIf",t.firestore.user))},dependencies:[xo],styles:[".menu[_ngcontent-%COMP%]{position:absolute;top:55px;left:0;background:#673ab7;height:-webkit-fill-available}.menu[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}"]});class rd{constructor(e,t){this.appService=e,this.firestore=t,this.html="",this.appService.events.subscribe(r=>{"preview"==r&&this.ngOnChanges(),"download"==r&&this.download(),"save"==r&&this.save()})}ngOnInit(){console.log("Rendering Preview ..."),this.html=this.process(this.design),this.update()}ngOnChanges(){console.log("Rendering Preview ..."),this.html=this.process(this.design),this.update()}download(){navigator.clipboard.writeText(this.html)}update(){let e=document.getElementById("preview");e&&(e.innerHTML=this.html)}save(){var e=this;return g(function*(){e.design&&(yield c2(Qp(cD(e.firestore.firestore,gs.DESIGNS),e.appService.file),{design:e.html}),alert("Design Saved"))})()}process(e){console.log("Processing ",e);let t="";if(e){let r=function(n){return null!=n&&-1!==Ere.indexOf(n.toLowerCase())}(e.tag),i="";for(let o of e.attributes)i+=" "+o[0]+'="'+o[1]+'"';if(r)t="<"+e.tag+i+"/>";else{let o="";e.text&&(o+=e.text);for(let s of e.children)o+=this.process(s);t="<"+e.tag+i+">"+o+"</"+e.tag+">"}}return t}}function Vre(n,e){if(1&n){const t=Ve();V(0,"i",6),te("click",function(){Se(t);const i=z(2);return Re(i.expand=!i.expand)}),me(1),L()}if(2&n){const t=z(2);G(1),In(t.expand?"expand_more":"chevron_right")}}function Fre(n,e){if(1&n){const t=Ve();V(0,"div")(1,"app-node",9),te("select",function(i){return Se(t),Re(z(3).select.emit(i))}),L()()}if(2&n){const t=e.$implicit,r=z(3);G(1),J("node",t)("current",r.current)}}function Lre(n,e){if(1&n&&(V(0,"div",7),he(1,Fre,2,2,"div",8),L()),2&n){const t=z(2);G(1),J("ngForOf",t.node.children)}}rd.\u0275fac=function(e){return new(e||rd)(T(Ri),T(qr))},rd.\u0275cmp=mn({type:rd,selectors:[["app-preview"]],inputs:{design:"design"},features:[xn],decls:1,vars:0,consts:[["id","preview"]],template:function(e,t){1&e&&si(0,"div",0)}});const Ure=function(n){return{"active-node":n}};function Bre(n,e){if(1&n){const t=Ve();V(0,"div",1)(1,"div",2),he(2,Vre,2,1,"i",3),V(3,"span",4),te("click",function(){Se(t);const i=z();return Re(i.select.emit(i.node))}),me(4),L()(),he(5,Lre,2,1,"div",5),L()}if(2&n){const t=z();G(1),J("ngClass",function JR(n,e,t,r){return XR(C(),an(),n,e,t,r)}(4,Ure,null!=t.current&&t.node.id==t.current.id)),G(1),J("ngIf",t.node.children.length>=0),G(2),In(t.node.tag),G(1),J("ngIf",t.expand)}}class fu{constructor(){this.select=new Ce,this.expand=!1}}fu.\u0275fac=function(e){return new(e||fu)},fu.\u0275cmp=mn({type:fu,selectors:[["app-node"]],inputs:{node:"node",current:"current"},outputs:{select:"select"},decls:1,vars:1,consts:[["class","row m-0",4,"ngIf"],[1,"row","m-0"],[1,"col-12",3,"ngClass"],["class","material-icons mx-2 pointer align-middle",3,"click",4,"ngIf"],[1,"pointer","text-uppercase",3,"click"],["class","col-12","style","margin-left:15px;",4,"ngIf"],[1,"material-icons","mx-2","pointer","align-middle",3,"click"],[1,"col-12",2,"margin-left","15px"],[4,"ngFor","ngForOf"],[3,"node","current","select"]],template:function(e,t){1&e&&he(0,Bre,6,6,"div",0),2&e&&J("ngIf",t.node&&t.node.tag)},dependencies:[Cx,Uh,xo,fu],styles:[".active-node[_ngcontent-%COMP%]{background-color:#add8e6}"]});let f2=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(T(ri),T(On))},n.\u0275dir=Z({type:n}),n})(),ms=(()=>{class n extends f2{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Lt(n)))(r||n)}}(),n.\u0275dir=Z({type:n,features:[Pe]}),n})();const zr=new $("NgValueAccessor"),rn=new $("NgValidators"),lo=new $("NgAsyncValidators");function C2(n){return null!=n}function D2(n){return Zu(n)?pt(n):n}function A2(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function b2(n,e){return e.map(t=>t(n))}function S2(n){return n.map(e=>function Kre(n){return!n.validate}(e)?e:t=>e.validate(t))}function DD(n){return null!=n?function R2(n){if(!n)return null;const e=n.filter(C2);return 0==e.length?null:function(t){return A2(b2(t,e))}}(S2(n)):null}function AD(n){return null!=n?function P2(n){if(!n)return null;const e=n.filter(C2);return 0==e.length?null:function(t){return function jre(...n){const e=pA(n),{args:t,keys:r}=rM(n),i=new ft(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let u=s,c=s;for(let l=0;l<s;l++){let d=!1;nr(t[l]).subscribe(Et(o,h=>{d||(d=!0,c--),a[l]=h},()=>u--,void 0,()=>{(!u||!d)&&(c||o.next(r?oM(r,a):a),o.complete())}))}});return e?i.pipe(iM(e)):i}(b2(t,e).map(D2)).pipe(ge(A2))}}(S2(n)):null}function x2(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function bD(n){return n?Array.isArray(n)?n:[n]:[]}function ag(n,e){return Array.isArray(n)?n.includes(e):n===e}function k2(n,e){const t=bD(e);return bD(n).forEach(i=>{ag(t,i)||t.push(i)}),t}function O2(n,e){return bD(e).filter(t=>!ag(n,t))}class V2{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=DD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=AD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class gn extends V2{get formDirective(){return null}get path(){return null}}class F2{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let L2=(()=>{class n extends F2{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(T(gn,10))},n.\u0275dir=Z({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&dh("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Pe]}),n})();const id="VALID",cg="INVALID",pu="PENDING",od="DISABLED";function lg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class $2{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===id}get invalid(){return this.status===cg}get pending(){return this.status==pu}get disabled(){return this.status===od}get enabled(){return this.status!==od}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(k2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(k2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(O2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(O2(e,this._rawAsyncValidators))}hasValidator(e){return ag(this._rawValidators,e)}hasAsyncValidator(e){return ag(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=pu,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=od,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=id,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===id||this.status===pu)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?od:id}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=pu,this._hasOwnPendingAsyncValidator=!0;const t=D2(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ce,this.statusChanges=new Ce}_calculateStatus(){return this._allControlsDisabled()?od:this.errors?cg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pu)?pu:this._anyControlsHaveStatus(cg)?cg:id}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){lg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function nie(n){return Array.isArray(n)?DD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function rie(n){return Array.isArray(n)?AD(n):n||null}(this._rawAsyncValidators)}}class ND extends $2{constructor(e,t,r){super(function xD(n){return(lg(n)?n.validators:n)||null}(t),function MD(n,e){return(lg(e)?e.asyncValidators:n)||null}(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function j2(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new S(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function B2(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new S(1e3,"");if(!r[t])throw new S(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const sd=new $("CallSetDisabledState",{providedIn:"root",factory:()=>kD}),kD="always";function fg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function OD(n,e){const t=function M2(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(x2(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function N2(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(x2(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();fg(e._rawValidators,i),fg(e._rawAsyncValidators,i)}function G2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const fie={provide:gn,useExisting:Le(()=>gg)},ud=(()=>Promise.resolve())();let gg=(()=>{class n extends gn{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ce,this.form=new ND({},DD(t),AD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ud.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),function ad(n,e,t=kD){OD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function sie(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&G2(n,e)})}(n,e),function uie(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function aie(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&G2(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function oie(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ud.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ud.then(()=>{const r=this._findContainer(t.path),i=new ND({});(function H2(n,e){OD(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ud.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ud.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function q2(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(T(rn,10),T(lo,10),T(sd,8))},n.\u0275dir=Z({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&te("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ke([fie]),Pe]}),n})(),Z2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Z({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),tU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Er({type:n}),n.\u0275inj=rr({}),n})();const Aie={provide:zr,useExisting:Le(()=>$D),multi:!0};function uU(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let $D=(()=>{class n extends ms{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=uU(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function bie(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Lt(n)))(r||n)}}(),n.\u0275dir=Z({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&te("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ke([Aie]),Pe]}),n})(),cU=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(uU(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(T(On),T(ri),T($D,9))},n.\u0275dir=Z({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Sie={provide:zr,useExisting:Le(()=>GD),multi:!0};function lU(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let GD=(()=>{class n extends ms{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],o=r.selectedOptions;if(void 0!==o){const s=o;for(let a=0;a<s.length;a++){const c=this._getOptionValue(s[a].value);i.push(c)}}else{const s=r.options;for(let a=0;a<s.length;a++){const u=s[a];if(u.selected){const c=this._getOptionValue(u.value);i.push(c)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Rie(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Lt(n)))(r||n)}}(),n.\u0275dir=Z({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&te("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ke([Sie]),Pe]}),n})(),dU=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(lU(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(lU(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(T(On),T(ri),T(GD,9))},n.\u0275dir=Z({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Lie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Er({type:n}),n.\u0275inj=rr({imports:[tU]}),n})(),Uie=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:sd,useValue:t.callSetDisabledState??kD}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Er({type:n}),n.\u0275inj=rr({imports:[Lie]}),n})();function jie(n,e){if(1&n&&(V(0,"label",8),me(1),L()),2&n){const t=z(2).$implicit;J("for",t.id),G(1),In(t.label)}}function $ie(n,e){if(1&n){const t=Ve();V(0,"span",9),te("click",function(){Se(t);const i=z(4);return Re(i.expand=!i.expand)}),me(1),L()}if(2&n){const t=z(4);G(1),In(t.expand?"expand_less":"expand_more")}}function Gie(n,e){if(1&n){const t=Ve();V(0,"button",12),te("click",function(){const o=Se(t).$implicit,s=z(3).$implicit;return Re(z(2).update(s,{target:{value:o}}))}),me(1),L()}if(2&n){const t=e.$implicit;G(1),In(t)}}function Hie(n,e){if(1&n&&(V(0,"div",10),he(1,Gie,2,1,"button",11),L()),2&n){const t=z(2).$implicit;G(1),J("ngForOf",t.values)}}function qie(n,e){if(1&n){const t=Ve();V(0,"div"),he(1,jie,2,2,"label",4),V(2,"input",5),te("change",function(i){Se(t);const o=z().$implicit;return Re(z(2).update(o,i))}),L(),he(3,$ie,2,1,"span",6),he(4,Hie,2,1,"div",7),L()}if(2&n){const t=z().$implicit,r=z(2);G(1),J("ngIf",t.label),G(1),J("type",t.type)("value",t.value)("id",t.id)("placeholder",t.placeholder)("name",t.name),G(1),J("ngIf",t.values),G(1),J("ngIf",r.expand&&t.values)}}function zie(n,e){if(1&n&&(V(0,"label",8),me(1),L()),2&n){const t=z(2).$implicit;J("for",t.id),G(1),In(t.label)}}function Wie(n,e){if(1&n&&(V(0,"option"),me(1),L()),2&n){const t=e.$implicit;G(1),In(t)}}function Kie(n,e){if(1&n){const t=Ve();V(0,"div"),he(1,zie,2,2,"label",4),V(2,"select",13),te("change",function(i){Se(t);const o=z().$implicit;return Re(z(2).update(o,i))}),he(3,Wie,2,1,"option",14),L()()}if(2&n){const t=z().$implicit;G(1),J("ngIf",t.label),G(1),J("value",t.value),G(1),J("ngForOf",t.values)}}function Qie(n,e){if(1&n&&(V(0,"label",8),me(1),L()),2&n){const t=z(2).$implicit;J("for",t.id),G(1),In(t.label)}}function Yie(n,e){if(1&n){const t=Ve();V(0,"div"),he(1,Qie,2,2,"label",4),V(2,"textarea",15),te("change",function(i){Se(t);const o=z().$implicit;return Re(z(2).update(o,i))}),me(3,"            "),L()()}if(2&n){const t=z().$implicit;G(1),J("ngIf",t.label),G(1),J("value",t.value)}}const Jie=function(){return["text","email","password","number"]};function Xie(n,e){if(1&n&&(V(0,"div",3),he(1,qie,5,8,"div",0),he(2,Kie,4,3,"div",0),he(3,Yie,4,2,"div",0),L()),2&n){const t=e.$implicit;G(1),J("ngIf",function YR(n,e,t){const r=an()+n,i=C();return i[r]===oe?Ar(i,r,t?e.call(t):e()):function Xu(n,e){return n[e]}(i,r)}(3,Jie).indexOf(t.type)>-1),G(1),J("ngIf","select"==t.type),G(1),J("ngIf","textarea"==t.type)}}function Zie(n,e){if(1&n){const t=Ve();V(0,"button",16),te("click",function(){const o=Se(t).$implicit;return Re(z(2).submit.emit(o.action))}),me(1),L()}if(2&n){const t=e.$implicit;G(1),In(t.text)}}function eoe(n,e){if(1&n&&(V(0,"form"),he(1,Xie,4,4,"div",1),V(2,"div"),he(3,Zie,2,1,"button",2),L()()),2&n){const t=z();G(1),J("ngForOf",t.form.controls),G(2),J("ngForOf",t.form.actions)}}class cd{constructor(){this.expand=!1,this.submit=new Ce}update(e,t){e.value=t.target.value,this.expand=!1}}function toe(n,e){if(1&n){const t=Ve();V(0,"div",4)(1,"div",5)(2,"h5",6),me(3),L(),V(4,"button",7),te("click",function(){return Se(t),Re(z(2).action.emit("close_dialog"))}),L()(),V(5,"div",8)(6,"app-form",9),te("submit",function(i){return Se(t),Re(z(2).action.emit(i))}),L()()()}if(2&n){const t=z(2);G(3),In(t.dialog.form.title),G(3),J("form",t.dialog.form)}}function noe(n,e){if(1&n){const t=Ve();V(0,"button",11),te("click",function(){const o=Se(t).$implicit;return Re(z(3).action.emit(o.action))}),me(1),L()}if(2&n){const t=e.$implicit;G(1),In(t.text)}}function roe(n,e){if(1&n){const t=Ve();V(0,"div",4)(1,"div",5)(2,"h5",6),me(3),L(),V(4,"button",7),te("click",function(){return Se(t),Re(z(2).action.emit("close_dialog"))}),L()(),V(5,"div",8),he(6,noe,2,1,"button",10),L()()}if(2&n){const t=z(2);G(3),In(t.dialog.title),G(3),J("ngForOf",t.dialog.actions)}}function ioe(n,e){if(1&n&&(V(0,"div",1)(1,"div",2),he(2,toe,7,2,"div",3),he(3,roe,7,2,"div",3),L()()),2&n){const t=z();G(2),J("ngIf",t.dialog.form),G(1),J("ngIf",t.dialog.actions)}}cd.\u0275fac=function(e){return new(e||cd)},cd.\u0275cmp=mn({type:cd,selectors:[["app-form"]],inputs:{form:"form"},outputs:{submit:"submit"},decls:1,vars:1,consts:[[4,"ngIf"],["class","m-3",4,"ngFor","ngForOf"],["class","btn btn-primary m-2",3,"click",4,"ngFor","ngForOf"],[1,"m-3"],["class","form-label",3,"for",4,"ngIf"],[1,"form-control",3,"type","value","id","placeholder","name","change"],["class","mx-2 material-icons pointer expand",3,"click",4,"ngIf"],["class","mt-2 exp-con",4,"ngIf"],[1,"form-label",3,"for"],[1,"mx-2","material-icons","pointer","expand",3,"click"],[1,"mt-2","exp-con"],["class","m-2 btn btn-sm btn-primary",3,"click",4,"ngFor","ngForOf"],[1,"m-2","btn","btn-sm","btn-primary",3,"click"],[1,"form-select",3,"value","change"],[4,"ngFor","ngForOf"],["rows","5",1,"form-select",3,"value","change"],[1,"btn","btn-primary","m-2",3,"click"]],template:function(e,t){1&e&&he(0,eoe,4,2,"form",0),2&e&&J("ngIf",t.form)},dependencies:[Uh,xo,Z2,cU,dU,L2,gg],styles:[".expand[_ngcontent-%COMP%]{position:relative;top:-30px;float:right}.exp-con[_ngcontent-%COMP%]{height:150px;overflow-y:scroll}"]});class ld{constructor(){this.action=new Ce}}function ooe(n,e){if(1&n){const t=Ve();V(0,"app-menu",8),te("close",function(){return Se(t),Re(z().menu=!1)})("action",function(i){return Se(t),Re(z().perform(i))}),L()}}function soe(n,e){if(1&n){const t=Ve();V(0,"app-node",9),te("select",function(i){return Se(t),Re(z().select(i))}),L()}if(2&n){const t=z();J("node",t.design)("current",t.current)}}ld.\u0275fac=function(e){return new(e||ld)},ld.\u0275cmp=mn({type:ld,selectors:[["app-dialog"]],inputs:{dialog:"dialog"},outputs:{action:"action"},decls:1,vars:1,consts:[["class","modal d-block","tabindex","-1",4,"ngIf"],["tabindex","-1",1,"modal","d-block"],[1,"modal-dialog"],["class","modal-content",4,"ngIf"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"form","submit"],["class","btn btn-primary m-2",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-primary","m-2",3,"click"]],template:function(e,t){1&e&&he(0,ioe,4,2,"div",0),2&e&&J("ngIf",t.dialog)},dependencies:[Uh,xo,cd]});class gu{constructor(e,t){this.app=e,this.firestore=t,this.menu=!0}select(e){console.log(e),this.current=e,this.app.current=e}deselect(){this.current=void 0,this.app.current=void 0}perform(e){if(null!=qD[e]&&(this.dialog=qD[e]),"close_dialog"==e&&(this.dialog=void 0),"download"==e&&this.app.events.emit("download"),"upload"==e&&navigator.clipboard.readText().then(r=>{let i=this.app.parseText(r);i&&(this.design=i,this.app.design=i,this.current=this.design)}),"delete"==e&&(this.dialog={form:{title:"Confirm Delete?",controls:[{id:"node-d",type:"textarea",value:JSON.stringify(this.current)}],actions:[{text:"Yes",action:"delete_confirm"}]}}),"delete_confirm"==e&&(this.perform("close_dialog"),this.performDelete()),0==e.indexOf("add")&&this.performAdd(e),0==e.indexOf("edit")&&this.performEdit(e),"cut"==e&&(this.app.paste=this.current,this.performDelete()),"copy"==e&&this.current&&(this.app.paste=An.clone(this.current)),"paste"==e&&this.current&&this.app.paste&&(this.current.children.push(this.app.paste),this.app.events.emit("preview")),"preview"==e&&this.app.events.emit("preview"),"save"==e&&(this.dialog={form:{title:"Save Design",controls:[{id:"design-name",type:"text",placeholder:"Name",value:""}],actions:[{text:"Save",action:"save_"}]}},this.dialog.form&&this.app.file&&(this.dialog.form.controls[0].value=this.app.file)),"save_"==e&&(this.app.file=this.dialog?.form?.controls[0].value,null!=this.app.file&&""!=this.app.file&&this.app.events.emit("save"),this.perform("close_dialog")),"load"==e){this.dialog={action:"load",title:"Load Design",actions:[]};let r=this.firestore.data[gs.DESIGNS];if(!r)return;for(var t in r)this.dialog.actions?.push({text:r[t].id,action:"load_"+r[t].id})}else if(0==e.indexOf("load_")){let r=e.replace("load_",""),i=this.firestore.data[gs.DESIGNS];if(!i)return void this.perform("close_dialog");let o=i.filter(a=>a.id==r)[0];if(!o)return void this.perform("close_dialog");let s=this.app.parseText(o.design);s&&(this.design=s,this.app.design=s,this.current=this.design,this.app.file=r),this.perform("close_dialog")}}performEdit(e){if("edit_text"==e&&(this.dialog=qD.add_text,this.dialog?.form&&(this.dialog.form.controls[0].value=this.current?.text||""),this.dialog?.actions&&(this.dialog.actions[0].text="Update")),"edit_style"==e){var t=this.current?.attributes.get("style");if(""==(t=t||""))this.perform("add_style");else{var r=t.split(";");for(var i in this.dialog={form:{title:"Edit Style",controls:[],actions:[{text:"Update",action:"edit_style_"}]}},r)if(""!=r[i]&&" "!=r[i]){var o=r[i].split(":")[0],s=r[i].split(":")[1];this.dialog.form?.controls.push({id:"c_"+i,type:"text",label:o,value:s})}}}if("edit_style_"==e){var a=[];this.dialog?.form?.controls.forEach(c=>{""!=c.label&&""!=c.value&&a.push(c.label+":"+c.value)}),a.length>0&&this.current?.attributes.set("style",a.join(";")+";"),this.perform("close_dialog")}if("edit_attribute"==e){var u=this.current?.attributes;if(0==(u=u||new Map)?.size)this.perform("add_attribute");else for(var i in this.dialog={form:{title:"Edit Attr",controls:[],actions:[{text:"Update",action:"edit_attribute_"}]}},u)""!=i&&null!=u.get(i)&&""!=u.get(i)&&(s=u.get(i)||"",this.dialog.form?.controls.push({id:"c_"+i,type:"text",label:i,value:s}))}if("edit_attribute_"==e){let c=new Map;this.dialog?.form?.controls.forEach(l=>{l.label&&l.value&&""!=l.value&&c.set(l.label,l.value)}),this.current&&(this.current.attributes=c),this.perform("close_dialog")}if("edit_class"==e){let c=this.current?.attributes.get("class")||"";this.dialog={form:{title:"Edit Class",controls:[{id:"addclass",type:"text",value:c}],actions:[{text:"Update",action:"edit_class_"}]}}}if("edit_class_"==e&&this.current){let c=this.dialog?.form?.controls[0].value;null==c||""==c?this.current.attributes.delete("class"):this.current.attributes.set("class",c),this.perform("close_dialog")}this.app.events.emit("preview")}performAdd(e){if(e.indexOf("add_element_")>-1){let t=e.replace("add_element_","");null==this.current?(this.current=An.create(t),this.design=this.current,this.app.design=this.design):An.add(this.current,t),this.perform("close_dialog")}if(e.indexOf("add_text_")>-1){if(this.current){let t=this.dialog?.form?.controls[0].value;t=""==t?void 0:t,this.current.text=t}console.log("Form",this.dialog?.form),this.perform("close_dialog")}if(e.indexOf("add_class_")>-1){if(this.current){let t=this.current.attributes.get("class"),r=this.dialog?.form?.controls[0].value;t=t?t+" "+r:r,t&&this.current.attributes.set("class",t)}console.log("Form",this.dialog?.form),this.perform("close_dialog")}if(e.indexOf("add_style_")>-1){if(this.current){let t=this.current.attributes.get("style"),r=this.dialog?.form?.controls[0].value,i=this.dialog?.form?.controls[1].value;t=t?t+r+":"+i+";":r+":"+i+";",t&&this.current.attributes.set("style",t)}console.log("Form",this.dialog?.form),this.perform("close_dialog")}if(e.indexOf("add_attribute_")>-1){if(this.current){let t=this.dialog?.form?.controls[0].value,r=this.dialog?.form?.controls[1].value;t&&r&&this.current.attributes.set(t,r)}console.log("Form",this.dialog?.form),this.perform("close_dialog")}this.app.events.emit("preview")}performDelete(){!this.design||!this.current||(this.design.id==this.current.id?(this.design=void 0,this.current=void 0,this.app.design=void 0,this.app.current=void 0):(An.remove(this.design,this.current),this.current=this.design),this.app.events.emit("preview"))}}gu.\u0275fac=function(e){return new(e||gu)(T(Ri),T(qr))},gu.\u0275cmp=mn({type:gu,selectors:[["app-home"]],decls:8,vars:4,consts:[[3,"menu"],[3,"close","action",4,"ngIf"],[1,"node-preview","row","m-0"],[1,"col-12","col-md-3","node","table-responsive"],[3,"node","current","select",4,"ngIf"],[1,"col-12","col-md-9","node","table-responsive",3,"click"],[3,"design"],[3,"dialog","action"],[3,"close","action"],[3,"node","current","select"]],template:function(e,t){1&e&&(V(0,"app-header",0),te("menu",function(){return t.menu=!0}),L(),he(1,ooe,1,0,"app-menu",1),V(2,"div",2)(3,"div",3),he(4,soe,1,2,"app-node",4),L(),V(5,"div",5),te("click",function(){return t.deselect()}),si(6,"app-preview",6),L()(),V(7,"app-dialog",7),te("action",function(i){return t.perform(i)}),L()),2&e&&(G(1),J("ngIf",t.menu),G(3),J("ngIf",t.design),G(2),J("design",t.design),G(1),J("dialog",t.dialog))},dependencies:[xo,td,nd,rd,fu,ld],styles:[".node[_ngcontent-%COMP%]{border:solid 10px darkblue;padding:10px;height:100%}.node-preview[_ngcontent-%COMP%]{border:solid 1px black;position:absolute;top:55px;left:55px;height:-webkit-fill-available;width:-webkit-fill-available}@media only screen and (min-width: 600px){.col-md-9.node[_ngcontent-%COMP%]{border-left:0px}}"]});const qD={add:{action:"add",title:"Add",actions:[{text:"Element",action:"add_element"},{text:"Text",action:"add_text"},{text:"Class",action:"add_class"},{text:"Style",action:"add_style"},{text:"Attribute",action:"add_attribute"}]},add_element:{action:"add_element",title:"Add Element",actions:[{text:"Div",action:"add_element_div"},{text:"Span",action:"add_element_span"},{text:"Button",action:"add_element_button"},{text:"Input",action:"add_element_input"},{text:"Paragraph",action:"add_element_p"},{text:"Image",action:"add_element_img"},{text:"Video",action:"add_element_video"},{text:"Script",action:"add_element_script"},{text:"Style",action:"add_element_style"}]},add_text:{form:{title:"Add Text",controls:[{id:"addtext",type:"textarea",placeholder:"Enter text here..",value:""}],actions:[{text:"Add",action:"add_text_"}]}},add_class:{form:{title:"Add Class",controls:[{id:"addclass",type:"text",placeholder:"Specify class..",value:""}],actions:[{text:"Add",action:"add_class_"}]}},add_style:{form:{title:"Add Style",controls:[{id:"addstylekey",type:"text",placeholder:"name",value:"",values:["height","width","margin","padding","border","text-align","float","position","display","color","background","font-size","font-weight","text-decoration","vertical-align"]},{id:"addstylevalue",type:"text",placeholder:"value",value:""}],actions:[{text:"Add",action:"add_style_"}]}},add_attribute:{form:{title:"Add Attribute",controls:[{id:"attributeKey",type:"text",placeholder:"name",value:""},{id:"attributeKey",type:"text",placeholder:"value",value:""}],actions:[{text:"Add",action:"add_attribute_"}]}},edit:{action:"edit",title:"Edit",actions:[{text:"Text",action:"edit_text"},{text:"Class",action:"edit_class"},{text:"Style",action:"edit_style"},{text:"Attribute",action:"edit_attribute"}]}};class dd{constructor(e,t){this.router=e,this.fs=t,t.refreshUser.subscribe(r=>this.router.navigate(r?["dashboard"]:["home"]))}logout(){(function tJ(n){return dn(n).signOut()})(this.fs.auth).then(()=>this.fs.logout())}}dd.\u0275fac=function(e){return new(e||dd)(T(Jt),T(qr))},dd.\u0275cmp=mn({type:dd,selectors:[["app-logout"]],decls:7,vars:0,consts:[[1,"row","text-center","p-3"],[1,"col-md-4","col-sm-6","col-xs-12","form"],[2,"font-weight","600","font-size","18px"],[3,"click"]],template:function(e,t){1&e&&(V(0,"div",0)(1,"div",1)(2,"p",2),me(3," Are you sure you want to log-off? "),si(4,"br"),L(),V(5,"button",3),te("click",function(){return t.logout()}),me(6,"Logout"),L()()())},styles:["img[_ngcontent-%COMP%]{display:block;width:80px;margin:30px auto;box-shadow:0 5px 10px -7px #333;border-radius:50%}.form[_ngcontent-%COMP%]{background-color:#fff;margin:50px auto 10px;padding:30px;border-radius:8px;overflow:hidden;box-shadow:0 2px 10px -3px #333;text-align:center}button[_ngcontent-%COMP%]{border-radius:100px;border:none;background:#719BE6;width:50%;padding:10px;color:#fff;box-shadow:0 2px 10px -3px #719be6;display:block;margin:30px auto 10px}"]});const aoe=[{path:"",component:gu},{path:"home",component:gu},{path:"login",component:ed},{path:"logout",component:dd}];class mu{}function uoe(n,e){1&n&&(V(0,"div",1),si(1,"div",2),L())}mu.\u0275fac=function(e){return new(e||mu)},mu.\u0275mod=Er({type:mu}),mu.\u0275inj=rr({imports:[_1.forRoot(aoe),_1]});class hd{constructor(e){this.loaderService=e,this.isLoading=this.loaderService.isLoading}}hd.\u0275fac=function(e){return new(e||hd)(T(ps))},hd.\u0275cmp=mn({type:hd,selectors:[["app-loader"]],decls:2,vars:3,consts:[["class","c d-flex align-items-center justify-content-center",4,"ngIf"],[1,"c","d-flex","align-items-center","justify-content-center"],[1,"loader"]],template:function(e,t){1&e&&(he(0,uoe,2,0,"div",0),function rP(n,e){const t=Ee();let r;const i=n+22;t.firstCreatePass?(r=function Q3(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(i,r.onDestroy)):r=t.data[i];const o=r.factory||(r.factory=yo(r.type)),s=Hn(T);try{const a=Ld(!1),u=o();return Ld(a),function F4(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,C(),i,u),u}finally{Hn(s)}}(1,"async")),2&e&&J("ngIf",function iP(n,e,t){const r=n+22,i=C(),o=function Ds(n,e){return n[e]}(i,r);return function ac(n,e){return n[1].data[e].pure}(i,r)?XR(i,an(),e,o.transform,t,o):o.transform(t)}(1,1,t.isLoading))},dependencies:[xo,Px],styles:[".c[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1000;text-align:center;background:black;opacity:.5}.loader[_ngcontent-%COMP%]{border:15px solid #f3f3f3;border-radius:50%;border-top:15px solid #3498db;width:100px;height:100px;animation:_ngcontent-%COMP%_spin 2s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(360deg)}}"]});class fd{}fd.\u0275fac=function(e){return new(e||fd)},fd.\u0275cmp=mn({type:fd,selectors:[["app-root"]],decls:2,vars:0,template:function(e,t){1&e&&si(0,"router-outlet")(1,"app-loader")},dependencies:[By,hd],styles:[".node[_ngcontent-%COMP%]{border:solid 10px darkblue;padding:10px;height:100%}.node-preview[_ngcontent-%COMP%]{border:solid 1px black;position:absolute;top:55px;left:55px;height:-webkit-fill-available;width:-webkit-fill-available}@media only screen and (min-width: 600px){.col-md-9.node[_ngcontent-%COMP%]{border-left:0px}}"]});class _u{}_u.\u0275fac=function(e){return new(e||_u)},_u.\u0275mod=Er({type:_u,bootstrap:[fd]}),_u.\u0275inj=rr({providers:[Ri],imports:[j6,mu,Uie]}),B6().bootstrapModule(_u).catch(n=>console.error(n))}},Fe=>{Fe(Fe.s=605)}]);